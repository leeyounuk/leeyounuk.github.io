<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¼ë‹¨í•©ê²© JLPT N2 ë‹¨ì–´ì¥ (ë³µìŠµ ëª¨ë“œ í¬í•¨)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&family=Noto+Sans+JP:wght@400;700&display=swap');
        body { font-family: 'Noto Sans KR', 'Noto Sans JP', sans-serif; }
        .fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">

    <div class="bg-white rounded-xl shadow-lg w-full max-w-md overflow-hidden">
        <div id="header-bg" class="bg-emerald-600 p-4 text-white text-center transition-colors duration-500">
            <h1 id="header-title" class="text-xl font-bold">JLPT N2 ë‹¨ì–´ì¥</h1>
            <p id="header-desc" class="text-sm opacity-80">ìˆœì„œëŠ” ëœë¤, ì˜¤ë‹µ ì‹œ ì •ë‹µ ê³µê°œ</p>
        </div>

        <div class="bg-gray-200 h-2 w-full">
            <div id="progress-bar" class="bg-emerald-400 h-2 transition-all duration-300" style="width: 0%"></div>
        </div>

        <div id="quiz-container" class="p-8 text-center fade-in">
            <div class="mb-6">
                <span class="text-sm text-gray-500 mb-1 block">ë¬¸ì œ <span id="current-index">1</span> / <span id="total-count">10</span></span>
                <h2 id="question-word" class="text-5xl font-bold text-gray-800 mb-2"></h2>
                <p id="status-msg" class="text-gray-500 font-medium h-8 text-sm"></p>
            </div>

            <div class="space-y-4">
                <div class="relative">
                    <label id="input-label" class="block text-left text-sm font-bold text-gray-700 mb-1">ëœ»ì„ ì…ë ¥í•˜ì„¸ìš” (í•œêµ­ì–´)</label>
                    <input type="text" id="user-input" 
                        class="w-full px-4 py-3 rounded-lg border-2 border-gray-300 focus:border-emerald-500 focus:outline-none transition-colors text-lg text-center"
                        placeholder="ì •ë‹µ ì…ë ¥" autocomplete="off">
                </div>

                <button id="submit-btn" onclick="checkAnswer()" 
                    class="w-full bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-3 rounded-lg transition-transform active:scale-95 shadow-md">
                    í™•ì¸
                </button>
                
                <div id="feedback" class="h-10 text-sm font-bold flex items-center justify-center whitespace-pre-line"></div>
            </div>
        </div>

        <div id="result-container" class="hidden p-8 text-center fade-in">
            <h2 class="text-3xl font-bold text-gray-800 mb-2">í€´ì¦ˆ ì™„ë£Œ! ğŸ‰</h2>
            <p class="text-lg mb-6 text-gray-600">
                ì´ <span id="final-score" class="font-bold text-emerald-600 text-2xl"></span>ì ì„ íšë“í–ˆìŠµë‹ˆë‹¤.
            </p>
            
            <div id="review-section" class="hidden mb-6 bg-red-50 p-4 rounded-lg border border-red-200">
                <p class="text-red-600 font-bold mb-2">í‹€ë¦° ë‹¨ì–´ê°€ <span id="wrong-count">0</span>ê°œ ìˆìŠµë‹ˆë‹¤.</p>
                <button onclick="startReview()" class="w-full bg-red-500 hover:bg-red-600 text-white font-bold py-2 rounded-lg shadow transition-colors">
                    í‹€ë¦° ë‹¨ì–´ë§Œ ë³µìŠµí•˜ê¸° ğŸ”„
                </button>
            </div>

            <button onclick="location.reload()" class="w-full bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 rounded-lg shadow transition-colors">
                ì²˜ìŒë¶€í„° ë‹¤ì‹œ í•˜ê¸° (ì „ì²´ ë¦¬ì…‹)
            </button>
        </div>
    </div>

    <script>
        // ì›ë³¸ ë°ì´í„°
    const vocabularyData = [
    // --- 9í˜ì´ì§€ ---
    { kanji: "æ¹¿ã£ã½ã„", kana: "ã—ã‚ã£ã½ã„", meaning: ["ëˆ…ëˆ…í•˜ë‹¤", "ìŠµê¸° ì°¨ë‹¤"] },
    { kanji: "é®®ã‚„ã‹ãª", kana: "ã‚ã–ã‚„ã‹ãª", meaning: ["ì„ ëª…í•œ"] },
    { kanji: "æ¥ç¶š", kana: "ã›ã¤ãã", meaning: ["ì ‘ì†"] },
    { kanji: "æ´åŠ©", kana: "ãˆã‚“ã˜ã‚‡", meaning: ["ì›ì¡°"] },
    { kanji: "é€†ã‚‰ã†", kana: "ã•ã‹ã‚‰ã†", meaning: ["ê±°ìŠ¤ë¥´ë‹¤", "ê±°ì—­í•˜ë‹¤"] },
    { kanji: "ç ´ã‚Œã‚‹", kana: "ã‚„ã¶ã‚Œã‚‹", meaning: ["ì°¢ì–´ì§€ë‹¤", "íŒŒì†ë˜ë‹¤"] },
    { kanji: "æ‰¹åˆ¤", kana: "ã²ã¯ã‚“", meaning: ["ë¹„íŒ"] },
    { kanji: "é¢å€’ãª", kana: "ã‚ã‚“ã©ã†ãª", meaning: ["ê·€ì°®ì€", "ì„±ê°€ì‹ "] },
    { kanji: "ç°¡æ½”ãª", kana: "ã‹ã‚“ã‘ã¤ãª", meaning: ["ê°„ê²°í•œ"] },
    { kanji: "æ‹›ã", kana: "ã¾ã­ã", meaning: ["ë¶€ë¥´ë‹¤", "ì´ˆëŒ€í•˜ë‹¤"] },
    { kanji: "å‚ç…§", kana: "ã•ã‚“ã—ã‚‡ã†", meaning: ["ì°¸ì¡°"] },
    { kanji: "ä¿è¨¼", kana: "ã»ã—ã‚‡ã†", meaning: ["ë³´ì¦"] },
    { kanji: "ç„¦ã’ã‚‹", kana: "ã“ã’ã‚‹", meaning: ["ëˆ‹ë‹¤", "íƒ€ë‹¤"] },
    { kanji: "å‚¬ã—", kana: "ã‚‚ã‚ˆãŠã—", meaning: ["í–‰ì‚¬", "ëª¨ì„"] },
    { kanji: "ç—‡çŠ¶", kana: "ã—ã‚‡ã†ã˜ã‚‡ã†", meaning: ["ì¦ìƒ"] },
    { kanji: "åŠ£ã‚‹", kana: "ãŠã¨ã‚‹", meaning: ["ì—´ë“±í•˜ë‹¤", "ë’¤ë–¨ì–´ì§€ë‹¤"] },
    { kanji: "æ‹¾ã†", kana: "ã²ã‚ã†", meaning: ["ì¤ë‹¤"] },
    { kanji: "è·é›¢", kana: "ãã‚‡ã‚Š", meaning: ["ê±°ë¦¬"] },
    { kanji: "æ··ä¹±", kana: "ã“ã‚“ã‚‰ã‚“", meaning: ["í˜¼ë€"] },
    { kanji: "é©šã", kana: "ãŠã©ã‚ã", meaning: ["ë†€ë¼ë‹¤"] },
    { kanji: "ç¡¬è²¨", kana: "ã“ã†ã‹", meaning: ["ë™ì „", "ì£¼í™”"] },
    { kanji: "å¿«ã", kana: "ã“ã“ã‚ã‚ˆã", meaning: ["í”ì¾Œíˆ"] },
    { kanji: "å‡ã‚‹", kana: "ã“ãŠã‚‹", meaning: ["ì–¼ë‹¤"] },
    { kanji: "è£½é€ ", kana: "ã›ã„ãã†", meaning: ["ì œì¡°"] },
    { kanji: "è¨è«–", kana: "ã¨ã†ã‚ã‚“", meaning: ["í† ë¡ "] },
    { kanji: "é †èª¿ãª", kana: "ã˜ã‚…ã‚“ã¡ã‚‡ã†ãª", meaning: ["ìˆœì¡°ë¡œìš´"] },
    { kanji: "æ•‘ã†", kana: "ã™ãã†", meaning: ["êµ¬ì¡°í•˜ë‹¤"] },
    { kanji: "è¬›å¸«", kana: "ã“ã†ã—", meaning: ["ê°•ì‚¬"] },
    { kanji: "äº‰ã†", kana: "ã‚ã‚‰ãã†", meaning: ["ë‹¤íˆ¬ë‹¤"] },
    { kanji: "å¥½èª¿ãª", kana: "ã“ã†ã¡ã‚‡ã†ãª", meaning: ["í˜¸ì¡°ì¸", "ìˆœì¡°ë¡œìš´"] },
    { kanji: "æ°¸ä¹…", kana: "ãˆã„ãã‚…ã†", meaning: ["ì˜êµ¬", "ì˜ì›"] },
    { kanji: "è…¹", kana: "ã¯ã‚‰", meaning: ["ë°°"] },
    { kanji: "åœ¨ç±", kana: "ã–ã„ã›ã", meaning: ["ì¬ì "] },
    { kanji: "æŒ‡æ‘˜", kana: "ã—ã¦ã", meaning: ["ì§€ì "] },
    { kanji: "å¾“ã†", kana: "ã—ãŸãŒã†", meaning: ["ë”°ë¥´ë‹¤", "ë³µì¢…í•˜ë‹¤"] },
    { kanji: "æµã¾ã‚Œã‚‹", kana: "ã‚ãã¾ã‚Œã‚‹", meaning: ["í˜œíƒ ë°›ë‹¤", "í’ë¶€í•˜ë‹¤"] },
    { kanji: "é ˜åæ›¸", kana: "ã‚Šã‚‡ã†ã—ã‚…ã†ã—ã‚‡", meaning: ["ì˜ìˆ˜ì¦"] },

    // --- 10í˜ì´ì§€ ---
    { kanji: "è’ã„", kana: "ã‚ã‚‰ã„", meaning: ["ê±°ì¹ ë‹¤"] },
    { kanji: "è¦‹é€ƒã™", kana: "ã¿ã®ãŒã™", meaning: ["ë†“ì¹˜ë‹¤"] },
    { kanji: "è±Šã‹ãª", kana: "ã‚†ãŸã‹ãª", meaning: ["í’ë¶€í•œ", "ë¶€ìœ í•œ"] },
    { kanji: "é¤Šã†", kana: "ã‚„ã—ãªã†", meaning: ["ê¸°ë¥´ë‹¤", "ë¶€ì–‘í•˜ë‹¤"] },
    { kanji: "è­¦å‚™", kana: "ã‘ã„ã³", meaning: ["ê²½ë¹„"] },
    { kanji: "çœã", kana: "ã¯ã¶ã", meaning: ["ìƒëµí•˜ë‹¤"] },
    { kanji: "è¿ãˆã‚‹", kana: "ã‚€ã‹ãˆã‚‹", meaning: ["ë§ì´í•˜ë‹¤"] },
    { kanji: "æ‹¡å¼µ", kana: "ã‹ãã¡ã‚‡ã†", meaning: ["í™•ì¥"] },
    { kanji: "å¸°çœ", kana: "ãã›ã„", meaning: ["ê·€ì„±"] },
    { kanji: "ç¸®ã‚ã‚‹", kana: "ã¡ã¢ã‚ã‚‹", meaning: ["ì¤„ì´ë‹¤"] },
    { kanji: "å®Ÿè·µ", kana: "ã˜ã£ã›ã‚“", meaning: ["ì‹¤ì²œ"] },
    { kanji: "ç•°è‰²", kana: "ã„ã—ã‚‡ã", meaning: ["ì´ìƒ‰"] },
    { kanji: "ä»‹è­·", kana: "ã‹ã„ã”", meaning: ["ê°œí˜¸", "ê°„ë³‘"] },
    { kanji: "ç³»çµ±", kana: "ã‘ã„ã¨ã†", meaning: ["ê³„í†µ"] },
    { kanji: "æŸã­ã‚‹", kana: "ãŸã°ã­ã‚‹", meaning: ["ë¬¶ë‹¤"] },
    { kanji: "ç²¾ç®—", kana: "ã›ã„ã•ã‚“", meaning: ["ì •ì‚°"] },
    { kanji: "è¶£å‘³", kana: "ã—ã‚…ã¿", meaning: ["ì·¨ë¯¸"] },
    { kanji: "è¿”å“", kana: "ã¸ã‚“ã´ã‚“", meaning: ["ë°˜í’ˆ"] },
    { kanji: "ä¹±æš´", kana: "ã‚‰ã‚“ã¼ã†", meaning: ["ë‚œí­"] },
    { kanji: "ç«¶ã†", kana: "ããã†", meaning: ["ê²¨ë£¨ë‹¤", "ê²½ìŸí•˜ë‹¤"] },
    { kanji: "å¼±ç‚¹", kana: "ã˜ã‚ƒãã¦ã‚“", meaning: ["ì•½ì "] },
    { kanji: "æ¿ƒã„", kana: "ã“ã„", meaning: ["ì§™ë‹¤", "ì§„í•˜ë‹¤"] },
    { kanji: "æ··ã˜ã‚‹", kana: "ã¾ã˜ã‚‹", meaning: ["ì„ì´ë‹¤"] },
    { kanji: "ä»»ã›ã‚‹", kana: "ã¾ã‹ã›ã‚‹", meaning: ["ë§¡ê¸°ë‹¤"] },
    { kanji: "å‹§èª˜", kana: "ã‹ã‚“ã‚†ã†", meaning: ["ê¶Œìœ "] },
    { kanji: "æ", kana: "ãã‚“", meaning: ["ì†í•´"] },
    { kanji: "é †èª¿", kana: "ã˜ã‚…ã‚“ã¡ã‚‡ã†", meaning: ["ìˆœì¡°ë¡œì›€"] },
    { kanji: "æ¼”æŠ€", kana: "ãˆã‚“ã", meaning: ["ì—°ê¸°"] },
    { kanji: "ç©ã‚‚ã‚‹", kana: "ã¤ã‚‚ã‚‹", meaning: ["ìŒ“ì´ë‹¤"] },
    { kanji: "é•å", kana: "ã„ã¯ã‚“", meaning: ["ìœ„ë°˜"] },
    { kanji: "å‹‡ã¾ã—ã„", kana: "ã„ã•ã¾ã—ã„", meaning: ["ìš©ê°í•˜ë‹¤", "í™œë°œí•˜ë‹¤"] },
    { kanji: "é™½æ°—ãª", kana: "ã‚ˆã†ããª", meaning: ["ëª…ë‘í•œ", "ë°ì€"] },
    { kanji: "ç™»ã‚‹", kana: "ã®ã¼ã‚‹", meaning: ["ì˜¤ë¥´ë‹¤"] },
    { kanji: "å‚ç›´", kana: "ã™ã„ã¡ã‚‡ã", meaning: ["ìˆ˜ì§"] },

    // --- 11í˜ì´ì§€ ---
    { kanji: "ä½å±…", kana: "ã˜ã‚…ã†ãã‚‡", meaning: ["ì£¼ê±°"] },
    { kanji: "çŸ­ç·¨", kana: "ãŸã‚“ãºã‚“", meaning: ["ë‹¨í¸"] },
    { kanji: "å‚™ãˆã‚‹", kana: "ããªãˆã‚‹", meaning: ["ëŒ€ë¹„í•˜ë‹¤"] },
    { kanji: "æ•£ã‚‹", kana: "ã¡ã‚‹", meaning: ["ë–¨ì–´ì§€ë‹¤", "í©ì–´ì§€ë‹¤"] },
    { kanji: "å…¸å‹çš„ãª", kana: "ã¦ã‚“ã‘ã„ã¦ããª", meaning: ["ì „í˜•ì ì¸"] },
    { kanji: "æ¬²", kana: "ã‚ˆã", meaning: ["ìš•ì‹¬"] },
    { kanji: "æŸ”ã‚‰ã‹ã„", kana: "ã‚„ã‚ã‚‰ã‹ã„", meaning: ["ë¶€ë“œëŸ½ë‹¤"] },
    { kanji: "ç–²åŠ´", kana: "ã²ã‚ã†", meaning: ["í”¼ë¡œ"] },
    { kanji: "ä¿³å„ª", kana: "ã¯ã„ã‚†ã†", meaning: ["ë°°ìš°"] },
    { kanji: "é›¢ã‚Œã‚‹", kana: "ã¯ãªã‚Œã‚‹", meaning: ["ë–¨ì–´ì§€ë‹¤", "ë©€ì–´ì§€ë‹¤"] },
    { kanji: "é¿é›£", kana: "ã²ãªã‚“", meaning: ["í”¼ë‚œ"] },
    { kanji: "è¨ºæ–­", kana: "ã—ã‚“ã ã‚“", meaning: ["ì§„ë‹¨"] },
    { kanji: "æ•¬ã†", kana: "ã†ã‚„ã¾ã†", meaning: ["ì¡´ê²½í•˜ë‹¤"] },
    { kanji: "å—è¬›", kana: "ã˜ã‚…ã“ã†", meaning: ["ìˆ˜ê°•"] },
    { kanji: "å¸ƒ", kana: "ã¬ã®", meaning: ["ì²œ", "ì§ë¬¼"] },
    { kanji: "ç¦ç¥‰", kana: "ãµãã—", meaning: ["ë³µì§€"] },
    { kanji: "æ¨ã¦ã‚‹", kana: "ã™ã¦ã‚‹", meaning: ["ë²„ë¦¬ë‹¤"] },
    { kanji: "æ©Ÿå«Œ", kana: "ãã’ã‚“", meaning: ["ê¸°ë¶„"] },
    { kanji: "æå¤±", kana: "ãã‚“ã—ã¤", meaning: ["ì†ì‹¤"] },
    { kanji: "ç®¡ç†", kana: "ã‹ã‚“ã‚Š", meaning: ["ê´€ë¦¬"] },
    { kanji: "åšã‹ã¾ã—ã„", kana: "ã‚ã¤ã‹ã¾ã—ã„", meaning: ["ë»”ë»”í•˜ë‹¤"] },
    { kanji: "è«¸å•é¡Œ", kana: "ã—ã‚‡ã‚‚ã‚“ã ã„", meaning: ["ì—¬ëŸ¬ ë¬¸ì œ"] },
    { kanji: "ç ”ä¿®", kana: "ã‘ã‚“ã—ã‚…ã†", meaning: ["ì—°ìˆ˜"] },
    { kanji: "å•†åº—è¡—", kana: "ã—ã‚‡ã†ã¦ã‚“ãŒã„", meaning: ["ìƒì ê°€"] },
    { kanji: "è€ãˆã‚‹", kana: "ãŸãˆã‚‹", meaning: ["ê²¬ë””ë‹¤"] },
    { kanji: "å†æ”¾é€", kana: "ã•ã„ã»ã†ãã†", meaning: ["ì¬ë°©ì†¡"] },
    { kanji: "æŠ•ç¥¨", kana: "ã¨ã†ã²ã‚‡ã†", meaning: ["íˆ¬í‘œ"] },
    { kanji: "æŠ±ãˆã‚‹", kana: "ã‹ã‹ãˆã‚‹", meaning: ["ê°ì‹¸ ì¥ë‹¤", "ì•ˆë‹¤"] },
    { kanji: "å¿—æœ›", kana: "ã—ã¼ã†", meaning: ["ì§€ë§"] },
    { kanji: "å‰¯ç¤¾é•·", kana: "ãµãã—ã‚ƒã¡ã‚‡ã†", meaning: ["ë¶€ì‚¬ì¥"] },
    { kanji: "é«˜åå…¥", kana: "ã“ã†ã—ã‚…ã†ã«ã‚…ã†", meaning: ["ê³ ìˆ˜ì…"] },
    { kanji: "äºˆç´„åˆ¶", kana: "ã‚ˆã‚„ãã›ã„", meaning: ["ì˜ˆì•½ì œ"] },

    // --- 12í˜ì´ì§€ ---
    { kanji: "å°±è·ç‡", kana: "ã—ã‚…ã†ã—ã‚‡ãã‚Šã¤", meaning: ["ì·¨ì§ë¥ "] },
    { kanji: "é›†ä¸­åŠ›", kana: "ã—ã‚…ã†ã¡ã‚…ã†ã‚Šã‚‡ã", meaning: ["ì§‘ì¤‘ë ¥"] },
    { kanji: "æ—§åˆ¶åº¦", kana: "ãã‚…ã†ã›ã„ã©", meaning: ["êµ¬ì œë„"] },
    { kanji: "åŒ»å­¦ç•Œ", kana: "ã„ãŒãã‹ã„", meaning: ["ì˜í•™ê³„"] },
    { kanji: "æ–‡å­¦è³", kana: "ã¶ã‚“ãŒãã—ã‚‡ã†", meaning: ["ë¬¸í•™ìƒ"] },
    { kanji: "æº–å„ªå‹", kana: "ã˜ã‚…ã‚“ã‚†ã†ã—ã‚‡ã†", meaning: ["ì¤€ìš°ìŠ¹"] },
    { kanji: "æ‚ªæ¡ä»¶", kana: "ã‚ãã˜ã‚‡ã†ã‘ã‚“", meaning: ["ì•…ì¡°ê±´"] },
    { kanji: "ç¾æ®µéš", kana: "ã’ã‚“ã ã‚“ã‹ã„", meaning: ["í˜„ ë‹¨ê³„"] },
    { kanji: "éå…¬å¼", kana: "ã²ã“ã†ã—ã", meaning: ["ë¹„ê³µì‹"] },
    { kanji: "ä¸€æ—¥ãŠã", kana: "ã„ã¡ã«ã¡ãŠã", meaning: ["í•˜ë£¨ ê±¸ëŸ¬"] },
    { kanji: "ç·å£²ä¸Š", kana: "ãã†ã†ã‚Šã‚ã’", meaning: ["ì´ë§¤ì¶œ"] },
    { kanji: "çœŸå¤œä¸­", kana: "ã¾ã‚ˆãªã‹", meaning: ["í•œë°¤ì¤‘"] },
    { kanji: "ä»®æ¡ç”¨", kana: "ã‹ã‚Šã•ã„ã‚ˆã†", meaning: ["ì„ì‹œ ì±„ìš©"] },
    { kanji: "æŠ•ç¥¨ç‡", kana: "ã¨ã†ã²ã‚‡ã†ã‚Šã¤", meaning: ["íˆ¬í‘œìœ¨"] },
    { kanji: "å›½éš›è‰²", kana: "ã“ãã•ã„ã—ã‚‡ã", meaning: ["êµ­ì œìƒ‰"] },
    { kanji: "è«¸å¤–å›½", kana: "ã—ã‚‡ãŒã„ã“ã", meaning: ["ì œ ì™¸êµ­", "ì—¬ëŸ¬ ë‚˜ë¼"] },
    { kanji: "åŠé€æ˜", kana: "ã¯ã‚“ã¨ã†ã‚ã„", meaning: ["ë°˜íˆ¬ëª…"] },
    { kanji: "ä½ä¾¡æ ¼", kana: "ã¦ã„ã‹ã‹ã", meaning: ["ì €ê°€ê²©"] },
    { kanji: "æ—¥æœ¬æµ", kana: "ã«ã»ã‚“ã‚Šã‚…ã†", meaning: ["ì¼ë³¸ì‹"] },
    { kanji: "æº–æ±ºå‹", kana: "ã˜ã‚…ã‚“ã‘ã£ã—ã‚‡ã†", meaning: ["ì¤€ê²°ìŠ¹"] },
    { kanji: "å†æå‡º", kana: "ã•ã„ã¦ã„ã—ã‚…ã¤", meaning: ["ì¬ì œì¶œ"] },
    { kanji: "è¦ªå­é€£ã‚Œ", kana: "ãŠã‚„ã“ã¥ã‚Œ", meaning: ["ë¶€ëª¨ ìì‹ ë™ë°˜"] },
    { kanji: "è–„æš—ã„", kana: "ã†ã™ãã‚‰ã„", meaning: ["ì–´ë‘‘ì–´ë‘‘í•˜ë‹¤"] },
    { kanji: "éŸ³æ¥½å…¨èˆ¬", kana: "ãŠã‚“ãŒããœã‚“ã°ã‚“", meaning: ["ìŒì•… ì „ë°˜"] },
    { kanji: "é¢¨é‚ªæ°—å‘³", kana: "ã‹ãœãã¿", meaning: ["ê°ê¸° ê¸°ìš´"] },
    { kanji: "æœ€æœ‰åŠ›", kana: "ã•ã„ã‚†ã†ã‚Šã‚‡ã", meaning: ["ìµœìœ ë ¥"] },
    { kanji: "é£Ÿå™¨é¡", kana: "ã—ã‚‡ã£ãã‚‹ã„", meaning: ["ì‹ê¸°ë¥˜"] },
    { kanji: "å±é™ºæ€§", kana: "ãã‘ã‚“ã›ã„", meaning: ["ìœ„í—˜ì„±"] },
    { kanji: "ç·šè·¯æ²¿ã„", kana: "ã›ã‚“ã‚ãã„", meaning: ["ì„ ë¡œê°€"] },
    { kanji: "æœªçµŒé¨“", kana: "ã¿ã‘ã„ã‘ã‚“", meaning: ["ë¯¸ê²½í—˜"] },
    { kanji: "æœŸé™åˆ‡ã‚Œ", kana: "ãã’ã‚“ãã‚Œ", meaning: ["ê¸°í•œ ì¢…ë£Œ"] },

    // --- 13í˜ì´ì§€ ---
    { kanji: "é›»è»Šè³ƒ", kana: "ã§ã‚“ã—ã‚ƒã¡ã‚“", meaning: ["ì „ì²  ìš”ê¸ˆ"] },
    { kanji: "æœªä½¿ç”¨", kana: "ã¿ã—ã‚ˆã†", meaning: ["ë¯¸ì‚¬ìš©"] },
    { kanji: "é«˜æ€§èƒ½", kana: "ã“ã†ã›ã„ã®ã†", meaning: ["ê³ ì„±ëŠ¥"] },
    { kanji: "ä¸»æˆåˆ†", kana: "ã—ã‚…ã›ã„ã¶ã‚“", meaning: ["ì£¼ì„±ë¶„"] },
    { kanji: "å¿œæ´å›£", kana: "ãŠã†ãˆã‚“ã ã‚“", meaning: ["ì‘ì›ë‹¨"] },
    { kanji: "åˆå¹´åº¦", kana: "ã—ã‚‡ã­ã‚“ã©", meaning: ["ì´ˆë…„ë„"] },
    { kanji: "ç„¡è²¬ä»»", kana: "ã‚€ã›ãã«ã‚“", meaning: ["ë¬´ì±…ì„"] },
    { kanji: "æ‚ªå½±éŸ¿", kana: "ã‚ããˆã„ãã‚‡ã†", meaning: ["ì•…ì˜í–¥"] },
    { kanji: "ä¼šå“¡åˆ¶", kana: "ã‹ã„ã„ã‚“ã›ã„", meaning: ["íšŒì›ì œ"] },
    { kanji: "å®¶æ—é€£ã‚Œ", kana: "ã‹ããã¥ã‚Œ", meaning: ["ê°€ì¡± ë™ë°˜"] },
    { kanji: "æˆåŠŸç‡", kana: "ã›ã„ã“ã†ã‚Šã¤", meaning: ["ì„±ê³µë¥ "] },
    { kanji: "çœŸå¾Œã‚", kana: "ã¾ã†ã—ã‚", meaning: ["ë°”ë¡œ ë’¤"] },
    { kanji: "æ‹›å¾…çŠ¶", kana: "ã—ã‚‡ã†ãŸã„ã˜ã‚‡ã†", meaning: ["ì´ˆëŒ€ì¥"] },
    { kanji: "ä½å®…è¡—", kana: "ã˜ã‚…ã†ãŸããŒã„", meaning: ["ì£¼íƒê°€"] },
    { kanji: "ç¾å®Ÿé›¢ã‚Œ", kana: "ã’ã‚“ã˜ã¤ã°ãªã‚Œ", meaning: ["í˜„ì‹¤ì„ ë²—ì–´ë‚¨"] },
    { kanji: "ä¸æ­£ç¢º", kana: "ãµã›ã„ã‹ã", meaning: ["ë¶€ì •í™•"] },
    { kanji: "çœŸæ–°ã—ã„", kana: "ã¾ã‚ãŸã‚‰ã—ã„", meaning: ["ì™„ì „íˆ ìƒˆë¡­ë‹¤"] },
    { kanji: "ç•°æ–‡åŒ–", kana: "ã„ã¶ã‚“ã‹", meaning: ["ì´ë¬¸í™”"] },
    { kanji: "çµå©šè¦³", kana: "ã‘ã£ã“ã‚“ã‹ã‚“", meaning: ["ê²°í˜¼ê´€"] },
    { kanji: "æ¥å­¦æœŸ", kana: "ã‚‰ã„ãŒã£ã", meaning: ["ë‹¤ìŒ í•™ê¸°"] },
    { kanji: "å¹´ä»£é †", kana: "ã­ã‚“ã ã„ã˜ã‚…ã‚“", meaning: ["ì—°ëŒ€ìˆœ"] },
    { kanji: "é€²å­¦ç‡", kana: "ã—ã‚“ãŒãã‚Šã¤", meaning: ["ì§„í•™ë¥ "] },
    { kanji: "é«˜æ°´æº–", kana: "ã“ã†ã™ã„ã˜ã‚…ã‚“", meaning: ["ê³ ìˆ˜ì¤€"] },
    { kanji: "å‰¯å¤§è‡£", kana: "ãµãã ã„ã˜ã‚“", meaning: ["ë¶€ëŒ€ì‹ "] },
    { kanji: "ç®¡ç†ä¸‹", kana: "ã‹ã‚“ã‚Šã‹", meaning: ["ê´€ë¦¬í•˜"] },
    { kanji: "å­¦å¹´åˆ¥", kana: "ãŒãã­ã‚“ã¹ã¤", meaning: ["í•™ë…„ë³„"] },
    { kanji: "æ—¥æœ¬å¼", kana: "ã«ã»ã‚“ã—ã", meaning: ["ì¼ë³¸ì‹"] },
    { kanji: "ç„¡è¨ˆç”»", kana: "ã‚€ã‘ã„ã‹ã", meaning: ["ë¬´ê³„íš"] },
    { kanji: "å†é–‹ç™º", kana: "ã•ã„ã‹ã„ã¯ã¤", meaning: ["ì¬ê°œë°œ"] },
    { kanji: "é€ä¿¡å…ƒ", kana: "ãã†ã—ã‚“ã‚‚ã¨", meaning: ["ì†¡ì‹ ì›"] },

    // --- 14í˜ì´ì§€ ---
    { kanji: "åƒãæ‰‹", kana: "ã¯ãŸã‚‰ãã¦", meaning: ["ì¼ì†"] },
    { kanji: "ç¾åˆ¶åº¦", kana: "ã’ã‚“ã›ã„ã©", meaning: ["í˜„ì¬ ì œë„"] },
    { kanji: "ç”¨å¿ƒæ·±ã„", kana: "ã‚ˆã†ã˜ã‚“ã¶ã‹ã„", meaning: ["ì¡°ì‹¬ì„±ì´ ë§ë‹¤"] },
    { kanji: "åˆ¥ã‚Œéš›", kana: "ã‚ã‹ã‚Œãã‚", meaning: ["í—¤ì–´ì§ˆ ë•Œ"] },
    { kanji: "å‰ç”ºé•·", kana: "ãœã‚“ã¡ã‚‡ã†ã¡ã‚‡ã†", meaning: ["ì „ ìì¥"] },
    { kanji: "é ¼ã¿ã¥ã‚‰ã„", kana: "ãŸã®ã¿ã¥ã‚‰ã„", meaning: ["ë¶€íƒí•˜ê¸° ì–´ë µë‹¤"] },
    { kanji: "æ”¿æ²»è‰²", kana: "ã›ã„ã˜ã—ã‚‡ã", meaning: ["ì •ì¹˜ìƒ‰"] },
    { kanji: "éƒ½ä¼šè‚²ã¡", kana: "ã¨ã‹ã„ãã ã¡", meaning: ["ë„ì‹œì—ì„œ ìëŒ"] },
    { kanji: "ä¸€ä»•äº‹", kana: "ã²ã¨ã—ã”ã¨", meaning: ["í•œ ê°€ì§€ ì¼"] },
    { kanji: "åˆ¥ä¼šå ´", kana: "ã¹ã¤ã‹ã„ã˜ã‚‡ã†", meaning: ["ë‹¤ë¥¸ íšŒì¥"] },
    { kanji: "ç¾ç¤¾é•·", kana: "ã’ã‚“ã—ã‚ƒã¡ã‚‡ã†", meaning: ["í˜„ì¬ ì‚¬ì¥"] },
    { kanji: "åŒæ„è¦‹", kana: "ã©ã†ã„ã‘ã‚“", meaning: ["ê°™ì€ ì˜ê²¬"] },
    { kanji: "é£Ÿã¹é ƒ", kana: "ãŸã¹ã”ã‚", meaning: ["ì œì² "] },
    { kanji: "ä»®ç™»éŒ²", kana: "ã‹ã‚Šã¨ã†ã‚ã", meaning: ["ì„ì‹œ ë“±ë¡"] },
    { kanji: "ç•°åˆ†é‡", kana: "ã„ã¶ã‚“ã‚„", meaning: ["ë‹¤ë¥¸ ë¶„ì•¼"] },
    { kanji: "å†™çœŸä»˜ã", kana: "ã—ã‚ƒã—ã‚“ã¤ã", meaning: ["ì‚¬ì§„ ì²¨ë¶€"] },
    { kanji: "ç„¡å›ç­”", kana: "ã‚€ã‹ã„ã¨ã†", meaning: ["ë¬´íšŒë‹µ"] },
    { kanji: "æ—¥æœ¬é¢¨", kana: "ã«ã»ã‚“ãµã†", meaning: ["ì¼ë³¸í’"] },
    { kanji: "å£éš›", kana: "ã‹ã¹ãã‚", meaning: ["ë²½ê°€"] },
    { kanji: "å¯¾æŠ—å¿ƒ", kana: "ãŸã„ã“ã†ã—ã‚“", meaning: ["ëŒ€í•­ì‹¬"] },
    { kanji: "è«¸æ‰‹ç¶šã", kana: "ã—ã‚‡ã¦ã¤ã¥ã", meaning: ["ì—¬ëŸ¬ ìˆ˜ì†"] },
    { kanji: "äºŒäººé€£ã‚Œ", kana: "ãµãŸã‚Šã¥ã‚Œ", meaning: ["ë‘ì‚¬ëŒ ì¼í–‰"] },
    { kanji: "ä¸»åŸæ–™", kana: "ã—ã‚…ã’ã‚“ã‚Šã‚‡ã†", meaning: ["ì£¼ì›ë£Œ"] },
    { kanji: "èª­æ›¸é›¢ã‚Œ", kana: "ã©ãã—ã‚‡ã°ãªã‚Œ", meaning: ["ë…ì„œ ê¸°í”¼"] },
    { kanji: "æ±ºå®šæ¨©", kana: "ã‘ã£ã¦ã„ã‘ã‚“", meaning: ["ê²°ì •ê¶Œ"] },
    { kanji: "åé¸æ‰‹", kana: "ã‚ã„ã›ã‚“ã—ã‚…", meaning: ["ëª…ì„ ìˆ˜"] },
    { kanji: "æœ€æ¥è¿‘", kana: "ã•ã„ã›ã£ãã‚“", meaning: ["ìµœì ‘ê·¼"] },
    { kanji: "ç§å®›ã¦", kana: "ã‚ãŸã—ã‚ã¦", meaning: ["ë‚´ì•"] }
];

        let currentIndex = 0;
        let score = 0;
        let currentStep = 'meaning'; // 'meaning' (ëœ») or 'reading' (ë°œìŒ)
        let quizList = [];           // í˜„ì¬ ì§„í–‰ ì¤‘ì¸ í€´ì¦ˆ ë¦¬ìŠ¤íŠ¸
        let incorrectList = [];      // í‹€ë¦° ë‹¨ì–´ ì €ì¥ ë¦¬ìŠ¤íŠ¸
        let isReviewMode = false;    // ë³µìŠµ ëª¨ë“œ ì—¬ë¶€
        let isProcessing = false;    // ì •ë‹µ ì²˜ë¦¬ ì¤‘ ì¤‘ë³µ ì…ë ¥ ë°©ì§€

        // DOM ìš”ì†Œ
        const elements = {
            questionWord: document.getElementById('question-word'),
            inputLabel: document.getElementById('input-label'),
            userInput: document.getElementById('user-input'),
            statusMsg: document.getElementById('status-msg'),
            feedback: document.getElementById('feedback'),
            progressBar: document.getElementById('progress-bar'),
            currentIndex: document.getElementById('current-index'),
            totalCount: document.getElementById('total-count'),
            quizContainer: document.getElementById('quiz-container'),
            resultContainer: document.getElementById('result-container'),
            finalScore: document.getElementById('final-score'),
            reviewSection: document.getElementById('review-section'),
            wrongCount: document.getElementById('wrong-count'),
            headerBg: document.getElementById('header-bg'),
            headerTitle: document.getElementById('header-title'),
            headerDesc: document.getElementById('header-desc'),
            submitBtn: document.getElementById('submit-btn')
        };

        // ë°°ì—´ ì„ê¸° (Fisher-Yates)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // ì´ˆê¸°í™” ë° ì „ì²´ ì‹œì‘
        function initQuiz() {
            quizList = shuffleArray([...vocabularyData]);
            incorrectList = [];
            isReviewMode = false;
            score = 0;
            currentIndex = 0;
            
            updateHeaderUI();
            startCycle();
        }

        // ë³µìŠµ ëª¨ë“œ ì‹œì‘
        function startReview() {
            quizList = shuffleArray([...incorrectList]);
            incorrectList = []; // ë³µìŠµ ì¤‘ ë˜ í‹€ë¦° ê²ƒë§Œ ë‚¨ê¸°ê¸° ìœ„í•´ ì´ˆê¸°í™” (ì„ íƒ ì‚¬í•­, ì—¬ê¸°ì„  ì¬ë„ì „ìœ¼ë¡œ ê°„ì£¼)
            // ë§Œì•½ ë³µìŠµ ë•Œ ë§ì¶”ë©´ ë¦¬ìŠ¤íŠ¸ì—ì„œ ë¹ ì§€ê²Œ í•˜ë ¤ë©´ ìœ„ë¥¼ ìœ ì§€, 
            // ë³µìŠµ ë•Œë„ í‹€ë¦¬ë©´ ë‹¤ìŒ ë³µìŠµì— ë‚¨ê¸°ë ¤ë©´ ë¡œì§ í•„ìš”.
            // ì—¬ê¸°ì„œëŠ” 'ì´ë²ˆ ë³µìŠµ ë¼ìš´ë“œ'ë¥¼ ìœ„í•œ ì´ˆê¸°í™”.
            
            isReviewMode = true;
            score = 0;
            currentIndex = 0;
            
            // UI ë³€ê²½
            elements.resultContainer.classList.add('hidden');
            elements.quizContainer.classList.remove('hidden');
            
            updateHeaderUI();
            startCycle();
        }

        function updateHeaderUI() {
            if (isReviewMode) {
                elements.headerBg.className = "bg-orange-500 p-4 text-white text-center transition-colors duration-500";
                elements.headerTitle.innerText = "ì˜¤ë‹µ ë³µìŠµ ëª¨ë“œ";
                elements.headerDesc.innerText = "í‹€ë¦° ë‹¨ì–´ë¥¼ í™•ì‹¤í•˜ê²Œ ì™¸ì›Œë´…ì‹œë‹¤!";
            } else {
                elements.headerBg.className = "bg-emerald-600 p-4 text-white text-center transition-colors duration-500";
                elements.headerTitle.innerText = "JLPT N2 ë‹¨ì–´ì¥";
                elements.headerDesc.innerText = "ìˆœì„œëŠ” ëœë¤, ì˜¤ë‹µ ì‹œ ì •ë‹µ ê³µê°œ";
            }
        }

        function startCycle() {
            elements.totalCount.innerText = quizList.length;
            loadQuestion();

            // ì—”í„°í‚¤ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ (ì¤‘ë³µ ë°©ì§€)
            elements.userInput.onkeypress = function(event) {
                if (event.key === "Enter" && !isProcessing) {
                    checkAnswer();
                }
            };
        }

        function loadQuestion() {
            const currentData = quizList[currentIndex];
            elements.currentIndex.innerText = currentIndex + 1;
            
            // í”„ë¡œê·¸ë˜ìŠ¤ ë°”
            const progress = (currentIndex / quizList.length) * 100;
            elements.progressBar.style.width = `${progress}%`;

            // ë¬¸ì œ ì„¸íŒ…
            elements.questionWord.innerText = currentData.kanji;
            elements.userInput.value = '';
            elements.userInput.disabled = false;
            elements.userInput.focus();
            elements.feedback.innerText = '';
            
            // 1ë‹¨ê³„: ëœ» ë§ì¶”ê¸°
            currentStep = 'meaning';
            elements.inputLabel.innerText = "Step 1. ëœ»ì„ ì…ë ¥í•˜ì„¸ìš” (í•œêµ­ì–´)";
            elements.statusMsg.innerText = "";
            elements.userInput.placeholder = "ëœ» ì…ë ¥";
            
            isProcessing = false;
        }

        function checkAnswer() {
            if (isProcessing) return;
            
            const currentData = quizList[currentIndex];
            const userVal = elements.userInput.value.trim();

            if (!userVal) return;

            isProcessing = true; // ì²˜ë¦¬ ì¤‘ í”Œë˜ê·¸ ì„¤ì •

            if (currentStep === 'meaning') {
                // ëœ» í™•ì¸
                const isCorrect = currentData.meaning.some(m => userVal.includes(m) || m.includes(userVal));
                
                if (isCorrect) {
                    // ì •ë‹µ
                    elements.feedback.className = "h-10 text-sm font-bold text-blue-600 flex items-center justify-center";
                    elements.feedback.innerText = "ì •ë‹µ! â­• ë°œìŒ í€´ì¦ˆë¡œ ë„˜ì–´ê°‘ë‹ˆë‹¤.";
                    
                    setTimeout(() => {
                        proceedToReading(currentData);
                    }, 800);
                } else {
                    // ì˜¤ë‹µ
                    addIncorrectWord(currentData);
                    elements.feedback.className = "h-10 text-sm font-bold text-red-500 flex items-center justify-center";
                    elements.feedback.innerText = `ì˜¤ë‹µ! âŒ ì •ë‹µì€ [${currentData.meaning.join(', ')}] ì…ë‹ˆë‹¤.`;
                    
                    // ì˜¤ë‹µ í™•ì¸ ì‹œê°„ (2ì´ˆ)
                    setTimeout(() => {
                        proceedToReading(currentData);
                    }, 2000);
                }

            } else if (currentStep === 'reading') {
                // ë°œìŒ í™•ì¸
                if (userVal === currentData.kana) {
                    // ì •ë‹µ
                    score++;
                    elements.feedback.className = "h-10 text-sm font-bold text-emerald-600 flex items-center justify-center";
                    elements.feedback.innerText = "ì™„ë²½í•©ë‹ˆë‹¤! â­• ë‹¤ìŒ ë¬¸ì œë¡œ...";
                    
                    setTimeout(() => {
                        nextQuestion();
                    }, 1000);
                } else {
                    // ì˜¤ë‹µ
                    addIncorrectWord(currentData);
                    elements.feedback.className = "h-10 text-sm font-bold text-red-500 flex items-center justify-center";
                    elements.feedback.innerText = `ì˜¤ë‹µ! âŒ ì •ë‹µì€ [${currentData.kana}] ì…ë‹ˆë‹¤.`;
                    
                    setTimeout(() => {
                        nextQuestion();
                    }, 2000);
                }
            }
        }

        // ëœ» ë‹¨ê³„ -> ë°œìŒ ë‹¨ê³„ ì „í™˜
        function proceedToReading(data) {
            currentStep = 'reading';
            elements.inputLabel.innerText = `Step 2. '${data.kanji}'ì˜ ë°œìŒì„ ì…ë ¥í•˜ì„¸ìš” (íˆë¼ê°€ë‚˜)`;
            
            // ëœ» íŒíŠ¸ ë³´ì—¬ì£¼ê¸°
            elements.statusMsg.innerText = `ëœ»: ${data.meaning.join(', ')}`;
            
            elements.userInput.value = '';
            elements.userInput.placeholder = "íˆë¼ê°€ë‚˜ ì…ë ¥";
            elements.feedback.innerText = '';
            elements.userInput.focus();
            isProcessing = false;
        }

        // ì˜¤ë‹µ ë¦¬ìŠ¤íŠ¸ ì¶”ê°€ (ì¤‘ë³µ ë°©ì§€)
        function addIncorrectWord(wordObj) {
            if (!incorrectList.includes(wordObj)) {
                incorrectList.push(wordObj);
            }
        }

        function nextQuestion() {
            currentIndex++;
            if (currentIndex < quizList.length) {
                loadQuestion();
            } else {
                showResult();
            }
        }

        function showResult() {
            elements.quizContainer.classList.add('hidden');
            elements.resultContainer.classList.remove('hidden');
            elements.finalScore.innerText = score + " / " + quizList.length;
            elements.progressBar.style.width = '100%';

            // ë³µìŠµ ì„¹ì…˜ ì²˜ë¦¬
            if (incorrectList.length > 0) {
                elements.reviewSection.classList.remove('hidden');
                elements.wrongCount.innerText = incorrectList.length;
            } else {
                elements.reviewSection.classList.add('hidden');
                // ë§Œì•½ ë³µìŠµ ëª¨ë“œì—ì„œ ë‹¤ ë§ì·„ë‹¤ë©´ ì¶•í•˜ ë©”ì‹œì§€ ê°•í™” ê°€ëŠ¥
                if(isReviewMode) {
                    elements.finalScore.innerText += " (ë³µìŠµ ì™„ë£Œ!)";
                }
            }
        }

        // ìµœì´ˆ ì‹¤í–‰
        initQuiz();
    </script>
</body>
</html>
