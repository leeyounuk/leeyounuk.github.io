<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¬¸ë§¥ ë¹ˆì¹¸ ì±„ìš°ê¸° (ë³µìŠµê°€ëŠ¥)</title>
    <style>
        body { font-family: 'Helvetica Neue', Arial, sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; background-color: #fff8e1; }
        .quiz-container { background: white; padding: 2rem; border-radius: 16px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); max-width: 650px; width: 90%; text-align: center; }
        h1 { color: #e67e22; font-size: 1.5rem; margin-bottom: 1rem; }
        .info-bar { display: flex; justify-content: space-between; font-size: 0.9rem; color: #666; margin-bottom: 1rem; font-weight: bold; }

        .question-box { background: #fff3e0; padding: 1.5rem; border-radius: 12px; margin-bottom: 1.5rem; min-height: 100px; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        .question-label { font-size: 0.85rem; color: #d35400; margin-bottom: 0.5rem; font-weight: bold; }
        .question-text { font-size: 1.15rem; line-height: 1.6; color: #2d3436; word-break: keep-all; }
        
        .blank { color: #e67e22; border-bottom: 2px solid #e67e22; font-weight: bold; padding: 0 5px; }

        input[type="text"] { width: 100%; padding: 12px; font-size: 1.1rem; border: 2px solid #fce8b2; border-radius: 8px; margin-bottom: 1rem; outline: none; text-align: center; box-sizing: border-box; }
        input[type="text"]:focus { border-color: #e67e22; }

        .btn { width: 100%; padding: 12px; font-size: 1rem; border: none; border-radius: 8px; cursor: pointer; transition: 0.2s; font-weight: bold; margin-top: 5px; }
        .btn-check { background: #e67e22; color: white; }
        .btn-check:hover { background: #d35400; }
        .btn-next { background: #27ae60; color: white; display: none; }
        .btn-review { background: #c0392b; color: white; display: none; }
        
        .feedback { margin: 10px 0; font-size: 1rem; min-height: 1.5rem; }
        .correct { color: #27ae60; font-weight: bold; }
        .wrong { color: #c0392b; font-weight: bold; }

        .review-alert { background: #fadbd8; color: #721c24; padding: 10px; border-radius: 8px; margin-bottom: 15px; display: none; font-size: 0.9rem; }
    </style>
</head>
<body>

<div class="quiz-container">
    <h1>ë¬¸ë§¥ ë¹ˆì¹¸ í€´ì¦ˆ</h1>
    
    <div class="review-alert" id="reviewAlert">ğŸš¨ ì˜¤ë‹µ ë³µìŠµ ì¤‘ì…ë‹ˆë‹¤!</div>

    <div class="info-bar">
        <span id="progress">ë¬¸ì œ 1 / 18</span>
        <span id="score"></span>
    </div>

    <div class="question-box">
        <div class="question-label">ë¹ˆì¹¸ì— ì•Œë§ì€ ì˜¤ë…¸ë§ˆí† í˜ë¥¼ ì“°ì„¸ìš”</div>
        <div class="question-text" id="question">ë¬¸ì œ ë¡œë”© ì¤‘...</div>
    </div>

    <input type="text" id="answerInput" placeholder="ì •ë‹µ ì…ë ¥" autocomplete="off">
    
    <button class="btn btn-check" id="checkBtn" onclick="checkAnswer()">ì •ë‹µ í™•ì¸</button>
    <div class="feedback" id="feedback"></div>
    <button class="btn btn-next" id="nextBtn" onclick="nextQuestion()">ë‹¤ìŒ ë¬¸ì œ â¡</button>
    <button class="btn btn-review" id="reviewBtn" onclick="startReview()">â†º í‹€ë¦° ë¬¸ì œ ë³µìŠµí•˜ê¸°</button>
    <button class="btn btn-check" id="restartBtn" onclick="initQuiz()" style="display:none; background:#7f8c8d;">ì²˜ìŒë¶€í„° ë‹¤ì‹œ í•˜ê¸°</button>
</div>

<script>
    const sentenceData = [
        { q: "å¤•ã¹é£²ã¿ã™ããŸã›ã„ã§ã€ä»Šæ—¥ã¯äºŒæ—¥é…”ã„ãŒã²ã©ãã¦èƒ¸ãŒï¼ˆ ____ ï¼‰ã—ã¾ã™ã€‚", a: "ã‚€ã‹ã‚€ã‹" },
        { q: "è–„ç€ã®ã¾ã¾å¤–ã«å‡ºãŸã‚‰ã€é¢¨ãŒå†·ãŸãã¦ã€ï¼ˆ ____ ï¼‰éœ‡ãˆã¾ã—ãŸã€‚", a: "ã¶ã‚‹ã¶ã‚‹" },
        { q: "æœ€è¿‘ã€ã‚¹ãƒˆãƒ¬ã‚¹ãŒãŸã¾ã£ã¦ã„ã¦ã€èƒƒãŒï¼ˆ ____ ï¼‰ã¨ç—›ã¿ã¾ã™ã€‚", a: "ãã‚Šãã‚Š" },
        { q: "é¢¨é‚ªãŒæ‚ªåŒ–ã—ãŸã‚ˆã†ã§ã€ï¼ˆ ____ ï¼‰ã¨å¯’æ°—ã‚‚ã—ã¾ã™ã€‚", a: "ãããã" },
        { q: "ä¸€æ—¥ä¸­ã€æµ·è¾ºã§å¯ã¦ãŸã‚‰ã€èƒŒä¸­ãŒæ—¥ç„¼ã‘ã—ã¦ï¼ˆ ____ ï¼‰ã—ã¾ã™ã€‚", a: "ã²ã‚Šã²ã‚Š" },
        { q: "å­ã©ã‚‚ãŒé¢¨é‚ªã‚’å¼•ã„ãŸã®ã‹ã€ä»Šæœã‹ã‚‰ï¼ˆ ____ ï¼‰ã¨å°‘ã—ã›ãã‚’ã—ã¦ã„ã¾ã™ã€‚", a: "ã“ã‚“ã“ã‚“" },
        { q: "å½¼ã¯è©¦é¨“ã®çµæœãŒæ°—ã«ãªã‚‹ã‚ˆã†ã§ã€æœã‹ã‚‰ï¼ˆ ____ ï¼‰ã—ã¦ã„ã¾ã™ã€‚", a: "ãã‚ãã‚" },
        { q: "è¨€ã„ãŸã„ã“ã¨ã‚’ä¸Šæ‰‹ãä¼ãˆã‚‰ã‚Œãšã€ï¼ˆ ____ ï¼‰ã—ã¦ã„ã¾ã™ã€‚", a: "ã‚‚ã‚„ã‚‚ã‚„" },
        { q: "é›ªé“ã§è»ŠãŒã‚¹ãƒªãƒƒãƒ—ã—ãŸã¨ãã¯ï¼ˆ ____ ï¼‰ã¨ã—ã¾ã—ãŸã€‚", a: "ã²ã‚„ã‚Š" },
        { q: "ç· åˆ‡ã®ï¼•åˆ†å‰ã€ã¾ã èª²é¡Œã‚’å‡ºã—ã¦ã„ãªã„ã“ã¨ã«ã€ï¼ˆ ____ ï¼‰æ°—ã¥ã„ãŸã€‚", a: "ã¯ã£ã¨" },
        { q: "æ˜¨æ—¥ã®é‡çƒã®è©¦åˆè¦‹ãŸï¼Ÿï¼™å›ã®è£ã€ï¼’ã‚¢ã‚¦ãƒˆæº€å¡ã®å ´é¢ã¯ï¼ˆ ____ ï¼‰ã—ãŸã­ã€‚", a: "ã¯ã‚‰ã¯ã‚‰" },
        { q: "é›¨ã§æ—…è¡ŒãŒä¸­æ­¢ã«ãªã£ã¦ã€ã¿ã‚“ãªï¼ˆ ____ ï¼‰ã—ã¦ã„ã‚‹ã€‚", a: "ãŒã£ã‹ã‚Š" },
        { q: "ã‚¢ãƒ‘ãƒ¼ãƒˆã®ä¸Šã®éšã§èª°ã‹ãŒï¼ˆ ____ ï¼‰èµ°ã‚Šå›ã£ã¦ã„ã¦ã€ã†ã‚‹ã•ã„ã§ã™ã€‚", a: "ã©ãŸã©ãŸ" },
        { q: "å½¼ã¯é›ªé“ã§è¶³ã‚’ã™ã¹ã‚‰ã›ã¦ã€ï¼ˆ ____ ï¼‰ã¨è»¢ã³ã¾ã—ãŸã€‚", a: "ã™ã¦ã‚“" },
        { q: "æ€¥ã„ã§ã„ãŸã®ã‹ã€å½¼ã¯ç§ã«æ°—ã¥ã‹ãšã«ã€ï¼ˆ ____ ï¼‰ã¨é€šã‚Šéãã¾ã—ãŸã€‚", a: "ã™ãŸã™ãŸ" },
        { q: "ã‚µãƒƒã‚«ãƒ¼ã®è©¦åˆä¸­ã€ä¸€äººã®é¸æ‰‹ãŒç†±ä¸­ç—‡ã§ï¼ˆ ____ ï¼‰å€’ã‚ŒãŸã€‚", a: "ã°ãŸã£" },
        { q: "ã“ã®åº—ã®åº—å“¡ã•ã‚“ã¯ã„ã¤ã‚‚ï¼ˆ ____ ï¼‰åƒã„ã¦ã„ã¦ã€è¦‹ã¦ã„ã¦æ°—æŒã¡ãŒã„ã„ã€‚", a: "ãã³ãã³" },
        { q: "ã“ã®æ™‚é–“ã¯é€šå‹¤ãƒ©ãƒƒã‚·ãƒ¥ã§ã€è»ŠãŒï¼ˆ ____ ï¼‰ã¨é€²ã‚“ã§ã„ã¾ã™ã€‚", a: "ã®ã‚ã®ã‚" }
    ];

    let quizList = [];
    let wrongAnswers = [];
    let currentIndex = 0;

    function shuffle(array) {
        return array.sort(() => Math.random() - 0.5);
    }

    function initQuiz() {
        quizList = shuffle([...sentenceData]);
        wrongAnswers = [];
        currentIndex = 0;
        resetUI();
        document.getElementById('reviewAlert').style.display = 'none';
        loadQuestion();
    }

    function loadQuestion() {
        const item = quizList[currentIndex];
        // ë¹ˆì¹¸ í‘œì‹œ
        const displayText = item.q.replace("____", "<span class='blank'>( ? )</span>");
        
        document.getElementById('question').innerHTML = displayText;
        document.getElementById('progress').innerText = `ë¬¸ì œ ${currentIndex + 1} / ${quizList.length}`;
        
        const input = document.getElementById('answerInput');
        input.value = '';
        input.disabled = false;
        input.focus();
    }

    function checkAnswer() {
        const input = document.getElementById('answerInput');
        const userVal = input.value.trim();
        if(!userVal) return;

        const correctVal = quizList[currentIndex].a;
        const feedback = document.getElementById('feedback');
        
        input.disabled = true;
        document.getElementById('checkBtn').style.display = 'none';

        if(userVal === correctVal) {
            feedback.innerHTML = "<span class='correct'>âœ… ì •ë‹µ!</span>";
            // ì •ë‹µì„ ë¬¸ì¥ì— ì±„ì›Œì£¼ê¸°
            document.getElementById('question').innerHTML = quizList[currentIndex].q.replace("____", `<span class='correct' style='border:none'>${correctVal}</span>`);
        } else {
            feedback.innerHTML = `<span class='wrong'>âŒ ì˜¤ë‹µ!</span> ì •ë‹µ: <strong>${correctVal}</strong>`;
            // ì˜¤ë‹µì´ì–´ë„ ì •ë‹µì„ ì±„ì›Œì£¼ê¸° (í™•ì¸ìš©)
            document.getElementById('question').innerHTML = quizList[currentIndex].q.replace("____", `<span class='wrong' style='border:none; text-decoration:line-through'>${userVal}</span> â†’ <span class='correct'>${correctVal}</span>`);
            
            if (!wrongAnswers.includes(quizList[currentIndex])) {
                wrongAnswers.push(quizList[currentIndex]);
            }
        }

        document.getElementById('nextBtn').style.display = 'inline-block';
        document.getElementById('nextBtn').focus();
    }

    function nextQuestion() {
        currentIndex++;
        document.getElementById('feedback').innerText = '';
        document.getElementById('checkBtn').style.display = 'inline-block';
        document.getElementById('nextBtn').style.display = 'none';

        if(currentIndex < quizList.length) {
            loadQuestion();
        } else {
            finishGame();
        }
    }

    function finishGame() {
        document.getElementById('question').innerHTML = "í•™ìŠµì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!";
        document.getElementById('answerInput').style.display = 'none';
        document.getElementById('checkBtn').style.display = 'none';
        
        const feedback = document.getElementById('feedback');
        
        if(wrongAnswers.length > 0) {
            feedback.innerHTML = `ì´ <strong>${wrongAnswers.length}</strong>ê°œì˜ ì˜¤ë‹µì´ ìˆìŠµë‹ˆë‹¤.`;
            document.getElementById('reviewBtn').style.display = 'inline-block';
        } else {
            feedback.innerHTML = `ğŸ‰ ì™„ë²½í•©ë‹ˆë‹¤! ëª¨ë“  ë¬¸ì œë¥¼ ë§íˆì…¨ìŠµë‹ˆë‹¤.`;
            document.getElementById('restartBtn').style.display = 'inline-block';
        }
    }

    function startReview() {
        quizList = shuffle([...wrongAnswers]);
        wrongAnswers = [];
        currentIndex = 0;
        resetUI();
        document.getElementById('reviewAlert').style.display = 'block';
        loadQuestion();
    }

    function resetUI() {
        document.getElementById('answerInput').style.display = 'inline-block';
        document.getElementById('checkBtn').style.display = 'inline-block';
        document.getElementById('reviewBtn').style.display = 'none';
        document.getElementById('restartBtn').style.display = 'none';
        document.getElementById('feedback').innerText = '';
    }

    document.getElementById('answerInput').addEventListener("keypress", function(e) {
        if (e.key === "Enter") {
            e.preventDefault();
            document.getElementById('checkBtn').click();
        }
    });

    initQuiz();
</script>
</body>
</html>
