<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¼ë‹¨í•©ê²© JLPT N2 ë‹¨ì–´ì¥ (ë³µìŠµ ëª¨ë“œ í¬í•¨)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&family=Noto+Sans+JP:wght@400;700&display=swap');
        body { font-family: 'Noto Sans KR', 'Noto Sans JP', sans-serif; }
        .fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">

    <div class="bg-white rounded-xl shadow-lg w-full max-w-md overflow-hidden">
        <div id="header-bg" class="bg-emerald-600 p-4 text-white text-center transition-colors duration-500">
            <h1 id="header-title" class="text-xl font-bold">JLPT N2 ë‹¨ì–´ì¥</h1>
            <p id="header-desc" class="text-sm opacity-80">ìˆœì„œëŠ” ëœë¤, ì˜¤ë‹µ ì‹œ ì •ë‹µ ê³µê°œ</p>
        </div>

        <div class="bg-gray-200 h-2 w-full">
            <div id="progress-bar" class="bg-emerald-400 h-2 transition-all duration-300" style="width: 0%"></div>
        </div>

        <div id="quiz-container" class="p-8 text-center fade-in">
            <div class="mb-6">
                <span class="text-sm text-gray-500 mb-1 block">ë¬¸ì œ <span id="current-index">1</span> / <span id="total-count">10</span></span>
                <h2 id="question-word" class="text-5xl font-bold text-gray-800 mb-2"></h2>
                <p id="status-msg" class="text-gray-500 font-medium h-8 text-sm"></p>
            </div>

            <div class="space-y-4">
                <div class="relative">
                    <label id="input-label" class="block text-left text-sm font-bold text-gray-700 mb-1">ëœ»ì„ ì…ë ¥í•˜ì„¸ìš” (í•œêµ­ì–´)</label>
                    <input type="text" id="user-input" 
                        class="w-full px-4 py-3 rounded-lg border-2 border-gray-300 focus:border-emerald-500 focus:outline-none transition-colors text-lg text-center"
                        placeholder="ì •ë‹µ ì…ë ¥" autocomplete="off">
                </div>

                <button id="submit-btn" onclick="checkAnswer()" 
                    class="w-full bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-3 rounded-lg transition-transform active:scale-95 shadow-md">
                    í™•ì¸
                </button>
                
                <div id="feedback" class="h-10 text-sm font-bold flex items-center justify-center whitespace-pre-line"></div>
            </div>
        </div>

        <div id="result-container" class="hidden p-8 text-center fade-in">
            <h2 class="text-3xl font-bold text-gray-800 mb-2">í€´ì¦ˆ ì™„ë£Œ! ğŸ‰</h2>
            <p class="text-lg mb-6 text-gray-600">
                ì´ <span id="final-score" class="font-bold text-emerald-600 text-2xl"></span>ì ì„ íšë“í–ˆìŠµë‹ˆë‹¤.
            </p>
            
            <div id="review-section" class="hidden mb-6 bg-red-50 p-4 rounded-lg border border-red-200">
                <p class="text-red-600 font-bold mb-2">í‹€ë¦° ë‹¨ì–´ê°€ <span id="wrong-count">0</span>ê°œ ìˆìŠµë‹ˆë‹¤.</p>
                <button onclick="startReview()" class="w-full bg-red-500 hover:bg-red-600 text-white font-bold py-2 rounded-lg shadow transition-colors">
                    í‹€ë¦° ë‹¨ì–´ë§Œ ë³µìŠµí•˜ê¸° ğŸ”„
                </button>
            </div>

            <button onclick="location.reload()" class="w-full bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 rounded-lg shadow transition-colors">
                ì²˜ìŒë¶€í„° ë‹¤ì‹œ í•˜ê¸° (ì „ì²´ ë¦¬ì…‹)
            </button>
        </div>
    </div>

    <script>
        // ì›ë³¸ ë°ì´í„°
const vocabularyData= [
// ì´ ë¸”ë¡ì€ ê¸°ì¡´ ë°°ì—´ì— 'ì¶”ê°€'í•  ë‚´ìš©ì…ë‹ˆë‹¤.
// --- 16í˜ì´ì§€ (Kanji/Vocabulary) ---
{ kanji: "æˆé•·", kana: "ã›ã„ã¡ã‚‡ã†", meaning: ["ì„±ì¥"] },
{ kanji: "å°å…¥", kana: "ã©ã†ã«ã‚…ã†", meaning: ["ë„ì…"] },
{ kanji: "è¨‚æ­£", kana: "ã¦ã„ã›ã„", meaning: ["ì •ì •"] },
{ kanji: "é©åº¦ãª", kana: "ã¦ãã©ãª", meaning: ["ì ë‹¹í•œ", "ì•Œë§ì€"] },
{ kanji: "å‘¼ã³æ­¢ã‚ã‚‹", kana: "ã‚ˆã³ã¨ã‚ã‚‹", meaning: ["ë¶ˆëŸ¬ ì„¸ìš°ë‹¤"] },
{ kanji: "ä¸­ç¶™", kana: "ã¡ã‚…ã†ã‘ã„", meaning: ["ì¤‘ê³„"] },
{ kanji: "ç›®æŒ‡ã™", kana: "ã‚ã–ã™", meaning: ["ì§€í–¥í•˜ë‹¤", "ëª©í‘œë¡œ í•˜ë‹¤"] },
{ kanji: "è§£æ•£", kana: "ã‹ã„ã•ã‚“", meaning: ["í•´ì‚°"] },
{ kanji: "è´…æ²¢ãª", kana: "ãœã„ãŸããª", meaning: ["ì‚¬ì¹˜ìŠ¤ëŸ¬ìš´"] },
{ kanji: "è¦‹å½“ãŒã¤ã", kana: "ã‘ã‚“ã¨ã†ãŒã¤ã", meaning: ["ì§ì‘ì´ ê°€ë‹¤"] },
{ kanji: "ä¸€æ°—ã«", kana: "ã„ã£ãã«", meaning: ["ë‹¨ìˆ¨ì—", "ë‹¨ë²ˆì—"] },
{ kanji: "è“„ãˆã‚‹", kana: "ãŸãã‚ãˆã‚‹", meaning: ["ì €ì¶•í•˜ë‹¤", "ë¹„ì¶•í•˜ë‹¤"] },
{ kanji: "ä½“æ ¼", kana: "ãŸã„ã‹ã", meaning: ["ì²´ê²©"] },
{ kanji: "æ„æ¬²", kana: "ã„ã‚ˆã", meaning: ["ì˜ìš•"] },
{ kanji: "æ¯”ä¾‹", kana: "ã²ã‚Œã„", meaning: ["ë¹„ë¡€"] },
{ kanji: "å·®ã—æ”¯ãˆã‚‹", kana: "ã•ã—ã¤ã‹ãˆã‚‹", meaning: ["ì§€ì¥ì´ ìˆë‹¤"] },
{ kanji: "å°‚å¿µ", kana: "ã›ã‚“ã­ã‚“", meaning: ["ì „ë…"] },
{ kanji: "æ ¼å¥½", kana: "ã‹ã£ã“ã†", meaning: ["ëª¨ìŠµ", "ëª¨ì–‘"] },   
{ kanji: "ç‰¹è‰²", kana: "ã¨ãã—ã‚‡ã", meaning: ["íŠ¹ìƒ‰"] },
{ kanji: "äºˆæ¸¬", kana: "ã‚ˆãã", meaning: ["ì˜ˆì¸¡"] },
{ kanji: "æ¿ã‚‹", kana: "ã«ã”ã‚‹", meaning: ["íë ¤ì§€ë‹¤", "íƒí•´ì§€ë‹¤"] },
 { kanji: "è…¹ã‚’ç«‹ã¦ã‚‹", kana: "ã¯ã‚‰ã‚’ãŸã¦ã‚‹", meaning: ["í™”ë¥¼ ë‚´ë‹¤"] },
    { kanji: "æ€ã„ãã£ã¦", kana: "ãŠã‚‚ã„ãã£ã¦", meaning: ["ê³¼ê°í•˜ê²Œ"] },
    { kanji: "è¼ã‹ã—ã„", kana: "ã‹ãŒã‚„ã‹ã—ã„", meaning: ["ë¹›ë‚˜ë‹¤", "ëˆˆë¶€ì‹œë‹¤"] },
    { kanji: "å®Œäº†", kana: "ã‹ã‚“ã‚Šã‚‡ã†", meaning: ["ì™„ë£Œ"] },
    { kanji: "é¢ã™ã‚‹", kana: "ã‚ã‚“ã™ã‚‹", meaning: ["ë©´í•˜ë‹¤", "ë§ˆì£¼ ëŒ€í•˜ë‹¤"] },

    // --- 17í˜ì´ì§€ (Vocabulary/Adverb/Contextual) ---
    { kanji: "é ¼ã‚‚ã—ã„", kana: "ãŸã®ã‚‚ã—ã„", meaning: ["ë¯¿ìŒì§í•˜ë‹¤"] },
    { kanji: "é‹­ã„", kana: "ã™ã‚‹ã©ã„", meaning: ["ë‚ ì¹´ë¡­ë‹¤", "ì˜ˆë¦¬í•˜ë‹¤"] },
    { kanji: "å‰²ã‚Šè¾¼ã‚€", kana: "ã‚ã‚Šã“ã‚€", meaning: ["ë¼ì–´ë“¤ë‹¤"] },
    { kanji: "è±Šå¯Œãª", kana: "ã»ã†ãµãª", meaning: ["í’ë¶€í•œ"] },
    { kanji: "ç©ã‚„ã‹ãª", kana: "ãŠã ã‚„ã‹ãª", meaning: ["ì˜¨í™”í•œ"] },
    { kanji: "ç›¸é•", kana: "ãã†ã„", meaning: ["ë‹¤ë¦„", "í‹€ë¦¼"] },
    { kanji: "ç¢ºä¿", kana: "ã‹ãã»", meaning: ["í™•ë³´"] },
    { kanji: "æŸ”è»Ÿãª", kana: "ã˜ã‚…ã†ãªã‚“ãª", meaning: ["ìœ ì—°í•œ"] },
    { kanji: "æ™‚é–“ã‚’æ½°ã™", kana: "ã˜ã‹ã‚“ã‚’ã¤ã¶ã™", meaning: ["ì‹œê°„ì„ ë•Œìš°ë‹¤", "ì‹œê°„ì„ ë³´ë‚´ë‹¤"] },
    { kanji: "æ‚”ã‚„ã‚€", kana: "ãã‚„ã‚€", meaning: ["ë¶„í•˜ê²Œ ì—¬ê¸°ë‹¤", "í›„íšŒ"] },
    { kanji: "å®‰æ˜“ãª", kana: "ã‚ã‚“ã„ãª", meaning: ["ì•ˆì´í•œ"] },
    { kanji: "å¥‘æ©Ÿ", kana: "ã‘ã„ã", meaning: ["ê³„ê¸°"] },
    { kanji: "æä¾›", kana: "ã¦ã„ãã‚‡ã†", meaning: ["ì œê³µ"] },
    { kanji: "è‹¦æƒ…", kana: "ãã˜ã‚‡ã†", meaning: ["ë¶ˆí‰", "í´ë ˆì„"] },
    { kanji: "åç©«", kana: "ã—ã‚…ã†ã‹ã", meaning: ["ìˆ˜í™•"] },
    { kanji: "æ™®åŠ", kana: "ãµãã‚…ã†", meaning: ["ë³´ê¸‰"] },
    { kanji: "åæ‰€", kana: "ã‚ã„ã—ã‚‡", meaning: ["ëª…ì†Œ"] },
    { kanji: "æœ‰åˆ©ãª", kana: "ã‚†ã†ã‚Šãª", meaning: ["ìœ ë¦¬í•œ"] },
    { kanji: "æ‰“ã¡æ¶ˆã™", kana: "ã†ã¡ã‘ã™", meaning: ["ë¶€ì •í•˜ë‹¤"] },
    { kanji: "å¼•ãæ­¢ã‚ã‚‹", kana: "ã²ãã¨ã‚ã‚‹", meaning: ["ë§Œë¥˜í•˜ë‹¤", "ì œì§€í•˜ë‹¤"] },
    { kanji: "ç™ºæ®", kana: "ã¯ã£ã", meaning: ["ë°œíœ˜"] },
    { kanji: "æ´»ç™ºãª", kana: "ã‹ã£ã±ã¤ãª", meaning: ["í™œë°œí•œ"] },
    { kanji: "ç‹¬ç‰¹", kana: "ã©ãã¨ã", meaning: ["ë…íŠ¹"] },
    { kanji: "æ¬ ã‹ã™", kana: "ã‹ã‹ã™", meaning: ["ë¹ ëœ¨ë¦¬ë‹¤"] },

    // --- 18í˜ì´ì§€ (Kanji/Vocabulary/Adverb) ---
    { kanji: "é”ã™ã‚‹", kana: "ãŸã£ã™ã‚‹", meaning: ["ë„ë‹¬í•˜ë‹¤", "ì´ë¥´ë‹¤"] },
    { kanji: "è»¢å‹¤", kana: "ã¦ã‚“ãã‚“", meaning: ["ì „ê·¼"] },
    { kanji: "ç€ã€…ã¨", kana: "ã¡ã‚ƒãã¡ã‚ƒãã¨", meaning: ["ì°©ì°© ìˆœì¡°ë¡­ê²Œ"] },
    { kanji: "æ ½åŸ¹", kana: "ã•ã„ã°ã„", meaning: ["ì¬ë°°"] },
    { kanji: "ç‚¹æ¤œ", kana: "ã¦ã‚“ã‘ã‚“", meaning: ["ì ê²€"] },
    { kanji: "ç¶šå‡º", kana: "ããã—ã‚…ã¤", meaning: ["ì†ì¶œ"] },
    { kanji: "é£›ã³æ•£ã‚‹", kana: "ã¨ã³ã¡ã‚‹", meaning: ["ì‚¬ë°©ì— í©ë‚ ë¦¬ë‹¤"] },
    { kanji: "åœ°å…ƒ", kana: "ã˜ã‚‚ã¨", meaning: ["ê³ ì¥", "í˜„ì§€"] },
    { kanji: "è©•ä¾¡", kana: "ã²ã‚‡ã†ã‹", meaning: ["í‰ê°€"] },
    { kanji: "å°Šé‡", kana: "ãã‚“ã¡ã‚‡ã†", meaning: ["ì¡´ì¤‘"] },
    { kanji: "æ•æ„Ÿ", kana: "ã³ã‚“ã‹ã‚“", meaning: ["ë¯¼ê°"] },
    { kanji: "ä¸å®‰å®š", kana: "ãµã‚ã‚“ã¦ã„", meaning: ["ë¶ˆì•ˆì •"] },
    { kanji: "æ›–æ˜§ãª", kana: "ã‚ã„ã¾ã„ãª", meaning: ["ì• ë§¤í•œ"] },
    { kanji: "è¡°ãˆã‚‹", kana: "ãŠã¨ã‚ãˆã‚‹", meaning: ["ì‡ í‡´í•˜ë‹¤"] },
    { kanji: "ç‹¬ç‰¹", kana: "ã©ãã¨ã", meaning: ["ë…íŠ¹"] },
    { kanji: "äº‰ã†", kana: "ã‚ã‚‰ãã†", meaning: ["ë‹¤íˆ¬ë‹¤"] },
    { kanji: "æ°—é…", kana: "ã‘ã¯ã„", meaning: ["ê¸°ë¯¸", "ë¶„ìœ„ê¸°"] },
    { kanji: "ä¸Šæ˜‡", kana: "ã˜ã‚‡ã†ã—ã‚‡ã†", meaning: ["ìƒìŠ¹"] },
    { kanji: "æ²¹æ–­", kana: "ã‚†ã ã‚“", meaning: ["ë°©ì‹¬"] },
    { kanji: "åˆ†æ‹…", kana: "ã¶ã‚“ãŸã‚“", meaning: ["ë¶„ë‹´"] },
    { kanji: "æ°—è»½ã«", kana: "ããŒã‚‹ã«", meaning: ["ë¶€ë‹´ ì—†ì´"] },
    { kanji: "é¢å€’ãª", kana: "ã‚ã‚“ã©ã†ãª", meaning: ["ê·€ì°®ì€", "ì„±ê°€ì‹ "] },
    { kanji: "æœ¬ç‰©", kana: "ã»ã‚“ã‚‚ã®", meaning: ["ì§„ì§œ", "ì‹¤ë¬¼"] },
    { kanji: "æ·»ä»˜", kana: "ã¦ã‚“ã·", meaning: ["ì²¨ë¶€"] },

    // --- 19í˜ì´ì§€ (Kanji/Vocabulary/Adverb) ---
    { kanji: "é™ç•Œ", kana: "ã’ã‚“ã‹ã„", meaning: ["í•œê³„"] },
    { kanji: "ç¨€ãª", kana: "ã¾ã‚Œãª", meaning: ["ë“œë¬¸", "í¬ê·€í•œ"] },
    { kanji: "å›ºã‚ã‚‹", kana: "ã‹ãŸã‚ã‚‹", meaning: ["êµ³íˆë‹¤"] },
    { kanji: "è§£ç´„", kana: "ã‹ã„ã‚„ã", meaning: ["í•´ì•½"] },
    { kanji: "é–‹è¨­", kana: "ã‹ã„ã›ã¤", meaning: ["ê°œì„¤"] },
    { kanji: "æ ¼å¥½", kana: "ã‹ã£ã“ã†", meaning: ["ëª¨ìŠµ", "ë³¼í’ˆ"] },
    { kanji: "é›‡ã†", kana: "ã‚„ã¨ã†", meaning: ["ê³ ìš©í•˜ë‹¤"] },
    { kanji: "æ€ã„ãã‚‹", kana: "ãŠã‚‚ã„ãã‚‹", meaning: ["ê²°ì‹¬í•˜ë‹¤"] },
    { kanji: "äº¤æ¸‰", kana: "ã“ã†ã—ã‚‡ã†", meaning: ["êµì„­"] },
    { kanji: "è‹¦æƒ…", kana: "ãã˜ã‚‡ã†", meaning: ["ë¶ˆí‰", "í´ë ˆì„"] },
    { kanji: "æŠ±ã", kana: "ã„ã ã", meaning: ["í’ˆë‹¤"] },
    { kanji: "èª¤è§£", kana: "ã”ã‹ã„", meaning: ["ì˜¤í•´"] },
    { kanji: "å¥½èª¿ãª", kana: "ã“ã†ã¡ã‚‡ã†ãª", meaning: ["í˜¸ì¡°ì¸", "ìˆœì¡°ë¡œìš´"] },
    { kanji: "é ¼ã‚‚ã—ã„", kana: "ãŸã®ã‚‚ã—ã„", meaning: ["ë¯¿ìŒì§í•˜ë‹¤"] },
    { kanji: "ç¯€ç´„", kana: "ã›ã¤ã‚„ã", meaning: ["ì ˆì•½"] },
    { kanji: "é£›ã³ã¤ã", kana: "ã¨ã³ã¤ã", meaning: ["ë‹¬ë ¤ë“¤ë‹¤"] },
    { kanji: "æ±‚äºº", kana: "ãã‚…ã†ã˜ã‚“", meaning: ["êµ¬ì¸"] },
    { kanji: "è©±é¡Œ", kana: "ã‚ã ã„", meaning: ["í™”ì œ"] },
    { kanji: "åŠ£ã‚‹", kana: "ãŠã¨ã‚‹", meaning: ["ë’¤ë–¨ì–´ì§€ë‹¤", "ì—´ë“±í•˜ë‹¤"] },
    { kanji: "åŠ‡çš„ã«", kana: "ã’ãã¦ãã«", meaning: ["ê·¹ì ìœ¼ë¡œ"] },
    { kanji: "æ¥ç¶š", kana: "ã›ã¤ãã", meaning: ["ì ‘ì†"] },
    { kanji: "å¾Œæ‚”", kana: "ã“ã†ã‹ã„", meaning: ["í›„íšŒ"] },
    { kanji: "ç· ã‚åˆ‡ã‚‹", kana: "ã—ã‚ãã‚‹", meaning: ["ë§ˆê°í•˜ë‹¤"] },
    { kanji: "ç‰¹å®š", kana: "ã¨ãã¦ã„", meaning: ["íŠ¹ì •"] },
    { kanji: "é•å", kana: "ã„ã¯ã‚“", meaning: ["ìœ„ë°˜"] },
    { kanji: "æ“¬ã‚‹", kana: "ã¾ã­ã‚‹", meaning: ["í‰ë‚´ë‚´ë‹¤", "ëª¨ë°©í•˜ë‹¤"] },
    { kanji: "è¨­å‚™", kana: "ã›ã¤ã³", meaning: ["ì„¤ë¹„"] },
    { kanji: "é€²å‡º", kana: "ã—ã‚“ã—ã‚…ã¤", meaning: ["ì§„ì¶œ"] },
    { kanji: "ç››ã‚Šä¸ŠãŒã‚‹", kana: "ã‚‚ã‚Šã‚ãŒã‚‹", meaning: ["ê³ ì¡°ë˜ë‹¤"] },

    // --- 20í˜ì´ì§€ (Kanji/Vocabulary/Adverb/Synonym) ---
    { kanji: "é€šé", kana: "ã¤ã†ã‹", meaning: ["í†µê³¼"] },
    { kanji: "è­²ã‚‹", kana: "ã‚†ãšã‚‹", meaning: ["ì–‘ë„í•˜ë‹¤"] },
    { kanji: "å ±é“", kana: "ã»ã†ã©ã†", meaning: ["ë³´ë„"] },
    { kanji: "å¤šå¤§ãª", kana: "ãŸã ã„ãª", meaning: ["ë§¤ìš° í°"] },
    { kanji: "å£²ã‚‹", kana: "ã†ã‚‹", meaning: ["íŒ”ë‹¤"] },
    { kanji: "é›‘è«‡", kana: "ã–ã¤ã ã‚“", meaning: ["ì¡ë‹´"] },
    { kanji: "æº¶ã‘è¾¼ã‚€", kana: "ã¨ã‘ã“ã‚€", meaning: ["ë…¹ì•„ë“¤ë‹¤"] },
    { kanji: "å®Œäº†", kana: "ã‹ã‚“ã‚Šã‚‡ã†", meaning: ["ì™„ë£Œ"] },
    { kanji: "è³¢ã„", kana: "ã‹ã—ã“ã„", meaning: ["ë˜‘ë˜‘í•˜ë‹¤"] },
    { kanji: "é ­ãŒã„ã„", kana: "ã‚ãŸã¾ãŒã„ã„", meaning: ["ë¨¸ë¦¬ê°€ ì¢‹ë‹¤"] },
    { kanji: "å¤§ã’ã•", kana: "ãŠãŠã’ã•", meaning: ["ê³¼ì¥"] },
    { kanji: "è¡°ãˆã‚‹", kana: "ãŠã¨ã‚ãˆã‚‹", meaning: ["ì‡ í‡´í•˜ë‹¤"] },
    { kanji: "å‹æ‰‹ãª", kana: "ã‹ã£ã¦ãª", meaning: ["ì œë©‹ëŒ€ë¡œì¸"] },
    { kanji: "çœç•¥", kana: "ã—ã‚‡ã†ã‚Šã‚ƒã", meaning: ["ìƒëµ"] },
    { kanji: "æ€ã„è¾¼ã‚€", kana: "ãŠã‚‚ã„ã“ã‚€", meaning: ["ë§ˆìŒë¨¹ë‹¤", "ë¯¿ë‹¤"] },
    { kanji: "å£èª¿", kana: "ãã¡ã‚‡ã†", meaning: ["ì–´ì¡°", "ë§íˆ¬"] },
    { kanji: "å½¹ç›®", kana: "ã‚„ãã‚", meaning: ["ì„ë¬´"] },
    { kanji: "ä½•åº¦ã‚‚", kana: "ãªã‚“ã©ã‚‚", meaning: ["ëª‡ ë²ˆì´ê³ "] },
    { kanji: "ã¨ã¦ã‚‚å¤§ãã„", kana: "ã¨ã¦ã‚‚ãŠãŠãã„", meaning: ["ë§¤ìš° í¬ë‹¤"] },
    { kanji: "è¦‹è§£", kana: "ã‘ã‚“ã‹ã„", meaning: ["ê²¬í•´"] },
    { kanji: "è€ƒãˆæ–¹", kana: "ã‹ã‚“ãŒãˆã‹ãŸ", meaning: ["ìƒê°", "ì‚¬ê³ ë°©ì‹"] },
    { kanji: "ä¸€å¿œ", kana: "ã„ã¡ãŠã†", meaning: ["ìš°ì„ ", "ì¼ë‹¨"] },
    { kanji: "å€Ÿã‚Šã‚‹", kana: "ã‹ã‚Šã‚‹", meaning: ["ë¹Œë¦¬ë‹¤"] },

    // --- 21í˜ì´ì§€ (Synonyms/Antonyms) ---
    { kanji: "æµè¡Œ", kana: "ã‚Šã‚…ã†ã“ã†", meaning: ["ìœ í–‰"] },
    { kanji: "çªç„¶", kana: "ã¨ã¤ãœã‚“", meaning: ["ê°‘ìê¸°"] },
    { kanji: "æ…é‡ã«", kana: "ã—ã‚“ã¡ã‚‡ã†ã«", meaning: ["ì‹ ì¤‘í•˜ê²Œ"] },
    { kanji: "æ³¨æ„ã—ã¦", kana: "ã¡ã‚…ã†ã„ã—ã¦", meaning: ["ì£¼ì˜í•˜ì—¬"] },
    { kanji: "ç¸®ã‚€", kana: "ã¡ã¢ã‚€", meaning: ["ì¤„ì–´ë“¤ë‹¤", "ì¶•ì†Œë˜ë‹¤"] },
    { kanji: "å°ã•ããªã‚‹", kana: "ã¡ã„ã•ããªã‚‹", meaning: ["ì‘ì•„ì§€ë‹¤"] },
    { kanji: "ç›´ã¡ã«", kana: "ãŸã ã¡ã«", meaning: ["ì¦‰ì‹œ"] },
    { kanji: "ã ã„ãŸã„", kana: "ã ã„ãŸã„", meaning: ["ëŒ€ì²´ë¡œ"] },
    { kanji: "å›å¾©ã™ã‚‹", kana: "ã‹ã„ãµãã™ã‚‹", meaning: ["íšŒë³µí•˜ë‹¤"] },
    { kanji: "è‰¯ããªã‚‹", kana: "ã‚ˆããªã‚‹", meaning: ["ì¢‹ì•„ì§€ë‹¤"] },
    { kanji: "ç–²ã‚Œã‚‹", kana: "ã¤ã‹ã‚Œã‚‹", meaning: ["ì§€ì¹˜ë‹¤", "í”¼ê³¤í•˜ë‹¤"] },
    { kanji: "å¥‡å¦™ãª", kana: "ãã¿ã‚‡ã†ãª", meaning: ["ê¸°ë¬˜í•œ"] },
    { kanji: "å¤‰ãª", kana: "ã¸ã‚“ãª", meaning: ["ì´ìƒí•œ"] },
    { kanji: "ä»•ä¸Šã’ã‚‹", kana: "ã—ã‚ã’ã‚‹", meaning: ["ë§ˆë¬´ë¦¬í•˜ë‹¤", "ì™„ì„±í•˜ë‹¤"] },
    { kanji: "å®Œæˆã•ã›ã‚‹", kana: "ã‹ã‚“ã›ã„ã•ã›ã‚‹", meaning: ["ì™„ì„±ì‹œí‚¤ë‹¤"] },
    { kanji: "æ—¥ä¸­", kana: "ã«ã£ã¡ã‚…ã†", meaning: ["ëŒ€ë‚®", "í•œë‚®"] },
    { kanji: "æ˜¼é–“", kana: "ã²ã‚‹ã¾", meaning: ["ëŒ€ë‚®", "í•œë‚®"] },
    { kanji: "æ¹¿ã‚‹", kana: "ã—ã‚ã‚‹", meaning: ["ìŠµê¸° ì°¨ë‹¤"] },
    { kanji: "ä¹¾ã‹ãªã„", kana: "ã‹ã‚ã‹ãªã„", meaning: ["ë§ˆë¥´ì§€ ì•Šë‹¤"] },
    { kanji: "åƒ…ã‹ãª", kana: "ã‚ãšã‹ãª", meaning: ["ì–¼ë§ˆ ì•ˆ ë˜ëŠ”"] },
    { kanji: "å°‘ã—", kana: "ã™ã“ã—", meaning: ["ì¡°ê¸ˆ"] },
    { kanji: "å„ªç§€ãª", kana: "ã‚†ã†ã—ã‚…ã†ãª", meaning: ["ìš°ìˆ˜í•œ"] },
    { kanji: "é ­ãŒã„ã„", kana: "ã‚ãŸã¾ãŒã„ã„", meaning: ["ë¨¸ë¦¬ê°€ ì¢‹ë‹¤"] },
    { kanji: "è¿½åŠ ã™ã‚‹", kana: "ã¤ã„ã‹ã™ã‚‹", meaning: ["ì¶”ê°€í•˜ë‹¤"] },
    { kanji: "è¶³ã™", kana: "ãŸã™", meaning: ["ë”í•˜ë‹¤"] },
    { kanji: "ç›¸å½“", kana: "ãã†ã¨ã†", meaning: ["ìƒë‹¹íˆ"] },
    { kanji: "ä¿¯ã", kana: "ã†ã¤ã‚€ã", meaning: ["ê³ ê°œë¥¼ ìˆ™ì´ë‹¤"] },
    { kanji: "å‹•ã‹ãªã„", kana: "ã†ã”ã‹ãªã„", meaning: ["ì›€ì§ì´ì§€ ì•ŠëŠ”ë‹¤"] },
    { kanji: "èª¤ã‚‹", kana: "ã‚ã‚„ã¾ã‚‹", meaning: ["í‹€ë¦¬ë‹¤", "ì‹¤ìˆ˜í•˜ë‹¤"] },
    { kanji: "ä¸‹ã‚’å‘ã", kana: "ã—ãŸã‚’ã‚€ã", meaning: ["ì•„ë˜ë¥¼ ë³´ë‹¤"] },

    // --- 22í˜ì´ì§€ (Synonyms/Antonyms) ---
    { kanji: "æ­£ã—ããªã„", kana: "ãŸã ã—ããªã„", meaning: ["ì˜³ì§€ ì•Šë‹¤", "ë§ì§€ ì•Šë‹¤"] },
    { kanji: "å¿…æ­»ãª", kana: "ã²ã£ã—ãª", meaning: ["í•„ì‚¬ì ì¸", "ì—´ì‹¬ì¸"] },
    { kanji: "ä¸€ç”Ÿæ‡¸å‘½ãª", kana: "ã„ã£ã—ã‚‡ã†ã‘ã‚“ã‚ã„ãª", meaning: ["ì—´ì‹¬ì¸"] },
    { kanji: "ä¹¾ç‡¥ã™ã‚‹", kana: "ã‹ã‚“ãã†ã™ã‚‹", meaning: ["ê±´ì¡°í•˜ë‹¤"] },
    { kanji: "å±±ã®éº“", kana: "ã‚„ã¾ã®ãµã‚‚ã¨", meaning: ["ì‚°ê¸°ìŠ­"] },
    { kanji: "æ¸ˆã¾ã™", kana: "ã™ã¾ã™", meaning: ["ë§ˆì¹˜ë‹¤", "ëë‚´ë‹¤"] },
    { kanji: "çµ‚ãˆã‚‹", kana: "ãŠãˆã‚‹", meaning: ["ë§ˆì¹˜ë‹¤", "ëë‚´ë‹¤"] },
    { kanji: "æ›–æ˜§ãª", kana: "ã‚ã„ã¾ã„ãª", meaning: ["ì• ë§¤í•œ"] },
    { kanji: "æ€ã„ãŒã‘ãªã„", kana: "ãŠã‚‚ã„ãŒã‘ãªã„", meaning: ["ëœ»ë°–ì´ë‹¤"] },
    { kanji: "æ„å¤–ã ", kana: "ã„ãŒã„ã ", meaning: ["ì˜ì™¸ë‹¤"] },
    { kanji: "è²·ã„å ã‚ã‚‹", kana: "ã‹ã„ã—ã‚ã‚‹", meaning: ["ë§¤ì í•˜ë‹¤", "ì‚¬ ëª¨ìœ¼ë‹¤"] },
    { kanji: "å…¨éƒ¨è²·ã†", kana: "ãœã‚“ã¶ã‹ã†", meaning: ["ëª¨ë‘ ì‚¬ë‹¤"] },
    { kanji: "é–“éš›", kana: "ã¾ãã‚", meaning: ["ì§ì „"] },
    { kanji: "ç›´å‰", kana: "ã¡ã‚‡ããœã‚“", meaning: ["ì§ì „"] },
    { kanji: "è‡ªã‚‰", kana: "ã¿ãšã‹ã‚‰", meaning: ["ìŠ¤ìŠ¤ë¡œ"] },
    { kanji: "è‡ªåˆ†ã§", kana: "ã˜ã¶ã‚“ã§", meaning: ["ìŠ¤ìŠ¤ë¡œ", "ìì‹ ì´"] },
    { kanji: "é›†ã¾ã‚‹", kana: "ã‚ã¤ã¾ã‚‹", meaning: ["ëª¨ì´ë‹¤"] },
    { kanji: "è¨ˆç”»", kana: "ã‘ã„ã‹ã", meaning: ["ê³„íš"] },
    { kanji: "ç›¸å¤‰ã‚ã‚‰ãš", kana: "ã‚ã„ã‹ã‚ã‚‰ãš", meaning: ["ì—¬ì „íˆ"] },
    { kanji: "å‹˜å®šã™ã‚‹", kana: "ã‹ã‚“ã˜ã‚‡ã†ã™ã‚‹", meaning: ["ì§€ë¶ˆí•˜ë‹¤"] },
    { kanji: "ãŠé‡‘ã‚’æ‰•ã†", kana: "ãŠã‹ã­ã‚’ã¯ã‚‰ã†", meaning: ["ëˆì„ ì§€ë¶ˆí•˜ë‹¤"] },
    { kanji: "ç•°ãªã‚‹", kana: "ã“ã¨ãªã‚‹", meaning: ["ë‹¤ë¥´ë‹¤"] },
    { kanji: "é•ã†", kana: "ã¡ãŒã†", meaning: ["ë‹¤ë¥´ë‹¤"] },
    { kanji: "ä¾ç„¶ã¨ã—ã¦", kana: "ã„ãœã‚“ã¨ã—ã¦", meaning: ["ì—¬ì „íˆ"] },

    // --- 23í˜ì´ì§€ (Synonyms/Antonyms) ---
    { kanji: "å¶ç„¶", kana: "ãã†ãœã‚“", meaning: ["ìš°ì—°íˆ"] },
    { kanji: "å°‘ã—", kana: "ã™ã“ã—", meaning: ["ì¡°ê¸ˆ"] },
    { kanji: "æ˜ã‚‰ã‹ãª", kana: "ã‚ãã‚‰ã‹ãª", meaning: ["ë¶„ëª…í•œ"] },
    { kanji: "é€Ÿã•", kana: "ã¯ã‚„ã•", meaning: ["ì†ë„"] },
    { kanji: "ç”¨å¿ƒ", kana: "ã‚ˆã†ã˜ã‚“", meaning: ["ì¡°ì‹¬"] },
    { kanji: "å¦™ãª", kana: "ã¿ã‚‡ã†ãª", meaning: ["ë¬˜í•œ"] },
    { kanji: "æ³¨æ„", kana: "ã¡ã‚…ã†ã„", meaning: ["ì£¼ì˜"] },
    { kanji: "å¤‰ãª", kana: "ã¸ã‚“ãª", meaning: ["ì´ìƒí•œ"] },
    { kanji: "é¨’ã€…ã—ã„", kana: "ãã†ãã†ã—ã„", meaning: ["ì‹œë„ëŸ½ë‹¤", "ì†Œë€ìŠ¤ëŸ½ë‹¤"] },
    { kanji: "å°å£°ã§è©±ã™", kana: "ã“ã”ãˆã§ã¯ãªã™", meaning: ["ì‘ì€ ëª©ì†Œë¦¬ë¡œ ë§í•˜ë‹¤"] },
    { kanji: "æ‰€æœ‰ã™ã‚‹", kana: "ã—ã‚‡ã‚†ã†ã™ã‚‹", meaning: ["ì†Œìœ í•˜ë‹¤"] },
    { kanji: "æŒã¤", kana: "ã‚‚ã¤", meaning: ["ë“¤ë‹¤", "ì†Œìœ í•˜ë‹¤"] },
    { kanji: "ä»¥å‰", kana: "ã„ãœã‚“", meaning: ["ì´ì „", "ì˜ˆì „"] },
    { kanji: "å¤šåˆ†", kana: "ãŸã¶ã‚“", meaning: ["ì•„ë§ˆ"] },
    { kanji: "ä½•åº¦ã‚‚", kana: "ãªã‚“ã©ã‚‚", meaning: ["ëª‡ ë²ˆì´ë‚˜"] },
    { kanji: "åç´ã™ã‚‹", kana: "ã—ã‚…ã†ã®ã†ã™ã‚‹", meaning: ["ìˆ˜ë‚©í•˜ë‹¤"] },
    { kanji: "æ³¨ç›®ã™ã‚‹", kana: "ã¡ã‚…ã†ã‚‚ãã™ã‚‹", meaning: ["ì£¼ëª©í•˜ë‹¤"] },
    { kanji: "é–¢å¿ƒã‚’æŒã¤", kana: "ã‹ã‚“ã—ã‚“ã‚’ã‚‚ã¤", meaning: ["ê´€ì‹¬ì„ ê°–ë‹¤"] },
    { kanji: "å°æŸ„ã ", kana: "ã“ãŒã‚‰ã ", meaning: ["ëª¸ì§‘ì´ ì‘ë‹¤"] },
    { kanji: "ä½“ãŒå°ã•ã„", kana: "ã‹ã‚‰ã ãŒã¡ã„ã•ã„", meaning: ["ëª¸ì§‘ì´ ì‘ë‹¤"] },
    { kanji: "ç›´æ¥", kana: "ã¡ã‚‡ãã›ã¤", meaning: ["ì§ì ‘"] },
    { kanji: "ç„¡å£ã ", kana: "ã‚€ãã¡ã ", meaning: ["ê³¼ë¬µí•˜ë‹¤"] },
    { kanji: "è¡çªã™ã‚‹", kana: "ã—ã‚‡ã†ã¨ã¤ã™ã‚‹", meaning: ["ì¶©ëŒí•˜ë‹¤"] },
    { kanji: "å‘æ€¯ãª", kana: "ã²ãã‚‡ã†ãª", meaning: ["ë¹„ê²í•œ"] },

    // --- 24í˜ì´ì§€ (Synonyms/Antonyms) ---
    { kanji: "æ„‰å¿«ã ", kana: "ã‚†ã‹ã„ã ", meaning: ["ìœ ì¾Œí•˜ë‹¤"] },
    { kanji: "é¢ç™½ã„", kana: "ãŠã‚‚ã—ã‚ã„", meaning: ["ì¬ë¯¸ìˆë‹¤"] },
    { kanji: "è­²ã‚‹", kana: "ã‚†ãšã‚‹", meaning: ["ì–‘ë³´í•˜ë‹¤"] },
    { kanji: "ã‚ã’ã‚‹", kana: "ã‚ã’ã‚‹", meaning: ["ì£¼ë‹¤"] },
    { kanji: "è¨˜æ†¶ã™ã‚‹", kana: "ããŠãã™ã‚‹", meaning: ["ê¸°ì–µí•˜ë‹¤"] },
    { kanji: "è¦šãˆã‚‹", kana: "ãŠã¼ãˆã‚‹", meaning: ["ì™¸ìš°ë‹¤"] },
    { kanji: "æ¯æŠœãã™ã‚‹", kana: "ã„ãã¬ãã™ã‚‹", meaning: ["í•œìˆ¨ ëŒë¦¬ë‹¤", "ì‰¬ë‹¤"] },
    { kanji: "ä¸å¹³", kana: "ãµã¸ã„", meaning: ["ë¶ˆí‰"] },
    { kanji: "ä¼‘ã‚€", kana: "ã‚„ã™ã‚€", meaning: ["ì‰¬ë‹¤"] },
    { kanji: "é‹ãŒã„ã„", kana: "ã†ã‚“ãŒã„ã„", meaning: ["ìš´ì´ ì¢‹ë‹¤"] },
    { kanji: "æ–‡å¥", kana: "ã‚‚ã‚“ã", meaning: ["ë¶ˆí‰", "ë¶ˆë§Œ"] },
    { kanji: "æ€’ã‚‹", kana: "ãŠã“ã‚‹", meaning: ["í™”ê°€ ë‚˜ë‹¤"] },
    { kanji: "å¸¸ã«", kana: "ã¤ã­ã«", meaning: ["í•­ìƒ"] },
    { kanji: "ç¨€ãª", kana: "ã¾ã‚Œãª", meaning: ["ë“œë¬¸"] },
    { kanji: "ã»ã¨ã‚“ã©ãªã„", kana: "ã»ã¨ã‚“ã©ãªã„", meaning: ["ê±°ì˜ ì—†ëŠ”"] },
    { kanji: "éå‰°ã ", kana: "ã‹ã˜ã‚‡ã†ã ", meaning: ["ê³¼ì‰ì´ë‹¤"] },
    { kanji: "å½“ã¦ã‚‹", kana: "ã‚ã¦ã‚‹", meaning: ["ë§íˆë‹¤"] },
    { kanji: "å¤šã™ãã‚‹", kana: "ãŠãŠã™ãã‚‹", meaning: ["ë„ˆë¬´ ë§ë‹¤"] },
    { kanji: "è‡†ç—…ã ", kana: "ãŠãã³ã‚‡ã†ã ", meaning: ["ê²ì´ ë§ë‹¤"] },
    { kanji: "å“€ã‚Œãª", kana: "ã‚ã‚ã‚Œãª", meaning: ["ë¶ˆìŒí•œ"] },
    { kanji: "å½“åˆ†", kana: "ã¨ã†ã¶ã‚“", meaning: ["ë‹¹ë¶„ê°„", "ì ì‹œ"] },
    { kanji: "ä¸€è»¢ã™ã‚‹", kana: "ã„ã£ã¦ã‚“ã™ã‚‹", meaning: ["ì™„ì „íˆ ë°”ë€Œë‹¤"] }
    ];
  let currentIndex = 0;
        let score = 0;
        let currentStep = 'meaning'; // 'meaning' (ëœ») or 'reading' (ë°œìŒ)
        let quizList = [];           // í˜„ì¬ ì§„í–‰ ì¤‘ì¸ í€´ì¦ˆ ë¦¬ìŠ¤íŠ¸
        let incorrectList = [];      // í‹€ë¦° ë‹¨ì–´ ì €ì¥ ë¦¬ìŠ¤íŠ¸
        let isReviewMode = false;    // ë³µìŠµ ëª¨ë“œ ì—¬ë¶€
        let isProcessing = false;    // ì •ë‹µ ì²˜ë¦¬ ì¤‘ ì¤‘ë³µ ì…ë ¥ ë°©ì§€

        // DOM ìš”ì†Œ
        const elements = {
            questionWord: document.getElementById('question-word'),
            inputLabel: document.getElementById('input-label'),
            userInput: document.getElementById('user-input'),
            statusMsg: document.getElementById('status-msg'),
            feedback: document.getElementById('feedback'),
            progressBar: document.getElementById('progress-bar'),
            currentIndex: document.getElementById('current-index'),
            totalCount: document.getElementById('total-count'),
            quizContainer: document.getElementById('quiz-container'),
            resultContainer: document.getElementById('result-container'),
            finalScore: document.getElementById('final-score'),
            reviewSection: document.getElementById('review-section'),
            wrongCount: document.getElementById('wrong-count'),
            headerBg: document.getElementById('header-bg'),
            headerTitle: document.getElementById('header-title'),
            headerDesc: document.getElementById('header-desc'),
            submitBtn: document.getElementById('submit-btn')
        };

        // ë°°ì—´ ì„ê¸° (Fisher-Yates)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // ì´ˆê¸°í™” ë° ì „ì²´ ì‹œì‘
        function initQuiz() {
            quizList = shuffleArray([...vocabularyData]);
            incorrectList = [];
            isReviewMode = false;
            score = 0;
            currentIndex = 0;
            
            updateHeaderUI();
            startCycle();
        }

        // ë³µìŠµ ëª¨ë“œ ì‹œì‘
        function startReview() {
            quizList = shuffleArray([...incorrectList]);
            incorrectList = []; // ë³µìŠµ ì¤‘ ë˜ í‹€ë¦° ê²ƒë§Œ ë‚¨ê¸°ê¸° ìœ„í•´ ì´ˆê¸°í™” (ì„ íƒ ì‚¬í•­, ì—¬ê¸°ì„  ì¬ë„ì „ìœ¼ë¡œ ê°„ì£¼)
            // ë§Œì•½ ë³µìŠµ ë•Œ ë§ì¶”ë©´ ë¦¬ìŠ¤íŠ¸ì—ì„œ ë¹ ì§€ê²Œ í•˜ë ¤ë©´ ìœ„ë¥¼ ìœ ì§€, 
            // ë³µìŠµ ë•Œë„ í‹€ë¦¬ë©´ ë‹¤ìŒ ë³µìŠµì— ë‚¨ê¸°ë ¤ë©´ ë¡œì§ í•„ìš”.
            // ì—¬ê¸°ì„œëŠ” 'ì´ë²ˆ ë³µìŠµ ë¼ìš´ë“œ'ë¥¼ ìœ„í•œ ì´ˆê¸°í™”.
            
            isReviewMode = true;
            score = 0;
            currentIndex = 0;
            
            // UI ë³€ê²½
            elements.resultContainer.classList.add('hidden');
            elements.quizContainer.classList.remove('hidden');
            
            updateHeaderUI();
            startCycle();
        }

        function updateHeaderUI() {
            if (isReviewMode) {
                elements.headerBg.className = "bg-orange-500 p-4 text-white text-center transition-colors duration-500";
                elements.headerTitle.innerText = "ì˜¤ë‹µ ë³µìŠµ ëª¨ë“œ";
                elements.headerDesc.innerText = "í‹€ë¦° ë‹¨ì–´ë¥¼ í™•ì‹¤í•˜ê²Œ ì™¸ì›Œë´…ì‹œë‹¤!";
            } else {
                elements.headerBg.className = "bg-emerald-600 p-4 text-white text-center transition-colors duration-500";
                elements.headerTitle.innerText = "JLPT N2 ë‹¨ì–´ì¥";
                elements.headerDesc.innerText = "ìˆœì„œëŠ” ëœë¤, ì˜¤ë‹µ ì‹œ ì •ë‹µ ê³µê°œ";
            }
        }

        function startCycle() {
            elements.totalCount.innerText = quizList.length;
            loadQuestion();

            // ì—”í„°í‚¤ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ (ì¤‘ë³µ ë°©ì§€)
            elements.userInput.onkeypress = function(event) {
                if (event.key === "Enter" && !isProcessing) {
                    checkAnswer();
                }
            };
        }

        function loadQuestion() {
            const currentData = quizList[currentIndex];
            elements.currentIndex.innerText = currentIndex + 1;
            
            // í”„ë¡œê·¸ë˜ìŠ¤ ë°”
            const progress = (currentIndex / quizList.length) * 100;
            elements.progressBar.style.width = `${progress}%`;

            // ë¬¸ì œ ì„¸íŒ…
            elements.questionWord.innerText = currentData.kanji;
            elements.userInput.value = '';
            elements.userInput.disabled = false;
            elements.userInput.focus();
            elements.feedback.innerText = '';
            
            // 1ë‹¨ê³„: ëœ» ë§ì¶”ê¸°
            currentStep = 'meaning';
            elements.inputLabel.innerText = "Step 1. ëœ»ì„ ì…ë ¥í•˜ì„¸ìš” (í•œêµ­ì–´)";
            elements.statusMsg.innerText = "";
            elements.userInput.placeholder = "ëœ» ì…ë ¥";
            
            isProcessing = false;
        }

        function checkAnswer() {
            if (isProcessing) return;
            
            const currentData = quizList[currentIndex];
            const userVal = elements.userInput.value.trim();

            if (!userVal) return;

            isProcessing = true; // ì²˜ë¦¬ ì¤‘ í”Œë˜ê·¸ ì„¤ì •

            if (currentStep === 'meaning') {
                // ëœ» í™•ì¸
                const isCorrect = currentData.meaning.some(m => userVal.includes(m) || m.includes(userVal));
                
                if (isCorrect) {
                    // ì •ë‹µ
                    elements.feedback.className = "h-10 text-sm font-bold text-blue-600 flex items-center justify-center";
                    elements.feedback.innerText = "ì •ë‹µ! â­• ë°œìŒ í€´ì¦ˆë¡œ ë„˜ì–´ê°‘ë‹ˆë‹¤.";
                    
                    setTimeout(() => {
                        proceedToReading(currentData);
                    }, 800);
                } else {
                    // ì˜¤ë‹µ
                    addIncorrectWord(currentData);
                    elements.feedback.className = "h-10 text-sm font-bold text-red-500 flex items-center justify-center";
                    elements.feedback.innerText = `ì˜¤ë‹µ! âŒ ì •ë‹µì€ [${currentData.meaning.join(', ')}] ì…ë‹ˆë‹¤.`;
                    
                    // ì˜¤ë‹µ í™•ì¸ ì‹œê°„ (2ì´ˆ)
                    setTimeout(() => {
                        proceedToReading(currentData);
                    }, 2000);
                }

            } else if (currentStep === 'reading') {
                // ë°œìŒ í™•ì¸
                if (userVal === currentData.kana) {
                    // ì •ë‹µ
                    score++;
                    elements.feedback.className = "h-10 text-sm font-bold text-emerald-600 flex items-center justify-center";
                    elements.feedback.innerText = "ì™„ë²½í•©ë‹ˆë‹¤! â­• ë‹¤ìŒ ë¬¸ì œë¡œ...";
                    
                    setTimeout(() => {
                        nextQuestion();
                    }, 1000);
                } else {
                    // ì˜¤ë‹µ
                    addIncorrectWord(currentData);
                    elements.feedback.className = "h-10 text-sm font-bold text-red-500 flex items-center justify-center";
                    elements.feedback.innerText = `ì˜¤ë‹µ! âŒ ì •ë‹µì€ [${currentData.kana}] ì…ë‹ˆë‹¤.`;
                    
                    setTimeout(() => {
                        nextQuestion();
                    }, 2000);
                }
            }
        }

        // ëœ» ë‹¨ê³„ -> ë°œìŒ ë‹¨ê³„ ì „í™˜
        function proceedToReading(data) {
            currentStep = 'reading';
            elements.inputLabel.innerText = `Step 2. '${data.kanji}'ì˜ ë°œìŒì„ ì…ë ¥í•˜ì„¸ìš” (íˆë¼ê°€ë‚˜)`;
            
            // ëœ» íŒíŠ¸ ë³´ì—¬ì£¼ê¸°
            elements.statusMsg.innerText = `ëœ»: ${data.meaning.join(', ')}`;
            
            elements.userInput.value = '';
            elements.userInput.placeholder = "íˆë¼ê°€ë‚˜ ì…ë ¥";
            elements.feedback.innerText = '';
            elements.userInput.focus();
            isProcessing = false;
        }

        // ì˜¤ë‹µ ë¦¬ìŠ¤íŠ¸ ì¶”ê°€ (ì¤‘ë³µ ë°©ì§€)
        function addIncorrectWord(wordObj) {
            if (!incorrectList.includes(wordObj)) {
                incorrectList.push(wordObj);
            }
        }

        function nextQuestion() {
            currentIndex++;
            if (currentIndex < quizList.length) {
                loadQuestion();
            } else {
                showResult();
            }
        }

        function showResult() {
            elements.quizContainer.classList.add('hidden');
            elements.resultContainer.classList.remove('hidden');
            elements.finalScore.innerText = score + " / " + quizList.length;
            elements.progressBar.style.width = '100%';

            // ë³µìŠµ ì„¹ì…˜ ì²˜ë¦¬
            if (incorrectList.length > 0) {
                elements.reviewSection.classList.remove('hidden');
                elements.wrongCount.innerText = incorrectList.length;
            } else {
                elements.reviewSection.classList.add('hidden');
                // ë§Œì•½ ë³µìŠµ ëª¨ë“œì—ì„œ ë‹¤ ë§ì·„ë‹¤ë©´ ì¶•í•˜ ë©”ì‹œì§€ ê°•í™” ê°€ëŠ¥
                if(isReviewMode) {
                    elements.finalScore.innerText += " (ë³µìŠµ ì™„ë£Œ!)";
                }
            }
        }

        // ìµœì´ˆ ì‹¤í–‰
        initQuiz();
    </script>
</body>
</html>
