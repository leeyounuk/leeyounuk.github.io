<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¼ë‹¨í•©ê²© JLPT N2 ë‹¨ì–´ í€´ì¦ˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&family=Noto+Sans+JP:wght@400;700&display=swap');
        body { font-family: 'Noto Sans KR', 'Noto Sans JP', sans-serif; }
        .fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">

    <div class="bg-white rounded-xl shadow-lg w-full max-w-md overflow-hidden">
        <div class="bg-emerald-600 p-4 text-white text-center">
            <h1 class="text-xl font-bold">JLPT N2 ë‹¨ì–´ì¥ í€´ì¦ˆ</h1>
            <p class="text-sm opacity-80">ëœ»ì„ ë§ì¶”ë©´ ë°œìŒ í€´ì¦ˆë¡œ ë„˜ì–´ê°‘ë‹ˆë‹¤</p>
        </div>

        <div class="bg-gray-200 h-2 w-full">
            <div id="progress-bar" class="bg-emerald-400 h-2 transition-all duration-300" style="width: 0%"></div>
        </div>

        <div id="quiz-container" class="p-8 text-center fade-in">
            <div class="mb-6">
                <span class="text-sm text-gray-500 mb-1 block">ë¬¸ì œ <span id="current-index">1</span> / <span id="total-count">10</span></span>
                <h2 id="question-word" class="text-5xl font-bold text-gray-800 mb-2"></h2>
                <p id="status-msg" class="text-emerald-600 font-medium h-6"></p>
            </div>

            <div class="space-y-4">
                <div class="relative">
                    <label id="input-label" class="block text-left text-sm font-bold text-gray-700 mb-1">ëœ»ì„ ì…ë ¥í•˜ì„¸ìš” (í•œêµ­ì–´)</label>
                    <input type="text" id="user-input" 
                        class="w-full px-4 py-3 rounded-lg border-2 border-gray-300 focus:border-emerald-500 focus:outline-none transition-colors text-lg text-center"
                        placeholder="ì˜ˆ: ì•½ì†" autocomplete="off">
                </div>

                <button onclick="checkAnswer()" 
                    class="w-full bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-3 rounded-lg transition-transform active:scale-95 shadow-md">
                    í™•ì¸
                </button>
                
                <div id="feedback" class="h-6 text-sm font-bold"></div>
            </div>
        </div>

        <div id="result-container" class="hidden p-8 text-center">
            <h2 class="text-3xl font-bold text-gray-800 mb-4">í€´ì¦ˆ ì™„ë£Œ! ğŸ‰</h2>
            <p class="text-lg mb-6">ì´ <span id="final-score" class="font-bold text-emerald-600"></span>ì ì„ íšë“í–ˆìŠµë‹ˆë‹¤.</p>
            <button onclick="location.reload()" class="bg-emerald-600 text-white px-6 py-2 rounded-lg hover:bg-emerald-700">ë‹¤ì‹œ í•˜ê¸°</button>
        </div>
    </div>

    <script>
        // PDF íŒŒì¼ì—ì„œ ì¶”ì¶œí•œ ìƒ˜í”Œ ë°ì´í„° (í•„ìš” ì‹œ ì´ ë¶€ë¶„ì„ ìˆ˜ì •í•˜ì—¬ ë‹¨ì–´ë¥¼ ì¶”ê°€í•˜ì„¸ìš”)
        const vocabularyData = [
            { kanji: "ç›¸äº’", kana: "ãã†ã”", meaning: ["ìƒí˜¸", "ì„œë¡œ"] },
            { kanji: "è£œã†", kana: "ãŠããªã†", meaning: ["ë³´ì™„í•˜ë‹¤", "ë³´ì¶©í•˜ë‹¤"] },
            { kanji: "è‡³æ€¥", kana: "ã—ãã‚…ã†", meaning: ["ì§€ê¸‰", "ë§¤ìš° ê¸‰í•¨", "ê¸‰íˆ"] },
            { kanji: "ç‡ç›´ãª", kana: "ãã£ã¡ã‚‡ããª", meaning: ["ì†”ì§í•œ", "ì†”ì§"] },
            { kanji: "è¦æ¨¡", kana: "ãã¼", meaning: ["ê·œëª¨"] },
            { kanji: "è£…ç½®", kana: "ãã†ã¡", meaning: ["ì¥ì¹˜"] },
            { kanji: "è¾›ã„", kana: "ã‹ã‚‰ã„", meaning: ["ë§µë‹¤", "ê´´ë¡­ë‹¤"] }, // ë¬¸ë§¥ì— ë”°ë¼ ëœ»ì´ ë‹¤ë¥´ì§€ë§Œ ëŒ€í‘œ ëœ» ì¶”ê°€
            { kanji: "è§¦ã‚Œã‚‹", kana: "ãµã‚Œã‚‹", meaning: ["ë‹¿ë‹¤", "ì–¸ê¸‰í•˜ë‹¤"] },
            { kanji: "æ™¯è‰²", kana: "ã‘ã—ã", meaning: ["ê²½ì¹˜"] },
            { kanji: "å ã‚ã‚‹", kana: "ã—ã‚ã‚‹", meaning: ["ì°¨ì§€í•˜ë‹¤", "ì ìœ í•˜ë‹¤"] },
            { kanji: "å‰Šé™¤", kana: "ã•ãã˜ã‚‡", meaning: ["ì‚­ì œ"] },
            { kanji: "å°Šé‡", kana: "ãã‚“ã¡ã‚‡ã†", meaning: ["ì¡´ì¤‘"] },
            { kanji: "å‚™ãˆã‚‹", kana: "ããªãˆã‚‹", meaning: ["ëŒ€ë¹„í•˜ë‹¤", "ê°–ì¶”ë‹¤"] },
            { kanji: "æ²»ç™‚", kana: "ã¡ã‚Šã‚‡ã†", meaning: ["ì¹˜ë£Œ"] },
            { kanji: "é˜²ç½", kana: "ã¼ã†ã•ã„", meaning: ["ë°©ì¬"] },
            { kanji: "éš£", kana: "ã¨ãªã‚Š", meaning: ["ì˜†", "ì´ì›ƒ"] },
            { kanji: "æ•—ã‚Œã‚‹", kana: "ã‚„ã¶ã‚Œã‚‹", meaning: ["íŒ¨ë°°í•˜ë‹¤", "ì§€ë‹¤"] },
            { kanji: "åœ°å…ƒ", kana: "ã˜ã‚‚ã¨", meaning: ["ê³ ì¥", "í˜„ì§€", "ì§€ì—­"] },
            { kanji: "è¦æ±‚", kana: "ã‚ˆã†ãã‚…ã†", meaning: ["ìš”êµ¬"] },
            { kanji: "ç„¦ç‚¹", kana: "ã—ã‚‡ã†ã¦ã‚“", meaning: ["ì´ˆì "] },
            { kanji: "æ’®å½±", kana: "ã•ã¤ãˆã„", meaning: ["ì´¬ì˜"] },
            { kanji: "æ‹¡å……", kana: "ã‹ãã˜ã‚…ã†", meaning: ["í™•ì¶©"] },
            { kanji: "æå®³", kana: "ãã‚“ãŒã„", meaning: ["ì†í•´"] },
            { kanji: "ç©ã‚€", kana: "ã¤ã‚€", meaning: ["ìŒ“ë‹¤"] },
            { kanji: "æ¨¡ç¯„", kana: "ã‚‚ã¯ã‚“", meaning: ["ëª¨ë²”"] },
            { kanji: "è¡Œäº‹", kana: "ãã‚‡ã†ã˜", meaning: ["í–‰ì‚¬"] },
            { kanji: "ç¾è±¡", kana: "ã’ã‚“ã—ã‚‡ã†", meaning: ["í˜„ìƒ"] },
            { kanji: "é€ƒäº¡", kana: "ã¨ã†ã¼ã†", meaning: ["ë„ë§"] },
            { kanji: "è©³ã—ã„", kana: "ãã‚ã—ã„", meaning: ["ìì„¸í•˜ë‹¤", "ìƒì„¸í•˜ë‹¤"] },
            { kanji: "å¤§å¹…", kana: "ãŠãŠã¯ã°", meaning: ["ëŒ€í­", "ëŒ€í­ì "] }
        ];

        let currentIndex = 0;
        let score = 0;
        let currentStep = 'meaning'; // 'meaning' (ëœ») or 'reading' (ë°œìŒ)

        const questionWordEl = document.getElementById('question-word');
        const inputLabelEl = document.getElementById('input-label');
        const userInputEl = document.getElementById('user-input');
        const statusMsgEl = document.getElementById('status-msg');
        const feedbackEl = document.getElementById('feedback');
        const progressBarEl = document.getElementById('progress-bar');
        const currentIndexEl = document.getElementById('current-index');
        const totalCountEl = document.getElementById('total-count');

        // ì´ˆê¸°í™”
        function initQuiz() {
            document.getElementById('total-count').innerText = vocabularyData.length;
            loadQuestion();
            
            // ì—”í„°í‚¤ ì…ë ¥ ì‹œ ì •ë‹µ í™•ì¸
            userInputEl.addEventListener("keypress", function(event) {
                if (event.key === "Enter") {
                    checkAnswer();
                }
            });
        }

        function loadQuestion() {
            const currentData = vocabularyData[currentIndex];
            currentIndexEl.innerText = currentIndex + 1;
            
            // í”„ë¡œê·¸ë˜ìŠ¤ ë°” ì—…ë°ì´íŠ¸
            const progress = (currentIndex / vocabularyData.length) * 100;
            progressBarEl.style.width = `${progress}%`;

            // ë¬¸ì œ ì„¸íŒ…
            questionWordEl.innerText = currentData.kanji;
            userInputEl.value = '';
            feedbackEl.innerText = '';
            
            // 1ë‹¨ê³„: ëœ» ë§ì¶”ê¸°
            currentStep = 'meaning';
            inputLabelEl.innerText = "Step 1. ëœ»ì„ ì…ë ¥í•˜ì„¸ìš” (í•œêµ­ì–´)";
            statusMsgEl.innerText = "";
            userInputEl.placeholder = "ì˜ˆ: " + currentData.meaning[0];
            userInputEl.focus();
        }

        function checkAnswer() {
            const currentData = vocabularyData[currentIndex];
            const userVal = userInputEl.value.trim();

            if (!userVal) return;

            if (currentStep === 'meaning') {
                // ëœ» í™•ì¸ ë¡œì§ (í¬í•¨ ì—¬ë¶€ í™•ì¸)
                const isCorrect = currentData.meaning.some(m => userVal.includes(m) || m.includes(userVal));
                
                if (isCorrect) {
                    feedbackEl.className = "h-6 text-sm font-bold text-blue-600";
                    feedbackEl.innerText = "ì •ë‹µ! ì´ì œ ë°œìŒì„ ì…ë ¥í•˜ì„¸ìš”.";
                    
                    // 2ë‹¨ê³„ ì „í™˜
                    currentStep = 'reading';
                    inputLabelEl.innerText = `Step 2. '${currentData.kanji}'ì˜ ë°œìŒì„ ì…ë ¥í•˜ì„¸ìš” (íˆë¼ê°€ë‚˜)`;
                    statusMsgEl.innerText = `ëœ»: ${currentData.meaning.join(', ')}`; // ì •ë‹µ ëœ» ë³´ì—¬ì£¼ê¸°
                    userInputEl.value = '';
                    userInputEl.placeholder = "ì˜ˆ: " + currentData.kana;
                    userInputEl.focus();
                } else {
                    feedbackEl.className = "h-6 text-sm font-bold text-red-500";
                    feedbackEl.innerText = "í‹€ë ¸ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ë³´ì„¸ìš”.";
                    userInputEl.classList.add('animate-pulse');
                    setTimeout(() => userInputEl.classList.remove('animate-pulse'), 500);
                }
            } else if (currentStep === 'reading') {
                // ë°œìŒ í™•ì¸ ë¡œì§ (ì •í™•íˆ ì¼ì¹˜í•´ì•¼ í•¨)
                if (userVal === currentData.kana) {
                    score++;
                    feedbackEl.className = "h-6 text-sm font-bold text-emerald-600";
                    feedbackEl.innerText = "ì™„ë²½í•©ë‹ˆë‹¤! ë‹¤ìŒ ë¬¸ì œë¡œ ë„˜ì–´ê°‘ë‹ˆë‹¤.";
                    
                    setTimeout(() => {
                        nextQuestion();
                    }, 1000);
                } else {
                    feedbackEl.className = "h-6 text-sm font-bold text-red-500";
                    feedbackEl.innerText = `ì˜¤ë‹µì…ë‹ˆë‹¤. ì •ë‹µì€ '${currentData.kana}' ì…ë‹ˆë‹¤.`;
                    // í‹€ë ¤ë„ ë‹¤ìŒìœ¼ë¡œ ë„˜ì–´ê°ˆì§€, ê³„ì† ì‹œë„í• ì§€ ê²°ì • (ì—¬ê¸°ì„  1.5ì´ˆ í›„ ë„˜ì–´ê°)
                    setTimeout(() => {
                        nextQuestion();
                    }, 1500);
                }
            }
        }

        function nextQuestion() {
            currentIndex++;
            if (currentIndex < vocabularyData.length) {
                loadQuestion();
            } else {
                showResult();
            }
        }

        function showResult() {
            document.getElementById('quiz-container').classList.add('hidden');
            document.getElementById('result-container').classList.remove('hidden');
            document.getElementById('final-score').innerText = score + " / " + vocabularyData.length;
            progressBarEl.style.width = '100%';
        }

        // ì‹¤í–‰
        initQuiz();
    </script>
</body>
</html>

