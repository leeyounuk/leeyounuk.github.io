<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¼ë‹¨í•©ê²© JLPT N2 ë‹¨ì–´ì¥ (ë³µìŠµ ëª¨ë“œ í¬í•¨)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&family=Noto+Sans+JP:wght@400;700&display=swap');
        body { font-family: 'Noto Sans KR', 'Noto Sans JP', sans-serif; }
        .fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">

    <div class="bg-white rounded-xl shadow-lg w-full max-w-md overflow-hidden">
        <div id="header-bg" class="bg-emerald-600 p-4 text-white text-center transition-colors duration-500">
            <h1 id="header-title" class="text-xl font-bold">JLPT N2 ë‹¨ì–´ì¥</h1>
            <p id="header-desc" class="text-sm opacity-80">ìˆœì„œëŠ” ëœë¤, ì˜¤ë‹µ ì‹œ ì •ë‹µ ê³µê°œ</p>
        </div>

        <div class="bg-gray-200 h-2 w-full">
            <div id="progress-bar" class="bg-emerald-400 h-2 transition-all duration-300" style="width: 0%"></div>
        </div>

        <div id="quiz-container" class="p-8 text-center fade-in">
            <div class="mb-6">
                <span class="text-sm text-gray-500 mb-1 block">ë¬¸ì œ <span id="current-index">1</span> / <span id="total-count">10</span></span>
                <h2 id="question-word" class="text-5xl font-bold text-gray-800 mb-2"></h2>
                <p id="status-msg" class="text-gray-500 font-medium h-8 text-sm"></p>
            </div>

            <div class="space-y-4">
                <div class="relative">
                    <label id="input-label" class="block text-left text-sm font-bold text-gray-700 mb-1">ëœ»ì„ ì…ë ¥í•˜ì„¸ìš” (í•œêµ­ì–´)</label>
                    <input type="text" id="user-input" 
                        class="w-full px-4 py-3 rounded-lg border-2 border-gray-300 focus:border-emerald-500 focus:outline-none transition-colors text-lg text-center"
                        placeholder="ì •ë‹µ ì…ë ¥" autocomplete="off">
                </div>

                <button id="submit-btn" onclick="checkAnswer()" 
                    class="w-full bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-3 rounded-lg transition-transform active:scale-95 shadow-md">
                    í™•ì¸
                </button>
                
                <div id="feedback" class="h-10 text-sm font-bold flex items-center justify-center whitespace-pre-line"></div>
            </div>
        </div>

        <div id="result-container" class="hidden p-8 text-center fade-in">
            <h2 class="text-3xl font-bold text-gray-800 mb-2">í€´ì¦ˆ ì™„ë£Œ! ğŸ‰</h2>
            <p class="text-lg mb-6 text-gray-600">
                ì´ <span id="final-score" class="font-bold text-emerald-600 text-2xl"></span>ì ì„ íšë“í–ˆìŠµë‹ˆë‹¤.
            </p>
            
            <div id="review-section" class="hidden mb-6 bg-red-50 p-4 rounded-lg border border-red-200">
                <p class="text-red-600 font-bold mb-2">í‹€ë¦° ë‹¨ì–´ê°€ <span id="wrong-count">0</span>ê°œ ìˆìŠµë‹ˆë‹¤.</p>
                <button onclick="startReview()" class="w-full bg-red-500 hover:bg-red-600 text-white font-bold py-2 rounded-lg shadow transition-colors">
                    í‹€ë¦° ë‹¨ì–´ë§Œ ë³µìŠµí•˜ê¸° ğŸ”„
                </button>
            </div>

            <button onclick="location.reload()" class="w-full bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 rounded-lg shadow transition-colors">
                ì²˜ìŒë¶€í„° ë‹¤ì‹œ í•˜ê¸° (ì „ì²´ ë¦¬ì…‹)
            </button>
        </div>
    </div>

    <script>
        // ì›ë³¸ ë°ì´í„°
       const vocabularyData = [
    { kanji: "ç›¸äº’", kana: "ãã†ã”", meaning: ["ìƒí˜¸", "ì„œë¡œ"] },
    { kanji: "è£œã†", kana: "ãŠããªã†", meaning: ["ë³´ì™„í•˜ë‹¤", "ë³´ì¶©í•˜ë‹¤"] },
    { kanji: "è‡³æ€¥", kana: "ã—ãã‚…ã†", meaning: ["ì§€ê¸‰", "ë§¤ìš° ê¸‰í•¨"] },
    { kanji: "ç‡ç›´ãª", kana: "ãã£ã¡ã‚‡ããª", meaning: ["ì†”ì§í•œ"] },
    { kanji: "è¦æ¨¡", kana: "ãã¼", meaning: ["ê·œëª¨"] },
    { kanji: "è£…ç½®", kana: "ãã†ã¡", meaning: ["ì¥ì¹˜"] },
    { kanji: "æŠ½è±¡çš„ãª", kana: "ã¡ã‚…ã†ã—ã‚‡ã†ã¦ããª", meaning: ["ì¶”ìƒì ì¸"] },
    { kanji: "è¾›ã„", kana: "ã‹ã‚‰ã„", meaning: ["ë§µë‹¤", "ê´´ë¡­ë‹¤"] },
    { kanji: "è§¦ã‚Œã‚‹", kana: "ãµã‚Œã‚‹", meaning: ["ë‹¿ë‹¤", "ì–¸ê¸‰í•˜ë‹¤"] },
    { kanji: "æ™¯è‰²", kana: "ã‘ã—ã", meaning: ["ê²½ì¹˜"] },
    { kanji: "å ã‚ã‚‹", kana: "ã—ã‚ã‚‹", meaning: ["ì°¨ì§€í•˜ë‹¤", "ì ìœ í•˜ë‹¤"] },
    { kanji: "è¿”å´", kana: "ã¸ã‚“ãã‚ƒã", meaning: ["ë°˜ë‚©"] },
    { kanji: "å‰Šé™¤", kana: "ã•ãã˜ã‚‡", meaning: ["ì‚­ì œ"] },
    { kanji: "å°Šé‡ã™ã‚‹", kana: "ãã‚“ã¡ã‚‡ã†ã™ã‚‹", meaning: ["ì¡´ì¤‘í•˜ë‹¤"] },
    { kanji: "å‚™ãˆã‚‹", kana: "ããªãˆã‚‹", meaning: ["ëŒ€ë¹„í•˜ë‹¤", "ê°–ì¶”ë‹¤"] },
    { kanji: "æ²»ç™‚", kana: "ã¡ã‚Šã‚‡ã†", meaning: ["ì¹˜ë£Œ"] },
    { kanji: "é˜²ç½", kana: "ã¼ã†ã•ã„", meaning: ["ë°©ì¬"] },
    { kanji: "éš£", kana: "ã¨ãªã‚Š", meaning: ["ì˜†", "ì´ì›ƒ"] },
    { kanji: "æ•—ã‚Œã‚‹", kana: "ã‚„ã¶ã‚Œã‚‹", meaning: ["íŒ¨ë°°í•˜ë‹¤", "ì§€ë‹¤"] },
    { kanji: "åœ°å…ƒ", kana: "ã˜ã‚‚ã¨", meaning: ["ê³ ì¥", "í˜„ì§€"] },
    { kanji: "è¦æ±‚", kana: "ã‚ˆã†ãã‚…ã†", meaning: ["ìš”êµ¬"] },
    { kanji: "å¯†æ¥ãª", kana: "ã¿ã£ã›ã¤ãª", meaning: ["ë°€ì ‘í•œ"] },
    { kanji: "é‡", kana: "ã¯ã‚Š", meaning: ["ë°”ëŠ˜"] },
    { kanji: "ç„¦ç‚¹", kana: "ã—ã‚‡ã†ã¦ã‚“", meaning: ["ì´ˆì "] },
    { kanji: "æ’®å½±", kana: "ã•ã¤ãˆã„", meaning: ["ì´¬ì˜"] },
    { kanji: "ç•¥ã™ã‚‹", kana: "ã‚Šã‚ƒãã™ã‚‹", meaning: ["ìƒëµí•˜ë‹¤", "ì¤„ì´ë‹¤"] },
    { kanji: "ç ´ç‰‡", kana: "ã¯ã¸ã‚“", meaning: ["íŒŒí¸"] },
    { kanji: "ä¸–ã®ä¸­", kana: "ã‚ˆã®ãªã‹", meaning: ["ì„¸ìƒ", "ì„¸ê°„"] },
    { kanji: "æ¸…æ½”ãª", kana: "ã›ã„ã‘ã¤ãª", meaning: ["ì²­ê²°í•œ"] },
    { kanji: "å‹§èª˜", kana: "ã‹ã‚“ã‚†ã†", meaning: ["ê¶Œìœ "] },
    { kanji: "ç¥ã†", kana: "ã„ã‚ã†", meaning: ["ì¶•í•˜í•˜ë‹¤"] },
    { kanji: "éš ã™", kana: "ã‹ãã™", meaning: ["ìˆ¨ê¸°ë‹¤"] },
    { kanji: "è±Šå¯Œãª", kana: "ã»ã†ãµãª", meaning: ["í’ë¶€í•œ"] },
    { kanji: "æ”¹ã‚ã¦", kana: "ã‚ã‚‰ãŸã‚ã¦", meaning: ["ë‹¤ì‹œ", "ìƒˆë¡­ê²Œ"] },
    { kanji: "èª¿ç¯€", kana: "ã¡ã‚‡ã†ã›ã¤", meaning: ["ì¡°ì ˆ"] },
    { kanji: "å§¿å‹¢", kana: "ã—ã›ã„", meaning: ["ìì„¸"] },
    { kanji: "æ‹¡å……", kana: "ã‹ãã˜ã‚…ã†", meaning: ["í™•ì¶©"] },
    { kanji: "æå®³", kana: "ãã‚“ãŒã„", meaning: ["ì†í•´"] },
    { kanji: "ç©ã‚€", kana: "ã¤ã‚€", meaning: ["ìŒ“ë‹¤"] },
    { kanji: "è¡Œäº‹", kana: "ãã‚‡ã†ã˜", meaning: ["í–‰ì‚¬"] },
    { kanji: "æ¨¡ç¯„", kana: "ã‚‚ã¯ã‚“", meaning: ["ëª¨ë²”"] },
    { kanji: "ç¾è±¡", kana: "ã’ã‚“ã—ã‚‡ã†", meaning: ["í˜„ìƒ"] },
    { kanji: "é€ƒäº¡", kana: "ã¨ã†ã¼ã†", meaning: ["ë„ë§"] },
    { kanji: "è©³ã—ã„", kana: "ãã‚ã—ã„", meaning: ["ìì„¸í•˜ë‹¤", "ìƒì„¸í•˜ë‹¤"] },
    { kanji: "å¤§å¹…ã«", kana: "ãŠãŠã¯ã°ã«", meaning: ["ëŒ€í­ì ìœ¼ë¡œ"] },
    { kanji: "æ¥µç«¯ãª", kana: "ãã‚‡ããŸã‚“ãª", meaning: ["ê·¹ë‹¨ì ì¸"] },
    { kanji: "æ‚”ã—ã„", kana: "ãã‚„ã—ã„", meaning: ["ë¶„í•˜ë‹¤", "ì–µìš¸í•˜ë‹¤"] },
    { kanji: "æˆ»ã™", kana: "ã‚‚ã©ã™", meaning: ["ë˜ëŒë¦¬ë‹¤"] },
    { kanji: "å¹¼ç¨šãª", kana: "ã‚ˆã†ã¡ãª", meaning: ["ìœ ì¹˜í•œ"] },
    { kanji: "æ†ã„", kana: "ã«ãã„", meaning: ["ë°‰ë‹¤"] },
    { kanji: "è²´é‡ãª", kana: "ãã¡ã‚‡ã†ãª", meaning: ["ê·€ì¤‘í•œ"] },
    { kanji: "ç«¶ã†", kana: "ããã†", meaning: ["ê²¨ë£¨ë‹¤", "ê²½ìŸí•˜ë‹¤"] },
    { kanji: "ç¶™ç¶š", kana: "ã‘ã„ãã", meaning: ["ê³„ì†"] },
    { kanji: "æ€ªã—ã„", kana: "ã‚ã‚„ã—ã„", meaning: ["ìˆ˜ìƒí•˜ë‹¤", "ê´´ì´í•˜ë‹¤"] },
    { kanji: "æ‰¹è©•", kana: "ã²ã²ã‚‡ã†", meaning: ["ë¹„í‰"] },
    { kanji: "åœ§å‹", kana: "ã‚ã£ã—ã‚‡ã†", meaning: ["ì••ìŠ¹"] },
    { kanji: "å®¹å§¿", kana: "ã‚ˆã†ã—", meaning: ["ìš©ëª¨", "ì™¸ëª¨"] },
    { kanji: "é™¤ã", kana: "ã®ãã", meaning: ["ì œì™¸í•˜ë‹¤", "ì œê±°í•˜ë‹¤"] },
    { kanji: "å‚·ã‚€", kana: "ã„ãŸã‚€", meaning: ["ìƒí•˜ë‹¤", "ì†ìƒë˜ë‹¤"] },
    { kanji: "è²¿æ˜“", kana: "ã¼ã†ãˆã", meaning: ["ë¬´ì—­"] },
    { kanji: "çœç•¥", kana: "ã—ã‚‡ã†ã‚Šã‚ƒã", meaning: ["ìƒëµ"] },
    { kanji: "æ‹’å¦", kana: "ãã‚‡ã²", meaning: ["ê±°ë¶€"] },
    { kanji: "ç´ã‚ã‚‹", kana: "ãŠã•ã‚ã‚‹", meaning: ["ë‚©ì…í•˜ë‹¤", "ë‚©ë¶€í•˜ë‹¤"] },
    { kanji: "ä¼´ã†", kana: "ã¨ã‚‚ãªã†", meaning: ["ë”°ë¥´ë‹¤", "ë™ë°˜í•˜ë‹¤"] },
    { kanji: "åŠ£ã‚‹", kana: "ãŠã¨ã‚‹", meaning: ["ë’¤ë–¨ì–´ì§€ë‹¤", "ì—´ë“±í•˜ë‹¤"] },
    { kanji: "é¡˜æœ›", kana: "ãŒã‚“ã¼ã†", meaning: ["ì†Œë§", "ë°”ëŒ"] },
    { kanji: "å«ã‚ã‚‹", kana: "ãµãã‚ã‚‹", meaning: ["í¬í•¨í•˜ë‹¤", "í¬í•¨ì‹œí‚¤ë‹¤"] },
    { kanji: "å›²ã‚€", kana: "ã‹ã“ã‚€", meaning: ["ë‘˜ëŸ¬ì‹¸ë‹¤", "ì—ì›Œì‹¸ë‹¤"] },
    { kanji: "æ²¹æ–­", kana: "ã‚†ã ã‚“", meaning: ["ë°©ì‹¬"] },
    { kanji: "å¹¼ã„", kana: "ãŠã•ãªã„", meaning: ["ì–´ë¦¬ë‹¤"] },
    { kanji: "æ¡ã‚‹", kana: "ã«ãã‚‹", meaning: ["ì¥ë‹¤", "ì¡ë‹¤"] },
    { kanji: "å¯†é–‰", kana: "ã¿ã£ãºã„", meaning: ["ë°€í"] },
    { kanji: "çµã‚‹", kana: "ã—ã¼ã‚‹", meaning: ["ì§œë‹¤", "ë²”ìœ„ë¥¼ ì¢íˆë‹¤"] },
    { kanji: "å‚ç›´", kana: "ã™ã„ã¡ã‚‡ã", meaning: ["ìˆ˜ì§"] },
    { kanji: "æ¥", kana: "ã¯ã˜", meaning: ["ë¶€ë„ëŸ¬ì›€", "ì°½í”¼"] },
    { kanji: "ä¹±ã‚Œã‚‹", kana: "ã¿ã ã‚Œã‚‹", meaning: ["ííŠ¸ëŸ¬ì§€ë‹¤", "ì–´ì§€ëŸ¬ì›Œì§€ë‹¤"] },
    { kanji: "æŸ”è»Ÿãª", kana: "ã˜ã‚…ã†ãªã‚“ãª", meaning: ["ìœ ì—°í•œ"] },
    { kanji: "ç­‰ã—ã„", kana: "ã²ã¨ã—ã„", meaning: ["ê°™ë‹¤", "ë™ë“±í•˜ë‹¤"] },
    { kanji: "åœ§å€’çš„", kana: "ã‚ã£ã¨ã†ã¦ã", meaning: ["ì••ë„ì "] },
    { kanji: "å¼·ç«", kana: "ã¤ã‚ˆã³", meaning: ["ì„¼ë¶ˆ"] },
    { kanji: "è»½å‚·", kana: "ã‘ã„ã—ã‚‡ã†", meaning: ["ê²½ìƒ", "ê°€ë²¼ìš´ ë¶€ìƒ"] },
    { kanji: "æŠ±ãˆã‚‹", kana: "ã‹ã‹ãˆã‚‹", meaning: ["ì•ˆë‹¤", "ê»´ì•ˆë‹¤"] },
    { kanji: "è² æ‹…", kana: "ãµãŸã‚“", meaning: ["ë¶€ë‹´"] },
    { kanji: "æ±‚äºº", kana: "ãã‚…ã†ã˜ã‚“", meaning: ["êµ¬ì¸"] },
    { kanji: "æ˜ ã‚‹", kana: "ã†ã¤ã‚‹", meaning: ["ë¹„ì¹˜ë‹¤"] },
    { kanji: "æ€–ã„", kana: "ã“ã‚ã„", meaning: ["ë¬´ì„­ë‹¤"] },
    { kanji: "ä¸‹æ—¬", kana: "ã’ã˜ã‚…ã‚“", meaning: ["í•˜ìˆœ"] },
    { kanji: "ç·é¡", kana: "ãã†ãŒã", meaning: ["ì´ì•¡"] },
    { kanji: "å†·è”µåº«", kana: "ã‚Œã„ãã†ã“", meaning: ["ëƒ‰ì¥ê³ "] },
    { kanji: "æ¹¿ã‚‹", kana: "ã—ã‚ã‚‹", meaning: ["ìŠµê¸° ì°¨ë‹¤", "ì¶•ì¶•í•˜ë‹¤"] },
    { kanji: "é™ºã—ã„", kana: "ã‘ã‚ã—ã„", meaning: ["í—˜í•˜ë‹¤"] },
    { kanji: "å€’ã™", kana: "ãŸãŠã™", meaning: ["ì“°ëŸ¬ëœ¨ë¦¬ë‹¤"] },
    { kanji: "æŠ½é¸", kana: "ã¡ã‚…ã†ã›ã‚“", meaning: ["ì¶”ì²¨"] },
    { kanji: "æ¯”è¼ƒçš„", kana: "ã²ã‹ãã¦ã", meaning: ["ë¹„êµì "] },
    { kanji: "é›¢ã‚Œã‚‹", kana: "ã¯ãªã‚Œã‚‹", meaning: ["ë–¨ì–´ì§€ë‹¤", "ë©€ì–´ì§€ë‹¤"] },
    { kanji: "ä¸‹é™", kana: "ã‹ã“ã†", meaning: ["í•˜ê°•"] },
    { kanji: "ä¼ç”»", kana: "ãã‹ã", meaning: ["ê¸°íš"] },
    { kanji: "å†åº¦", kana: "ã•ã„ã©", meaning: ["ë‘ ë²ˆ", "ì¬ì°¨"] },
    { kanji: "è‘—ã—ã„", kana: "ã„ã¡ã˜ã‚‹ã—ã„", meaning: ["í˜„ì €í•˜ë‹¤", "ë‘ë“œëŸ¬ì§€ë‹¤"] },
    { kanji: "å’Œã‚„ã‹ãª", kana: "ãªã”ã‚„ã‹ãª", meaning: ["ë¶€ë“œëŸ¬ìš´", "ì˜¨í™”í•œ"] },
    { kanji: "å£°æ´", kana: "ã›ã„ãˆã‚“", meaning: ["ì„±ì›"] },
    { kanji: "å‡¦ç†", kana: "ã—ã‚‡ã‚Š", meaning: ["ì²˜ë¦¬"] },
    { kanji: "å‚¾ã", kana: "ã‹ãŸã‚€ã", meaning: ["ê¸°ìš¸ë‹¤"] },
    { kanji: "æ†ã‚€", kana: "ã«ãã‚€", meaning: ["ë¯¸ì›Œí•˜ë‹¤", "ì¦ì˜¤í•˜ë‹¤"] },
    { kanji: "å¶ç„¶", kana: "ãã†ãœã‚“", meaning: ["ìš°ì—°íˆ"] },
    { kanji: "åˆºæ¿€", kana: "ã—ã’ã", meaning: ["ìê·¹"] },
    { kanji: "æƒ…æ™¯", kana: "ã˜ã‚‡ã†ã‘ã„", meaning: ["ì •ê²½"] },
    { kanji: "ä¹ã—ã„", kana: "ã¨ã¼ã—ã„", meaning: ["ë¶€ì¡±í•˜ë‹¤", "ëª¨ìë¼ë‹¤"] },
    { kanji: "ä»‹è­·", kana: "ã‹ã„ã”", meaning: ["ê°œí˜¸", "ê°„ë³‘"] },
    { kanji: "å–„è‰¯ãª", kana: "ãœã‚“ã‚Šã‚‡ã†ãª", meaning: ["ì„ ëŸ‰í•œ"] },
    { kanji: "ç„¦ã‚‹", kana: "ã‚ã›ã‚‹", meaning: ["ì´ˆì¡°í•´í•˜ë‹¤", "ì•ˆë‹¬í•˜ë‹¤"] },
    { kanji: "è³›å¦", kana: "ã•ã‚“ã´", meaning: ["ì°¬ë¶€", "ì°¬ë°˜"] },
    { kanji: "è¨˜æ†¶", kana: "ããŠã", meaning: ["ê¸°ì–µ"] },
    { kanji: "å¹³ç­‰", kana: "ã³ã‚‡ã†ã©ã†", meaning: ["í‰ë“±"] },
    { kanji: "å‹™ã‚ã‚‹", kana: "ã¤ã¨ã‚ã‚‹", meaning: ["ë§¡ë‹¤", "ë…¸ë ¥í•˜ë‹¤"] },
    { kanji: "ç´ æ", kana: "ãã–ã„", meaning: ["ì†Œì¬"] },
    { kanji: "å‰ã„", kana: "ãˆã‚‰ã„", meaning: ["í›Œë¥­í•˜ë‹¤", "ìœ„ëŒ€í•˜ë‹¤"] },
    { kanji: "è©³ç´°", kana: "ã—ã‚‡ã†ã•ã„", meaning: ["ìƒì„¸"] },
    { kanji: "é€”ç«¯ã«", kana: "ã¨ãŸã‚“ã«", meaning: ["ê°‘ìê¸°", "í•˜ìë§ˆì"] },
    { kanji: "åˆ†æ", kana: "ã¶ã‚“ã›ã", meaning: ["ë¶„ì„"] },
    { kanji: "çµ¡ã¾ã‚‹", kana: "ã‹ã‚‰ã¾ã‚‹", meaning: ["ì–½íˆë‹¤"] },
    { kanji: "è¾²è–¬", kana: "ã®ã†ã‚„ã", meaning: ["ë†ì•½"] },
    { kanji: "è­¦å‚™", kana: "ã‘ã„ã³", meaning: ["ê²½ë¹„"] },
    { kanji: "é®®ã‚„ã‹ãª", kana: "ã‚ã–ã‚„ã‹ãª", meaning: ["ì„ ëª…í•œ"] },
    { kanji: "å„ªç§€ãª", kana: "ã‚†ã†ã—ã‚…ã†ãª", meaning: ["ìš°ìˆ˜í•œ"] },
    { kanji: "å¤–ã‚Œã‚‹", kana: "ã¯ãšã‚Œã‚‹", meaning: ["ë¹ ì§€ë‹¤", "ë¹—ë‚˜ê°€ë‹¤"] },
    { kanji: "è¿·ã†", kana: "ã¾ã‚ˆã†", meaning: ["í—¤ë§¤ë‹¤", "ë§ì„¤ì´ë‹¤"] },
    { kanji: "ä¸–é–“", kana: "ã›ã‘ã‚“", meaning: ["ì„¸ê°„", "ì„¸ìƒ"] },
    { kanji: "å‹‡ã¾ã—ã„", kana: "ã„ã•ã¾ã—ã„", meaning: ["ìš©ê°í•˜ë‹¤", "í™œë°œí•˜ë‹¤"] },
    { kanji: "é‹è³ƒ", kana: "ã†ã‚“ã¡ã‚“", meaning: ["ìš´ì„"] },
    { kanji: "èƒŒéª¨", kana: "ã›ã¼ã­", meaning: ["ë“±ë¼ˆ", "ì²™ì¶”"] },
    { kanji: "å®Ÿè·µ", kana: "ã˜ã£ã›ã‚“", meaning: ["ì‹¤ì²œ"] },
    { kanji: "è¡£è£…", kana: "ã„ã—ã‚‡ã†", meaning: ["ì˜ìƒ"] },
    { kanji: "æ¡æ‰‹", kana: "ã‚ãã—ã‚…", meaning: ["ì•…ìˆ˜"] },
    { kanji: "ç¤¼å„€", kana: "ã‚Œã„ã", meaning: ["ì˜ˆì˜"] },
    { kanji: "è…•", kana: "ã†ã§", meaning: ["íŒ”", "ì†œì”¨"] },
    { kanji: "é–‹å‚¬", kana: "ã‹ã„ã•ã„", meaning: ["ê°œìµœ"] },
    { kanji: "å‡ºä¸–", kana: "ã—ã‚…ã£ã›", meaning: ["ì¶œì„¸"] },
    { kanji: "è¨ªã‚Œã‚‹", kana: "ãŠã¨ãšã‚Œã‚‹", meaning: ["ë°©ë¬¸í•˜ë‹¤", "ì°¾ì•„ì˜¤ë‹¤"] },
    { kanji: "é ¼ã‚Š", kana: "ãŸã‚ˆã‚Š", meaning: ["ì—°ê³ ", "ì˜ì§€"] },
    { kanji: "ä¼çµ±", kana: "ã§ã‚“ã¨ã†", meaning: ["ì „í†µ"] },
    { kanji: "æš®ã‚‰ã™", kana: "ãã‚‰ã™", meaning: ["ì‚´ë‹¤", "ìƒí™œí•˜ë‹¤"] },
    { kanji: "è±¡å¾´", kana: "ã—ã‚‡ã†ã¡ã‚‡ã†", meaning: ["ìƒì§•"] },
    { kanji: "ä¸ãˆã‚‹", kana: "ã‚ãŸãˆã‚‹", meaning: ["ì£¼ë‹¤"] },
    { kanji: "æ¿€ã—ã„", kana: "ã¯ã’ã—ã„", meaning: ["ì‹¬í•˜ë‹¤", "ê²©ë ¬í•˜ë‹¤"] },
    { kanji: "ç®¡ç†", kana: "ã‹ã‚“ã‚Š", meaning: ["ê´€ë¦¬"] },
    { kanji: "ç™»éŒ²", kana: "ã¨ã†ã‚ã", meaning: ["ë“±ë¡"] },
    { kanji: "ç¦ç¥‰", kana: "ãµãã—", meaning: ["ë³µì§€"] },
    { kanji: "èª˜ã†", kana: "ã•ãã†", meaning: ["ê¶Œìœ í•˜ë‹¤", "ìœ ë„í•˜ë‹¤"] },
    { kanji: "è¨è«–", kana: "ã¨ã†ã‚ã‚“", meaning: ["í† ë¡ "] },
    { kanji: "å¤‰æ›´", kana: "ã¸ã‚“ã“ã†", meaning: ["ë³€ê²½"] },
    { kanji: "å±ã™ã‚‹", kana: "ããã™ã‚‹", meaning: ["ì†í•˜ë‹¤"] },
    { kanji: "å°ã", kana: "ã¿ã¡ã³ã", meaning: ["ì´ëŒë‹¤", "ì§€ë„í•˜ë‹¤"] },
    { kanji: "æ‰±ã†", kana: "ã‚ã¤ã‹ã†", meaning: ["ë‹¤ë£¨ë‹¤", "ì·¨ê¸‰í•˜ë‹¤"] },
    { kanji: "åç©«", kana: "ã—ã‚…ã†ã‹ã", meaning: ["ìˆ˜í™•"] },
    { kanji: "ç©æ¥µçš„ãª", kana: "ã›ã£ãã‚‡ãã¦ããª", meaning: ["ì ê·¹ì ì¸"] },
    { kanji: "å‹¢ã„", kana: "ã„ããŠã„", meaning: ["ê¸°ì„¸"] },
    { kanji: "æŠµæŠ—", kana: "ã¦ã„ã“ã†", meaning: ["ì €í•­"] },
    { kanji: "çµ„ç¹”", kana: "ãã—ã", meaning: ["ì¡°ì§"] },
    { kanji: "è‚©", kana: "ã‹ãŸ", meaning: ["ì–´ê¹¨"] },
    { kanji: "è‡³ã‚‹ã¨ã“ã‚", kana: "ã„ãŸã‚‹ã¨ã“ã‚", meaning: ["ë„ì²˜", "ëª¨ë“  ì¥ì†Œ"] },
    { kanji: "å‰Šã‚‹", kana: "ã‘ãšã‚‹", meaning: ["ê¹ë‹¤", "ì‚­ê°í•˜ë‹¤"] },
    { kanji: "çœŸå‰£ãª", kana: "ã—ã‚“ã‘ã‚“ãª", meaning: ["ì§„ì§€í•œ"] },
    { kanji: "è¬›ç¾©", kana: "ã“ã†ã", meaning: ["ê°•ì˜"] },
    { kanji: "åŠªã‚ã‚‹", kana: "ã¤ã¨ã‚ã‚‹", meaning: ["ë…¸ë ¥í•˜ë‹¤", "í˜ì“°ë‹¤"] },
    { kanji: "å¯„ä»˜", kana: "ããµ", meaning: ["ê¸°ë¶€"] },
    { kanji: "æœãŸã™", kana: "ã¯ãŸã™", meaning: ["ì™„ìˆ˜í•˜ë‹¤", "ë‹¬ì„±í•˜ë‹¤"] },
    { kanji: "å³åº§ã«", kana: "ããã–ã«", meaning: ["ì¦‰ì„ì—ì„œ", "ê·¸ ìë¦¬ì—ì„œ"] },
    { kanji: "æ‹›å¾…", kana: "ã—ã‚‡ã†ãŸã„", meaning: ["ì´ˆëŒ€"] },
    { kanji: "è²¬ã‚ã‚‹", kana: "ã›ã‚ã‚‹", meaning: ["ì±…ë§í•˜ë‹¤", "ë‚˜ë¬´ë¼ë‹¤"] }
];

        let currentIndex = 0;
        let score = 0;
        let currentStep = 'meaning'; // 'meaning' (ëœ») or 'reading' (ë°œìŒ)
        let quizList = [];           // í˜„ì¬ ì§„í–‰ ì¤‘ì¸ í€´ì¦ˆ ë¦¬ìŠ¤íŠ¸
        let incorrectList = [];      // í‹€ë¦° ë‹¨ì–´ ì €ì¥ ë¦¬ìŠ¤íŠ¸
        let isReviewMode = false;    // ë³µìŠµ ëª¨ë“œ ì—¬ë¶€
        let isProcessing = false;    // ì •ë‹µ ì²˜ë¦¬ ì¤‘ ì¤‘ë³µ ì…ë ¥ ë°©ì§€

        // DOM ìš”ì†Œ
        const elements = {
            questionWord: document.getElementById('question-word'),
            inputLabel: document.getElementById('input-label'),
            userInput: document.getElementById('user-input'),
            statusMsg: document.getElementById('status-msg'),
            feedback: document.getElementById('feedback'),
            progressBar: document.getElementById('progress-bar'),
            currentIndex: document.getElementById('current-index'),
            totalCount: document.getElementById('total-count'),
            quizContainer: document.getElementById('quiz-container'),
            resultContainer: document.getElementById('result-container'),
            finalScore: document.getElementById('final-score'),
            reviewSection: document.getElementById('review-section'),
            wrongCount: document.getElementById('wrong-count'),
            headerBg: document.getElementById('header-bg'),
            headerTitle: document.getElementById('header-title'),
            headerDesc: document.getElementById('header-desc'),
            submitBtn: document.getElementById('submit-btn')
        };

        // ë°°ì—´ ì„ê¸° (Fisher-Yates)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // ì´ˆê¸°í™” ë° ì „ì²´ ì‹œì‘
        function initQuiz() {
            quizList = shuffleArray([...vocabularyData]);
            incorrectList = [];
            isReviewMode = false;
            score = 0;
            currentIndex = 0;
            
            updateHeaderUI();
            startCycle();
        }

        // ë³µìŠµ ëª¨ë“œ ì‹œì‘
        function startReview() {
            quizList = shuffleArray([...incorrectList]);
            incorrectList = []; // ë³µìŠµ ì¤‘ ë˜ í‹€ë¦° ê²ƒë§Œ ë‚¨ê¸°ê¸° ìœ„í•´ ì´ˆê¸°í™” (ì„ íƒ ì‚¬í•­, ì—¬ê¸°ì„  ì¬ë„ì „ìœ¼ë¡œ ê°„ì£¼)
            // ë§Œì•½ ë³µìŠµ ë•Œ ë§ì¶”ë©´ ë¦¬ìŠ¤íŠ¸ì—ì„œ ë¹ ì§€ê²Œ í•˜ë ¤ë©´ ìœ„ë¥¼ ìœ ì§€, 
            // ë³µìŠµ ë•Œë„ í‹€ë¦¬ë©´ ë‹¤ìŒ ë³µìŠµì— ë‚¨ê¸°ë ¤ë©´ ë¡œì§ í•„ìš”.
            // ì—¬ê¸°ì„œëŠ” 'ì´ë²ˆ ë³µìŠµ ë¼ìš´ë“œ'ë¥¼ ìœ„í•œ ì´ˆê¸°í™”.
            
            isReviewMode = true;
            score = 0;
            currentIndex = 0;
            
            // UI ë³€ê²½
            elements.resultContainer.classList.add('hidden');
            elements.quizContainer.classList.remove('hidden');
            
            updateHeaderUI();
            startCycle();
        }

        function updateHeaderUI() {
            if (isReviewMode) {
                elements.headerBg.className = "bg-orange-500 p-4 text-white text-center transition-colors duration-500";
                elements.headerTitle.innerText = "ì˜¤ë‹µ ë³µìŠµ ëª¨ë“œ";
                elements.headerDesc.innerText = "í‹€ë¦° ë‹¨ì–´ë¥¼ í™•ì‹¤í•˜ê²Œ ì™¸ì›Œë´…ì‹œë‹¤!";
            } else {
                elements.headerBg.className = "bg-emerald-600 p-4 text-white text-center transition-colors duration-500";
                elements.headerTitle.innerText = "JLPT N2 ë‹¨ì–´ì¥";
                elements.headerDesc.innerText = "ìˆœì„œëŠ” ëœë¤, ì˜¤ë‹µ ì‹œ ì •ë‹µ ê³µê°œ";
            }
        }

        function startCycle() {
            elements.totalCount.innerText = quizList.length;
            loadQuestion();

            // ì—”í„°í‚¤ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ (ì¤‘ë³µ ë°©ì§€)
            elements.userInput.onkeypress = function(event) {
                if (event.key === "Enter" && !isProcessing) {
                    checkAnswer();
                }
            };
        }

        function loadQuestion() {
            const currentData = quizList[currentIndex];
            elements.currentIndex.innerText = currentIndex + 1;
            
            // í”„ë¡œê·¸ë˜ìŠ¤ ë°”
            const progress = (currentIndex / quizList.length) * 100;
            elements.progressBar.style.width = `${progress}%`;

            // ë¬¸ì œ ì„¸íŒ…
            elements.questionWord.innerText = currentData.kanji;
            elements.userInput.value = '';
            elements.userInput.disabled = false;
            elements.userInput.focus();
            elements.feedback.innerText = '';
            
            // 1ë‹¨ê³„: ëœ» ë§ì¶”ê¸°
            currentStep = 'meaning';
            elements.inputLabel.innerText = "Step 1. ëœ»ì„ ì…ë ¥í•˜ì„¸ìš” (í•œêµ­ì–´)";
            elements.statusMsg.innerText = "";
            elements.userInput.placeholder = "ëœ» ì…ë ¥";
            
            isProcessing = false;
        }

        function checkAnswer() {
            if (isProcessing) return;
            
            const currentData = quizList[currentIndex];
            const userVal = elements.userInput.value.trim();

            if (!userVal) return;

            isProcessing = true; // ì²˜ë¦¬ ì¤‘ í”Œë˜ê·¸ ì„¤ì •

            if (currentStep === 'meaning') {
                // ëœ» í™•ì¸
                const isCorrect = currentData.meaning.some(m => userVal.includes(m) || m.includes(userVal));
                
                if (isCorrect) {
                    // ì •ë‹µ
                    elements.feedback.className = "h-10 text-sm font-bold text-blue-600 flex items-center justify-center";
                    elements.feedback.innerText = "ì •ë‹µ! â­• ë°œìŒ í€´ì¦ˆë¡œ ë„˜ì–´ê°‘ë‹ˆë‹¤.";
                    
                    setTimeout(() => {
                        proceedToReading(currentData);
                    }, 800);
                } else {
                    // ì˜¤ë‹µ
                    addIncorrectWord(currentData);
                    elements.feedback.className = "h-10 text-sm font-bold text-red-500 flex items-center justify-center";
                    elements.feedback.innerText = `ì˜¤ë‹µ! âŒ ì •ë‹µì€ [${currentData.meaning.join(', ')}] ì…ë‹ˆë‹¤.`;
                    
                    // ì˜¤ë‹µ í™•ì¸ ì‹œê°„ (2ì´ˆ)
                    setTimeout(() => {
                        proceedToReading(currentData);
                    }, 2000);
                }

            } else if (currentStep === 'reading') {
                // ë°œìŒ í™•ì¸
                if (userVal === currentData.kana) {
                    // ì •ë‹µ
                    score++;
                    elements.feedback.className = "h-10 text-sm font-bold text-emerald-600 flex items-center justify-center";
                    elements.feedback.innerText = "ì™„ë²½í•©ë‹ˆë‹¤! â­• ë‹¤ìŒ ë¬¸ì œë¡œ...";
                    
                    setTimeout(() => {
                        nextQuestion();
                    }, 1000);
                } else {
                    // ì˜¤ë‹µ
                    addIncorrectWord(currentData);
                    elements.feedback.className = "h-10 text-sm font-bold text-red-500 flex items-center justify-center";
                    elements.feedback.innerText = `ì˜¤ë‹µ! âŒ ì •ë‹µì€ [${currentData.kana}] ì…ë‹ˆë‹¤.`;
                    
                    setTimeout(() => {
                        nextQuestion();
                    }, 2000);
                }
            }
        }

        // ëœ» ë‹¨ê³„ -> ë°œìŒ ë‹¨ê³„ ì „í™˜
        function proceedToReading(data) {
            currentStep = 'reading';
            elements.inputLabel.innerText = `Step 2. '${data.kanji}'ì˜ ë°œìŒì„ ì…ë ¥í•˜ì„¸ìš” (íˆë¼ê°€ë‚˜)`;
            
            // ëœ» íŒíŠ¸ ë³´ì—¬ì£¼ê¸°
            elements.statusMsg.innerText = `ëœ»: ${data.meaning.join(', ')}`;
            
            elements.userInput.value = '';
            elements.userInput.placeholder = "íˆë¼ê°€ë‚˜ ì…ë ¥";
            elements.feedback.innerText = '';
            elements.userInput.focus();
            isProcessing = false;
        }

        // ì˜¤ë‹µ ë¦¬ìŠ¤íŠ¸ ì¶”ê°€ (ì¤‘ë³µ ë°©ì§€)
        function addIncorrectWord(wordObj) {
            if (!incorrectList.includes(wordObj)) {
                incorrectList.push(wordObj);
            }
        }

        function nextQuestion() {
            currentIndex++;
            if (currentIndex < quizList.length) {
                loadQuestion();
            } else {
                showResult();
            }
        }

        function showResult() {
            elements.quizContainer.classList.add('hidden');
            elements.resultContainer.classList.remove('hidden');
            elements.finalScore.innerText = score + " / " + quizList.length;
            elements.progressBar.style.width = '100%';

            // ë³µìŠµ ì„¹ì…˜ ì²˜ë¦¬
            if (incorrectList.length > 0) {
                elements.reviewSection.classList.remove('hidden');
                elements.wrongCount.innerText = incorrectList.length;
            } else {
                elements.reviewSection.classList.add('hidden');
                // ë§Œì•½ ë³µìŠµ ëª¨ë“œì—ì„œ ë‹¤ ë§ì·„ë‹¤ë©´ ì¶•í•˜ ë©”ì‹œì§€ ê°•í™” ê°€ëŠ¥
                if(isReviewMode) {
                    elements.finalScore.innerText += " (ë³µìŠµ ì™„ë£Œ!)";
                }
            }
        }

        // ìµœì´ˆ ì‹¤í–‰
        initQuiz();
    </script>
</body>
</html>


