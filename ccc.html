<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¼ë‹¨í•©ê²© JLPT N2 (ê³ ë‚œë„ ê±°ê¾¸ë¡œ ì•”ê¸°)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&family=Noto+Sans+JP:wght@400;700&display=swap');
        body { font-family: 'Noto Sans KR', 'Noto Sans JP', sans-serif; }
        .fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .choice-btn { transition: all 0.2s; }
        .choice-btn:active { transform: scale(0.98); }
    </style>
</head>
<body class="bg-slate-100 min-h-screen flex items-center justify-center p-4">

    <div class="bg-white rounded-xl shadow-xl w-full max-w-md overflow-hidden border-t-4 border-indigo-600">
        <div id="header-bg" class="bg-indigo-600 p-5 text-white text-center transition-colors duration-500">
            <h1 id="header-title" class="text-2xl font-bold">JLPT N2 ê±°ê¾¸ë¡œ ì•”ê¸°</h1>
            <p id="header-desc" class="text-sm opacity-80 mt-1">ëœ»ì„ ë³´ê³  í•œì(ìœ ì‚¬ ê¸€ì ì£¼ì˜) ë§ì¶”ê¸°</p>
        </div>

        <div class="bg-gray-200 h-2 w-full">
            <div id="progress-bar" class="bg-indigo-400 h-2 transition-all duration-300" style="width: 0%"></div>
        </div>

        <div id="quiz-container" class="p-6 text-center fade-in">
            <div class="mb-8">
                <span class="text-xs font-bold text-gray-400 tracking-widest mb-2 block uppercase">Question <span id="current-index">1</span> / <span id="total-count">10</span></span>
                
                <h2 id="question-text" class="text-4xl font-bold text-gray-800 mb-3 min-h-[3.5rem] break-keep leading-tight flex items-center justify-center"></h2>
                
                <div class="flex justify-center items-center gap-2">
                    <span id="step-badge" class="bg-indigo-100 text-indigo-700 text-xs font-bold px-3 py-1 rounded-full">Step 1</span>
                    <p id="step-guide" class="text-gray-500 text-sm font-medium"></p>
                </div>
            </div>

            <div id="choices-container" class="grid grid-cols-2 gap-3 mb-4">
                </div>

            <div id="feedback" class="h-12 text-sm font-bold flex items-center justify-center whitespace-pre-line"></div>
        </div>

        <div id="result-container" class="hidden p-8 text-center fade-in">
            <div class="mb-6">
                <div class="inline-block p-4 rounded-full bg-indigo-50 mb-4">
                    <span class="text-4xl">ğŸ†</span>
                </div>
                <h2 class="text-3xl font-bold text-gray-800 mb-2">í•™ìŠµ ì™„ë£Œ!</h2>
                <p class="text-gray-600">ìˆ˜ê³ í•˜ì…¨ìŠµë‹ˆë‹¤.</p>
            </div>
            
            <p class="text-lg mb-8 text-gray-700 bg-gray-50 py-4 rounded-lg border border-gray-100">
                ìµœì¢… ì ìˆ˜: <span id="final-score" class="font-bold text-indigo-600 text-3xl align-middle ml-2"></span>
            </p>
            
            <div id="review-section" class="hidden mb-4">
                <button onclick="startReview()" class="w-full bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 rounded-xl shadow-lg shadow-orange-200 transition-all transform hover:-translate-y-1 flex items-center justify-center gap-2">
                    <span>ğŸ”„</span> í‹€ë¦° ë‹¨ì–´ (<span id="wrong-count">0</span>ê°œ) ë³µìŠµí•˜ê¸°
                </button>
            </div>

            <button onclick="location.reload()" class="w-full bg-gray-800 hover:bg-gray-900 text-white font-bold py-3 rounded-xl shadow-lg transition-all transform hover:-translate-y-1">
                ì²˜ìŒë¶€í„° ë‹¤ì‹œ í•˜ê¸°
            </button>
        </div>
    </div>

    <script>
        // ğŸ”¥ ë°°ì¹˜ 1 (4~8p) ë°ì´í„° + AIê°€ ìƒì„±í•œ 'í•œ ê¸€ìê°€ ê²¹ì¹˜ëŠ”' ê³ ë‚œë„ ì˜¤ë‹µ í¬í•¨
// ê¸°ì¡´ ë°°ì—´(vocabularyData)ì— ì•„ë˜ ë‚´ìš©ì„ ì´ì–´ ë¶™ì—¬ì„œ ì‚¬ìš©í•˜ì„¸ìš”.
const vocabularyData = [
  // --- Page 25 ---
  {
    kanji: "å¶ç„¶", kana: "ãã†ãœã‚“", meaning: ["ìš°ì—°íˆ"],
    wrongKanjis: ["å¶å–„", "é‡ç„¶", "éš…ç„¶"],
    wrongKanas: ["ãã†ãœã‚“", "ããœã‚“", "ãã†ã›ã‚“"]
  },
  {
    kanji: "ç”¨å¿ƒ", kana: "ã‚ˆã†ã˜ã‚“", meaning: ["ì¡°ì‹¬", "ì£¼ì˜"],
    wrongKanjis: ["ç”¨èº«", "è¦å¿ƒ", "æ´‹å¿ƒ"],
    wrongKanas: ["ã‚ˆã†ã—ã‚“", "ã‚ˆã—ã‚“", "ã‚ˆã†ã¡ã‚“"]
  },
  {
    kanji: "é¨’ã€…ã—ã„", kana: "ãã†ãã†ã—ã„", meaning: ["ì‹œë„ëŸ½ë‹¤", "ì†Œë€ìŠ¤ëŸ½ë‹¤"],
    wrongKanjis: ["ç‡¥ã€…ã—ã„", "æ—©ã€…ã—ã„", "äº‰ã€…ã—ã„"],
    wrongKanas: ["ã–ã‚ã–ã‚ã—ã„", "ã•ã‚ãŒã—ã„", "ããã†ã—ã„"]
  },
  {
    kanji: "åç´", kana: "ã—ã‚…ã†ã®ã†", meaning: ["ìˆ˜ë‚©"],
    wrongKanjis: ["åèƒ½", "æ”¶ç´", "å·ç´"],
    wrongKanas: ["ã—ã‚…ã®ã†", "ã—ã‚…ã†ã®", "ã˜ã‚…ã†ã®ã†"]
  },
  {
    kanji: "æ³¨ç›®", kana: "ã¡ã‚…ã†ã‚‚ã", meaning: ["ì£¼ëª©"],
    wrongKanjis: ["æ³¨æœ¨", "ä½ç›®", "å®™ç›®"],
    wrongKanas: ["ã¡ã‚…ã‚‚ã", "ã˜ã‚…ã†ã‚‚ã", "ã¡ã‚…ã†ã‚"]
  },
  {
    kanji: "å°æŸ„", kana: "ã“ãŒã‚‰", meaning: ["ëª¸ì§‘ì´ ì‘ìŒ"],
    wrongKanjis: ["å°æ¯", "å°‘æŸ„", "å°ç©º"],
    wrongKanas: ["ã—ã‚‡ã†ãŒã‚‰", "ã“ã‹ã‚‰", "ãŠãŒã‚‰"]
  },
  {
    kanji: "ç›´æ¥", kana: "ã¡ã‚‡ãã›ã¤", meaning: ["ì§ì ‘"],
    wrongKanjis: ["ç›´æŠ˜", "ç›´èª¬", "ç›´åˆ‡"],
    wrongKanas: ["ã˜ãã›ã¤", "ã¡ã‚‡ããœã¤", "ã¡ã‚‡ã£ã›ã¤"]
  },
  {
    kanji: "ç„¡å£", kana: "ã‚€ãã¡", meaning: ["ê³¼ë¬µí•¨", "ë§ìˆ˜ê°€ ì ìŒ"],
    wrongKanjis: ["ç„¡è¨€", "å‹™å£", "å¤¢å£"],
    wrongKanas: ["ã¶ãã¡", "ã‚€ã“ã†", "ãªãã¡"]
  },
  {
    kanji: "è¡çª", kana: "ã—ã‚‡ã†ã¨ã¤", meaning: ["ì¶©ëŒ"],
    wrongKanjis: ["è¡å‡¸", "å°†çª", "è¡ç‰¹"],
    wrongKanas: ["ã—ã‚‡ã¨ã¤", "ã—ã‚‡ã†ã©ã¤", "ã—ã‚‡ã£ã“ã†"]
  },
  {
    kanji: "å‘æ€¯", kana: "ã²ãã‚‡ã†", meaning: ["ë¹„ê²í•¨"],
    wrongKanjis: ["å‘è„…", "æ¯”æ€¯", "éæ€¯"],
    wrongKanas: ["ã²ãã‚‡", "ã²ã“", "ã³ãã‚‡ã†"]
  },

  // --- Page 26 ---
  {
    kanji: "æ„‰å¿«", kana: "ã‚†ã‹ã„", meaning: ["ìœ ì¾Œí•¨"],
    wrongKanjis: ["è«­å¿«", "æ„‰å›", "æ²¹å¿«"],
    wrongKanas: ["ã‚†ã£ã‹ã„", "ã‚†ãŒã„", "ã‚†ã‘ã„"]
  },
  {
    kanji: "è¨˜æ†¶", kana: "ããŠã", meaning: ["ê¸°ì–µ"],
    wrongKanjis: ["ç´€æ†¶", "è¨˜å„„", "èµ·æ†¶"],
    wrongKanas: ["ãã‚ˆã", "ããŠã", "ããŠã"]
  },
  {
    kanji: "ä¸å¹³", kana: "ãµã¸ã„", meaning: ["ë¶ˆí‰"],
    wrongKanjis: ["ä¸è©•", "æ™®å¹³", "åºœå¹³"],
    wrongKanas: ["ãµã¹ã„", "ã¶ã¸ã„", "ãµã²ã‚‡ã†"]
  },
  {
    kanji: "æ€’ã‚‹", kana: "ãŠã“ã‚‹", meaning: ["í™”ë‚´ë‹¤"],
    wrongKanjis: ["æ•ã‚‹", "åŠªã‚‹", "æã‚‹"],
    wrongKanas: ["ã„ã‹ã‚‹", "ãªã‚‹", "ã—ã‹ã‚‹"]
  },
  {
    kanji: "éå‰°", kana: "ã‹ã˜ã‚‡ã†", meaning: ["ê³¼ì‰"],
    wrongKanjis: ["éä¹—", "éå¸¸", "ç§‘æ¡"],
    wrongKanas: ["ã‹ã˜ã‚‡", "ã‹ã—ã‚‡ã†", "ãŒã˜ã‚‡ã†"]
  },
  {
    kanji: "è‡†ç—…", kana: "ãŠãã³ã‚‡ã†", meaning: ["ê²ì´ ë§ìŒ"],
    wrongKanjis: ["æ†¶ç—…", "èƒ¸ç—…", "å„„ç—…"],
    wrongKanas: ["ã‚ˆãã³ã‚‡ã†", "ãŠãã³ã‚‡", "ã„ãã³ã‚‡ã†"]
  },
  {
    kanji: "å½“åˆ†", kana: "ã¨ã†ã¶ã‚“", meaning: ["ë‹¹ë¶„ê°„"],
    wrongKanjis: ["ç­‰åˆ†", "ç­”åˆ†", "é ­åˆ†"],
    wrongKanas: ["ã©ã†ã¶ã‚“", "ã¨ã¶ã‚“", "ã¨ã†ãµã‚“"]
  },

  // --- Page 27 ---
  {
    kanji: "çœŸå‰£", kana: "ã—ã‚“ã‘ã‚“", meaning: ["ì§„ì§€í•¨"],
    wrongKanjis: ["çœŸæ¤œ", "æ…å‰£", "èº«å‰£"],
    wrongKanas: ["ã—ã‚“ã’ã‚“", "ã˜ã‚…ã‚“ã‘ã‚“", "ã—ã‚“ã‹ã‚“"]
  },
  {
    kanji: "çµ‚æ—¥", kana: "ã—ã‚…ã†ã˜ã¤", meaning: ["ì¢…ì¼", "í•˜ë£¨ ì¢…ì¼"],
    wrongKanjis: ["é›†æ—¥", "é€±æ—¥", "è¡†æ—¥"],
    wrongKanas: ["ã—ã‚…ã˜ã¤", "ã˜ã‚…ã†ã˜ã¤", "ã—ã‚…ã†ã«ã¡"]
  },
  {
    kanji: "å¤±æœ›", kana: "ã—ã¤ã¼ã†", meaning: ["ì‹¤ë§"],
    wrongKanjis: ["å¤±å¿˜", "å®¤æœ›", "å¤±å¿™"],
    wrongKanas: ["ã—ã£ã¼ã†", "ã—ã¤ã‚‚ã†", "ã˜ã¤ã¼ã†"]
  },
  {
    kanji: "ä¾ç„¶", kana: "ã„ãœã‚“", meaning: ["ì—¬ì „í•¨", "ì˜ì—°í•¨"],
    wrongKanjis: ["ä¾å‰", "è¡£ç„¶", "ä»¥ç„¶"],
    wrongKanas: ["ã„ã›ã‚“", "ã„ã­ã‚“", "ãˆãœã‚“"]
  },
  {
    kanji: "å†ä¸‰", kana: "ã•ã„ã•ã‚“", meaning: ["ì—¬ëŸ¬ ë²ˆ", "ì¬ì‚¼"],
    wrongKanjis: ["æœ€ä¸‰", "å†æ•£", "æ‰ä¸‰"],
    wrongKanas: ["ã•ã–ã‚“", "ã•ã„ã–ã‚“", "ã•ã•ã‚“"]
  },
  {
    kanji: "ä¼šè¨ˆ", kana: "ã‹ã„ã‘ã„", meaning: ["íšŒê³„", "ê³„ì‚°"],
    wrongKanjis: ["ä¼šå½¢", "é–‹è¨ˆ", "å›è¨ˆ"],
    wrongKanas: ["ãŒã„ã‘ã„", "ã‹ã„ã’ã„", "ã‹ã£ã‘ã„"]
  },
  {
    kanji: "æŠ€è¡“", kana: "ãã˜ã‚…ã¤", meaning: ["ê¸°ìˆ "],
    wrongKanjis: ["ä¼è¡“", "æŠ€è¿°", "å½è¡“"],
    wrongKanas: ["ãã˜ã‚…ã¤", "ãã—ã‚…ã¤", "ãã˜ã¤"]
  },
  {
    kanji: "åŒåƒš", kana: "ã©ã†ã‚Šã‚‡ã†", meaning: ["ë™ë£Œ"],
    wrongKanjis: ["åŒåŠ´", "å‹•åƒš", "ç«¥åƒš"],
    wrongKanas: ["ã¨ã†ã‚Šã‚‡ã†", "ã©ã‚Šã‚‡ã†", "ã©ã†ã‚"]
  },
  {
    kanji: "ä»•ä¸Šã’ã‚‹", kana: "ã—ã‚ã’ã‚‹", meaning: ["ë§ˆë¬´ë¦¬í•˜ë‹¤", "ì™„ì„±í•˜ë‹¤"],
    wrongKanjis: ["ä»•ä¸Šã‚‹", "è‡³ä¸Šã’ã‚‹", "æŒ‡ä¸Šã’ã‚‹"],
    wrongKanas: ["ã˜ã‚ã’ã‚‹", "ã—ã¨ã’ã‚‹", "ã¤ã‘ã‚ã’ã‚‹"]
  },
  {
    kanji: "æ¦‚è¦", kana: "ãŒã„ã‚ˆã†", meaning: ["ê°œìš”"],
    wrongKanjis: ["æ¦‚å®¹", "æ¦‚ç”¨", "å¤–è¦"],
    wrongKanas: ["ã‹ã„ã‚ˆã†", "ãŒã„ã‚ˆ", "ãŒã‚ˆã†"]
  },

  // --- Page 28 ---
  {
    kanji: "æ™®åŠ", kana: "ãµãã‚…ã†", meaning: ["ë³´ê¸‰"],
    wrongKanjis: ["æ™®ç´š", "ä¸åŠ", "å¸ƒåŠ"],
    wrongKanas: ["ã¶ãã‚…ã†", "ãµãã‚‡", "ã·ãã‚…ã†"]
  },
  {
    kanji: "æ·±åˆ»", kana: "ã—ã‚“ã“ã", meaning: ["ì‹¬ê°í•¨"],
    wrongKanjis: ["èº«åˆ»", "æ·±åˆ»", "çœŸåˆ»"],
    wrongKanas: ["ã˜ã‚“ã“ã", "ã—ã‚“ã”ã", "ã›ã‚“ã“ã"]
  },
  {
    kanji: "ä¸–é–“", kana: "ã›ã‘ã‚“", meaning: ["ì„¸ê°„", "ì„¸ìƒ"],
    wrongKanjis: ["ä¸–ç•Œ", "å‹¢é–“", "æ­£é–“"],
    wrongKanas: ["ã›ã’ã‚“", "ã‚ˆã¾", "ã›ã‹ã‚“"]
  },
  {
    kanji: "é•å", kana: "ã„ã¯ã‚“", meaning: ["ìœ„ë°˜"],
    wrongKanjis: ["ç•°å", "é•é£¯", "ç‚ºå"],
    wrongKanas: ["ã„ã°ã‚“", "ã„ã¸ã‚“", "ã‚†ã¯ã‚“"]
  },
  {
    kanji: "ä¿ã¤", kana: "ãŸã‚‚ã¤", meaning: ["ìœ ì§€í•˜ë‹¤", "ë³´ì¡´í•˜ë‹¤"],
    wrongKanjis: ["æŒã¤", "å‘†ã¤", "è£œã¤"],
    wrongKanas: ["ã»ã¤", "ã»ã†ã¤", "ã¾ã‚‚ã¤"]
  },
  {
    kanji: "å¤–ã™", kana: "ã¯ãšã™", meaning: ["ë–¼ì–´ ë‚´ë‹¤", "ë²—ë‹¤"],
    wrongKanjis: ["å¤–ã‚‹", "é›¢ã™", "è„±ã™"],
    wrongKanas: ["ã»ãšã™", "ãã¨ã™", "ã’ã™ã™"]
  },
  {
    kanji: "ä¹ã—ã„", kana: "ã¨ã¼ã—ã„", meaning: ["ë¶€ì¡±í•˜ë‹¤"],
    wrongKanjis: ["è²§ã—ã„", "èŠã—ã„", "è²¶ã—ã„"],
    wrongKanas: ["ã¾ã¶ã—ã„", "ã•ã³ã—ã„", "ã²ã¨ã—ã„"]
  },
  {
    kanji: "å»ƒæ­¢", kana: "ã¯ã„ã—", meaning: ["íì§€"],
    wrongKanjis: ["ç™ºæ­¢", "æ•—æ­¢", "å»ƒæ­»"],
    wrongKanas: ["ã¯ã—", "ã°ã„ã—", "ã¸ã„ã—"]
  },

  // --- Page 29 ---
  {
    kanji: "çŸ›ç›¾", kana: "ã‚€ã˜ã‚…ã‚“", meaning: ["ëª¨ìˆœ"],
    wrongKanjis: ["çŸ›éˆ", "éœ§ç›¾", "å‹™ç›¾"],
    wrongKanas: ["ã‚€ã—ã‚…ã‚“", "ã‚€ã˜ã‚‡ã‚“", "ã¼ã˜ã‚…ã‚“"]
  },
  {
    kanji: "é ‘ä¸ˆ", kana: "ãŒã‚“ã˜ã‚‡ã†", meaning: ["íŠ¼íŠ¼í•¨"],
    wrongKanjis: ["é ‘çŠ¶", "å²©ä¸ˆ", "å…ƒä¸ˆ"],
    wrongKanas: ["ãŒã‚“ã¡ã‚‡", "ã’ã‚“ã˜ã‚‡ã†", "ã‹ã‚“ã˜ã‚‡ã†"]
  },
  {
    kanji: "ç•³ã‚€", kana: "ãŸãŸã‚€", meaning: ["ì ‘ë‹¤", "ê°œë‹¤"],
    wrongKanjis: ["ç•³ã¾", "éª¨ã‚€", "ç½®ã‚€"],
    wrongKanas: ["ã ã ã‚€", "ãŸãŸã¿", "ã¨ã¨ã‚€"]
  },
  {
    kanji: "å¡ã", kana: "ãµã•ã", meaning: ["ë§‰ë‹¤", "ê°€ë¦¬ë‹¤"],
    wrongKanjis: ["å¯’ã", "å¡ã", "åŸºã"],
    wrongKanas: ["ã»ã•ã", "ã•ã‚ã", "ãµã›ã"]
  },
  {
    kanji: "æ²ç¤º", kana: "ã‘ã„ã˜", meaning: ["ê²Œì‹œ"],
    wrongKanjis: ["å•“ç¤º", "æ­ç¤º", "è¨ˆç¤º"],
    wrongKanas: ["ã’ã„ã˜", "ã‘ã„ã—", "ã‹ã˜"]
  },
  {
    kanji: "å¦¥å½“", kana: "ã ã¨ã†", meaning: ["íƒ€ë‹¹í•¨"],
    wrongKanjis: ["æ‰“å½“", "å •å½“", "é§„å½“"],
    wrongKanas: ["ãŸã¨ã†", "ã ã©ã†", "ã ã¨"]
  },
  {
    kanji: "ç¸®ã‚€", kana: "ã¡ã¢ã‚€", meaning: ["ì¤„ì–´ë“¤ë‹¤"],
    wrongKanjis: ["ç¸®ã‹ã‚€", "ç¸¾ã‚€", "å®¿ã‚€"],
    wrongKanas: ["ã—ã˜ã‚€", "ã¡ã¿ã‚€", "ã™ãã‚€"]
  },
  {
    kanji: "å¿«ã„", kana: "ã“ã“ã‚ã‚ˆã„", meaning: ["ê¸°ë¶„ ì¢‹ë‹¤", "ìƒì¾Œí•˜ë‹¤"],
    wrongKanjis: ["æ€ªã„", "æ‡ã„", "æ‚”ã„"],
    wrongKanas: ["ã¯ã‚„ã„", "ã“ã“ã‚ˆã„", "ã‹ã‚ˆã„"]
  },
  {
    kanji: "å‚¬ä¿ƒ", kana: "ã•ã„ãã", meaning: ["ì¬ì´‰"],
    wrongKanjis: ["æœ€é€Ÿ", "æ‰å‰‡", "é–‹å‚¬"],
    wrongKanas: ["ã•ã„ãã", "ãœã„ãã", "ã—ã‚‡ã†ãã"]
  },
  {
    kanji: "è¡Œæ–¹", kana: "ã‚†ããˆ", meaning: ["í–‰ë°©"],
    wrongKanjis: ["è¡Œã¸", "å¾€æ–¹", "å¾æ–¹"],
    wrongKanas: ["ã“ã†ã»ã†", "ãã‚‡ã†ã»ã†", "ã„ããˆ"]
  },

  // --- Page 30 ---
  {
    kanji: "è«–äº‰", kana: "ã‚ã‚“ãã†", meaning: ["ë…¼ìŸ"],
    wrongKanjis: ["è«–èµ°", "è«­äº‰", "è«–ç‡¥"],
    wrongKanas: ["ã‚ã‚“ãã†", "ã‚Šã‚“ãã†", "ã‚ã"]
  },
  {
    kanji: "å½¹ç›®", kana: "ã‚„ãã‚", meaning: ["ì„ë¬´", "ì—­í• "],
    wrongKanjis: ["å½¹çœ¼", "è–¬ç›®", "è¨³ç›®"],
    wrongKanas: ["ãˆãã‚", "ã‚„ãã‚‚ã", "ã‚„ãã¾"]
  },
  {
    kanji: "å¼•é€€", kana: "ã„ã‚“ãŸã„", meaning: ["ì€í‡´"],
    wrongKanjis: ["éš é€€", "å› é€€", "å°é€€"],
    wrongKanas: ["ãˆã‚“ãŸã„", "ã„ã‚“ã ã„", "ã²ããŸã„"]
  },
  {
    kanji: "æ—¥èª²", kana: "ã«ã£ã‹", meaning: ["ì¼ê³¼"],
    wrongKanjis: ["æ—¥ç§‘", "äºŒèª²", "æ—¥æš‡"],
    wrongKanas: ["ã«ã¡ã‹", "ã«ã£ãŒ", "ã²ã‹"]
  },
  {
    kanji: "ç¯€ç´„", kana: "ã›ã¤ã‚„ã", meaning: ["ì ˆì•½"],
    wrongKanjis: ["åˆ‡ç´„", "æ¥ç´„", "è¨­ç´„"],
    wrongKanas: ["ã›ã£ã‚„ã", "ãœã¤ã‚„ã", "ã›ã¡ã‚„ã"]
  },
  {
    kanji: "åˆ†è§£", kana: "ã¶ã‚“ã‹ã„", meaning: ["ë¶„í•´"],
    wrongKanjis: ["åˆ†ä¼š", "æ–‡è§£", "èè§£"],
    wrongKanas: ["ãµã‚“ã‹ã„", "ã¶ã‚“ãŒã„", "ã·ã‚“ã‹ã„"]
  },
  {
    kanji: "è¦†ã†", kana: "ãŠãŠã†", meaning: ["ë®ë‹¤"],
    wrongKanjis: ["å¾©ã†", "å±¥ã†", "è…¹ã†"],
    wrongKanas: ["ãã¤ãŒãˆã™", "ãµãã†", "ãŠã†"]
  },
  {
    kanji: "ç ´ã‚‹", kana: "ã‚„ã¶ã‚‹", meaning: ["ì°¢ë‹¤", "ê¹¨ë‹¤"],
    wrongKanjis: ["è¢«ã‚‹", "æ³¢ã‚‹", "çš®ã‚‹"],
    wrongKanas: ["ã¯ã‚‹", "ã‹ã¶ã‚‹", "ã—ã¼ã‚‹"]
  },

  // --- Page 31 ---
  {
    kanji: "æ¬ é™¥", kana: "ã‘ã£ã‹ã‚“", meaning: ["ê²°í•¨"],
    wrongKanjis: ["æ¬ æ„Ÿ", "æ±ºé™¥", "æ½”é™¥"],
    wrongKanas: ["ã‘ã‹ã‚“", "ã’ã£ã‹ã‚“", "ã‘ã£ãã‚“"]
  },
  {
    kanji: "æ‰“ã¡æ˜ã‘ã‚‹", kana: "ã†ã¡ã‚ã‘ã‚‹", meaning: ["í„¸ì–´ë†“ë‹¤", "ê³ ë°±í•˜ë‹¤"],
    wrongKanjis: ["æ‰“æ˜ã‘ã‚‹", "ç§»ã¡æ˜ã‘ã‚‹", "å†™ã¡æ˜ã‘ã‚‹"],
    wrongKanas: ["ã¶ã¡ã‚ã‘ã‚‹", "ã†ã¡ã‚ã’ã‚‹", "ã†ã¡ã‹ã‘ã‚‹"]
  },
  {
    kanji: "æ¼ã‚Œã‚‹", kana: "ã‚‚ã‚Œã‚‹", meaning: ["ìƒˆë‹¤", "ëˆ„ì„¤ë˜ë‹¤"],
    wrongKanjis: ["æ¿¡ã‚Œã‚‹", "æ»¿ã‚Œã‚‹", "æ§‹ã‚Œã‚‹"],
    wrongKanas: ["ã¬ã‚Œã‚‹", "ã¯ã‚Œã‚‹", "ãµã‚Œã‚‹"]
  },
  {
    kanji: "å‚¾å‘", kana: "ã‘ã„ã“ã†", meaning: ["ê²½í–¥"],
    wrongKanjis: ["çµŒå‘", "å½¢å‘", "å‚¾è¡Œ"],
    wrongKanas: ["ã’ã„ã“ã†", "ã‘ã„ã”ã†", "ã‘ã“ã†"]
  },
  {
    kanji: "æ¸©åš", kana: "ãŠã‚“ã“ã†", meaning: ["ì˜¨í›„í•¨"],
    wrongKanjis: ["éŸ³åš", "æ©åš", "æ¸©å£"],
    wrongKanas: ["ãŠã‚“ã”ã†", "ã†ã‚“ã“ã†", "ãŠã“ã†"]
  },
  {
    kanji: "æ¿ã‚‹", kana: "ã«ã”ã‚‹", meaning: ["íë ¤ì§€ë‹¤", "íƒí•´ì§€ë‹¤"],
    wrongKanjis: ["ç¨ã‚‹", "è§¦ã‚‹", "æ¿¡ã‚‹"],
    wrongKanas: ["ã¾ã–ã‚‹", "ãªã”ã‚‹", "ã¬ã”ã‚‹"]
  },
  {
    kanji: "å…±æœ‰", kana: "ãã‚‡ã†ã‚†ã†", meaning: ["ê³µìœ "],
    wrongKanjis: ["ä¾›æœ‰", "å”æœ‰", "å¼·æœ‰"],
    wrongKanas: ["ã“ã‚†ã†", "ãã‚‡ã†ã‚†", "ãã†ã‚†ã†"]
  },

  // --- Page 32 ---
  {
    kanji: "é‹­ã„", kana: "ã™ã‚‹ã©ã„", meaning: ["ë‚ ì¹´ë¡­ë‹¤", "ì˜ˆë¦¬í•˜ë‹¤"],
    wrongKanjis: ["æ‚¦ã„", "éˆã„", "è„±ã„"],
    wrongKanas: ["ã«ã¶ã„", "ãã‚ã©ã„", "ã•ã¨"]
  },
  {
    kanji: "é‘‘è³", kana: "ã‹ã‚“ã—ã‚‡ã†", meaning: ["ê°ìƒ"],
    wrongKanjis: ["ç›£è³", "è¦³è³", "æ„Ÿè³"],
    wrongKanas: ["ãŒã‚“ã—ã‚‡ã†", "ã‹ã‚“ã—ã‚‡", "ã‘ã‚“ã—ã‚‡ã†"]
  },
  {
    kanji: "é®®æ˜", kana: "ã›ã‚“ã‚ã„", meaning: ["ì„ ëª…í•¨"],
    wrongKanjis: ["ç·šæ˜", "é¸æ˜", "å…ˆæ˜"],
    wrongKanas: ["ãœã‚“ã‚ã„", "ã›ã‚“ã¿ã‚‡ã†", "ã—ã‚“ã‚ã„"]
  },
  {
    kanji: "å……å®Ÿ", kana: "ã˜ã‚…ã†ã˜ã¤", meaning: ["ì¶©ì‹¤"],
    wrongKanjis: ["é‡å®Ÿ", "ä½å®Ÿ", "é›†å®Ÿ"],
    wrongKanas: ["ã—ã‚…ã†ã˜ã¤", "ã˜ã‚…ã˜ã¤", "ã˜ã‚…ã†ã—ã¤"]
  }
];

        // ----------------------------------------------------
        // ë¡œì§ ì‹œì‘
        // ----------------------------------------------------

        let currentIndex = 0;
        let score = 0;
        let currentStep = 'kanji'; // 'kanji' (ëœ»->í•œì) or 'reading' (í•œì->ë°œìŒ)
        let quizList = [];
        let incorrectList = [];
        let isReviewMode = false;
        let isProcessing = false;

        // DOM ìš”ì†Œ
        const elements = {
            questionText: document.getElementById('question-text'),
            stepBadge: document.getElementById('step-badge'),
            stepGuide: document.getElementById('step-guide'),
            choicesContainer: document.getElementById('choices-container'),
            feedback: document.getElementById('feedback'),
            progressBar: document.getElementById('progress-bar'),
            currentIndex: document.getElementById('current-index'),
            totalCount: document.getElementById('total-count'),
            quizContainer: document.getElementById('quiz-container'),
            resultContainer: document.getElementById('result-container'),
            finalScore: document.getElementById('final-score'),
            reviewSection: document.getElementById('review-section'),
            wrongCount: document.getElementById('wrong-count'),
            headerBg: document.getElementById('header-bg'),
            headerTitle: document.getElementById('header-title'),
            headerDesc: document.getElementById('header-desc')
        };

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // ğŸ”¥ [í•µì‹¬] ê²¹ì¹˜ëŠ” ê¸€ìê°€ ìˆëŠ” ì˜¤ë‹µ ìƒì„±ê¸°
        function getSmartDistractors(targetData, allData, type) {
            let candidates = allData.filter(item => item.kanji !== targetData.kanji);
            let filtered = [];

            if (type === 'kanji') {
                // 1ìˆœìœ„: í•œ ê¸€ìë¼ë„ ê²¹ì¹˜ëŠ” ë‹¨ì–´ ì°¾ê¸°
                const targetChars = targetData.kanji.split('');
                
                filtered = candidates.filter(item => {
                    // ê¸€ì ìˆ˜ê°€ ë¹„ìŠ·í•´ì•¼ í•¨ (Â±1)
                    if (Math.abs(item.kanji.length - targetData.kanji.length) > 1) return false;
                    
                    // ê²¹ì¹˜ëŠ” ê¸€ìê°€ ìˆëŠ”ì§€ í™•ì¸
                    return targetChars.some(char => item.kanji.includes(char));
                });

                // 2ìˆœìœ„: ê²¹ì¹˜ëŠ”ê²Œ ì—†ìœ¼ë©´ ê¸€ì ìˆ˜ ê°™ì€ ê²ƒ ì°¾ê¸°
                if (filtered.length < 3) {
                    const moreCandidates = candidates.filter(item => item.kanji.length === targetData.kanji.length);
                    filtered = [...filtered, ...moreCandidates];
                }
                
            } else if (type === 'reading') {
                // [ë°œìŒ] ê¸€ì ìˆ˜ Â±1 ì°¨ì´
                const targetLen = targetData.kana.length;
                filtered = candidates.filter(item => Math.abs(item.kana.length - targetLen) <= 1);
            }

            // 3ìˆœìœ„: ê·¸ë˜ë„ ë¶€ì¡±í•˜ë©´ ì „ì²´ì—ì„œ ëœë¤
            if (filtered.length < 3) {
                filtered = candidates;
            }

            // ì¤‘ë³µ ì œê±° í›„ 3ê°œ ì¶”ì¶œ
            const uniqueFiltered = [...new Set(filtered)]; 
            return shuffleArray(uniqueFiltered).slice(0, 3);
        }

        function initQuiz() {
            quizList = shuffleArray([...vocabularyData]);
            incorrectList = [];
            isReviewMode = false;
            score = 0;
            currentIndex = 0;
            updateHeaderUI();
            startCycle();
        }

        function startReview() {
            quizList = shuffleArray([...incorrectList]);
            incorrectList = [];
            isReviewMode = true;
            score = 0;
            currentIndex = 0;
            
            elements.resultContainer.classList.add('hidden');
            elements.quizContainer.classList.remove('hidden');
            updateHeaderUI();
            startCycle();
        }

        function updateHeaderUI() {
            if (isReviewMode) {
                elements.headerBg.className = "bg-orange-500 p-5 text-white text-center transition-colors duration-500";
                elements.headerTitle.innerText = "ì˜¤ë‹µ ë³µìŠµ ëª¨ë“œ";
                elements.headerDesc.innerText = "í‹€ë¦° ë‹¨ì–´ë¥¼ í™•ì‹¤í•˜ê²Œ ì™¸ì›Œë´…ì‹œë‹¤!";
            } else {
                elements.headerBg.className = "bg-indigo-600 p-5 text-white text-center transition-colors duration-500";
                elements.headerTitle.innerText = "JLPT N2 ê±°ê¾¸ë¡œ ì•”ê¸°";
                elements.headerDesc.innerText = "ëœ»ì„ ë³´ê³  í•œì(ìœ ì‚¬ ê¸€ì ì£¼ì˜) ë§ì¶”ê¸°";
            }
        }

        function startCycle() {
            elements.totalCount.innerText = quizList.length;
            loadQuestion();
        }

        function loadQuestion() {
            const currentData = quizList[currentIndex];
            elements.currentIndex.innerText = currentIndex + 1;
            
            const progress = (currentIndex / quizList.length) * 100;
            elements.progressBar.style.width = `${progress}%`;

            elements.feedback.innerText = '';
            
            // Reverse ëª¨ë“œëŠ” 'í•œì ê³ ë¥´ê¸°'ë¶€í„° ì‹œì‘
            currentStep = 'kanji';
            renderChoices();
            isProcessing = false;
        }

        function renderChoices() {
            const currentData = quizList[currentIndex];
            elements.choicesContainer.innerHTML = ''; 

            let correctAnswer = '';
            let distractors = [];

            if (currentStep === 'kanji') {
                // [Step 1] ëœ» -> í•œì
                elements.stepBadge.innerText = "Step 1";
                elements.stepBadge.className = "bg-indigo-100 text-indigo-700 text-xs font-bold px-3 py-1 rounded-full";
                elements.stepGuide.innerText = "ì•Œë§ì€ í•œìë¥¼ ê³ ë¥´ì„¸ìš”";
                
                // ì§ˆë¬¸: í•œêµ­ì–´ ëœ»
                elements.questionText.innerText = currentData.meaning.join(', ');
                elements.questionText.className = "text-4xl font-bold text-gray-800 mb-3 min-h-[3.5rem] break-keep leading-tight flex items-center justify-center";
                
                correctAnswer = currentData.kanji;

                // 1. ë¯¸ë¦¬ ì§€ì •ëœ ì˜¤ë‹µì´ ìˆìœ¼ë©´ ì‚¬ìš©
                if (currentData.wrongKanjis && currentData.wrongKanjis.length > 0) {
                    distractors = shuffleArray(currentData.wrongKanjis).slice(0, 3);
                } else {
                    // 2. ì—†ìœ¼ë©´ ìŠ¤ë§ˆíŠ¸ ì•Œê³ ë¦¬ì¦˜ (ê²¹ì¹˜ëŠ” ê¸€ì ì°¾ê¸°) ì‚¬ìš©
                    const distractorItems = getSmartDistractors(currentData, vocabularyData, 'kanji');
                    distractors = distractorItems.map(item => item.kanji);
                }

            } else {
                // [Step 2] í•œì -> ë°œìŒ
                elements.stepBadge.innerText = "Step 2";
                elements.stepBadge.className = "bg-emerald-100 text-emerald-700 text-xs font-bold px-3 py-1 rounded-full";
                elements.stepGuide.innerText = "ì˜¬ë°”ë¥¸ ë°œìŒ(ìš”ë¯¸ê°€ë‚˜)ì€?";

                // ì§ˆë¬¸: í•œì (ë°©ê¸ˆ ë§ì¶˜ ê²ƒ)
                elements.questionText.innerText = currentData.kanji;
                elements.questionText.className = "text-6xl font-bold text-indigo-600 mb-3 min-h-[3.5rem] flex items-center justify-center";

                correctAnswer = currentData.kana;

                if (currentData.wrongKanas && currentData.wrongKanas.length > 0) {
                    distractors = shuffleArray(currentData.wrongKanas).slice(0, 3);
                } else {
                    const distractorItems = getSmartDistractors(currentData, vocabularyData, 'reading');
                    distractors = distractorItems.map(item => item.kana);
                }
            }

            // ì •ë‹µ + ì˜¤ë‹µ ì„ê¸°
            const options = shuffleArray([correctAnswer, ...distractors]);

            // ë²„íŠ¼ ìƒì„±
            options.forEach(option => {
                const btn = document.createElement('button');
                btn.className = "choice-btn w-full bg-white border-2 border-gray-200 hover:border-indigo-500 hover:bg-indigo-50 text-gray-700 font-bold py-4 rounded-xl text-xl shadow-sm whitespace-normal break-keep h-full";
                btn.innerText = option;
                btn.onclick = () => checkAnswer(btn, option === correctAnswer, correctAnswer);
                elements.choicesContainer.appendChild(btn);
            });
        }

        function checkAnswer(btnElement, isCorrect, correctAnswerText) {
            if (isProcessing) return;
            isProcessing = true;

            const currentData = quizList[currentIndex];

            if (isCorrect) {
                // ì •ë‹µ ì²˜ë¦¬
                btnElement.className = "choice-btn w-full bg-indigo-500 border-2 border-indigo-600 text-white font-bold py-4 rounded-xl text-xl shadow-md"; 
                
                if (currentStep === 'kanji') {
                    // í•œì ë§ì¶¤ -> ë°œìŒìœ¼ë¡œ ì´ë™
                    elements.feedback.className = "text-indigo-600";
                    elements.feedback.innerText = "ì •ë‹µ! â­• ë°œìŒë„ ë§ì¶°ë³´ì„¸ìš”.";
                    setTimeout(() => {
                        currentStep = 'reading';
                        renderChoices();
                        isProcessing = false;
                    }, 600); 
                } else {
                    // ë°œìŒê¹Œì§€ ë§ì¶¤ -> ì ìˆ˜ íšë“ & ë‹¤ìŒ ë¬¸ì œ
                    score++;
                    elements.feedback.className = "text-emerald-600";
                    elements.feedback.innerText = "ì™„ë²½í•©ë‹ˆë‹¤! â­•";
                    setTimeout(() => {
                        nextQuestion();
                    }, 600);
                }

            } else {
                // ì˜¤ë‹µ ì²˜ë¦¬
                btnElement.className = "choice-btn w-full bg-red-500 border-2 border-red-600 text-white font-bold py-4 rounded-xl text-xl shadow-md"; 
                addIncorrectWord(currentData);

                // ì •ë‹µ ë²„íŠ¼ í‘œì‹œ
                const buttons = elements.choicesContainer.getElementsByTagName('button');
                for (let btn of buttons) {
                    if (btn.innerText === correctAnswerText) {
                        btn.className = "choice-btn w-full bg-indigo-500 border-2 border-indigo-600 text-white font-bold py-4 rounded-xl text-xl shadow-md opacity-70";
                    }
                }

                elements.feedback.className = "text-red-500";
                
                if (currentStep === 'kanji') {
                    elements.feedback.innerText = `ì˜¤ë‹µ! âŒ ì •ë‹µì€ [${currentData.kanji}] ì…ë‹ˆë‹¤.`;
                } else {
                    elements.feedback.innerText = `ì˜¤ë‹µ! âŒ ì •ë‹µì€ [${currentData.kana}] ì…ë‹ˆë‹¤.`;
                }

                setTimeout(() => {
                    if (currentStep === 'kanji') {
                        // í•œì í‹€ë ¤ë„ ë°œìŒ í€´ì¦ˆ ê¸°íšŒ ì¤Œ (í•™ìŠµ íš¨ê³¼)
                        currentStep = 'reading';
                        renderChoices();
                        isProcessing = false;
                    } else {
                        nextQuestion();
                    }
                }, 2000); // ì˜¤ë‹µ í™•ì¸ ì‹œê°„ ë„‰ë„‰íˆ
            }
        }

        function addIncorrectWord(wordObj) {
            if (!incorrectList.includes(wordObj)) {
                incorrectList.push(wordObj);
            }
        }

        function nextQuestion() {
            currentIndex++;
            if (currentIndex < quizList.length) {
                loadQuestion();
            } else {
                showResult();
            }
        }

        function showResult() {
            elements.quizContainer.classList.add('hidden');
            elements.resultContainer.classList.remove('hidden');
            elements.finalScore.innerText = score + " / " + quizList.length;
            elements.progressBar.style.width = '100%';

            if (incorrectList.length > 0) {
                elements.reviewSection.classList.remove('hidden');
                elements.wrongCount.innerText = incorrectList.length;
            } else {
                elements.reviewSection.classList.add('hidden');
                if(isReviewMode) {
                    elements.finalScore.innerText += " (ë³µìŠµ ì™„ë£Œ!)";
                }
            }
        }

        // ì´ˆê¸° ì‹¤í–‰
        if (typeof vocabularyData !== 'undefined' && vocabularyData.length > 0) {
            initQuiz();
        } else {
            alert("ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.");
        }
    </script>
</body>
</html>
```
