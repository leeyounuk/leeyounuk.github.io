<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‹¨ì–´ ëœ» ë§ì¶”ê¸° (ì˜ì–´ -> í•œê¸€)</title>
    <style>
        body {
            font-family: 'Apple SD Gothic Neo', 'Malgun Gothic', sans-serif;
            background-color: #f0f2f5;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }
        .container {
            background-color: white;
            padding: 2.5rem;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            width: 90%;
            max-width: 500px;
            text-align: center;
        }
        h1 { color: #333; margin-bottom: 10px; font-size: 1.5rem; }
        .subtitle { color: #666; font-size: 0.9rem; margin-bottom: 20px; }
        
        .btn {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: background 0.2s;
            margin: 5px;
        }
        .btn:hover { background-color: #0056b3; }
        .btn-secondary { background-color: #6c757d; }
        .btn-secondary:hover { background-color: #545b62; }
        .btn-outline {
            background-color: white;
            color: #007bff;
            border: 2px solid #007bff;
        }

        /* Quiz Screen */
        #quiz-screen, #result-screen { display: none; }
        .progress { color: #888; margin-bottom: 15px; font-size: 0.9rem; }
        
        .word-card {
            font-size: 2.2rem;
            font-weight: bold;
            color: #2c3e50;
            margin: 20px 0;
            padding: 30px 10px;
            background: #e9ecef;
            border-radius: 10px;
            word-break: keep-all;
        }

        .input-area { margin: 20px 0; }
        input[type="text"] {
            width: 80%;
            padding: 12px;
            font-size: 1.2rem;
            border: 2px solid #ddd;
            border-radius: 8px;
            text-align: center;
            outline: none;
        }
        input[type="text"]:focus { border-color: #007bff; }

        .feedback {
            min-height: 24px;
            margin: 10px 0;
            font-weight: bold;
        }
        .correct-msg { color: #28a745; }
        .wrong-msg { color: #dc3545; }
        
        .hint-text { font-size: 0.9rem; color: #aaa; margin-top: 5px; cursor: pointer; }

        /* Result Screen */
        .score-display { font-size: 2rem; font-weight: bold; color: #007bff; margin: 20px 0; }
        .wrong-list { 
            text-align: left; 
            margin-top: 20px; 
            max-height: 200px; 
            overflow-y: auto; 
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }
        .wrong-item { 
            border-bottom: 1px solid #ddd; 
            padding: 8px 0; 
            font-size: 0.95rem;
            display: flex;
            justify-content: space-between;
        }
        .wrong-item span { font-weight: bold; color: #dc3545; }
    </style>
</head>
<body>

<div class="container">
    <div id="start-screen">
        <h1>ë‹¨ì–´ ëœ» ë§ì¶”ê¸° í€´ì¦ˆ</h1>
        <p class="subtitle">ì˜ì–´ ë‹¨ì–´ë¥¼ ë³´ê³  í•œê¸€ ëœ»ì„ ì…ë ¥í•˜ì„¸ìš”.<br>(9ì£¼ì°¨ ~ 14ì£¼ì°¨ í†µí•©)</p>
        <p>ì´ <span id="total-count">0</span>ê°œì˜ ë‹¨ì–´</p>
        <button class="btn" onclick="startQuiz('all')">ì „ì²´ ëœë¤ ì‹œì‘</button>
    </div>

    <div id="quiz-screen">
        <div class="progress">ë¬¸ì œ <span id="current-num">1</span> / <span id="total-num">10</span></div>
        
        <div class="word-card" id="question-word">Word</div>
        
        <div class="input-area">
            <input type="text" id="answer-input" placeholder="í•œê¸€ ëœ» ì…ë ¥" autocomplete="off">
            <div id="hint-display" class="hint-text" onclick="showHint()">ğŸ’¡ íŒíŠ¸ ë³´ê¸° (í´ë¦­)</div>
        </div>

        <div class="feedback" id="feedback-msg"></div>

        <button class="btn" id="submit-btn" onclick="checkAnswer()">ì œì¶œ</button>
        <button class="btn btn-secondary" id="next-btn" onclick="nextQuestion()" style="display:none;">ë‹¤ìŒ ë¬¸ì œ &rarr;</button>
    </div>

    <div id="result-screen">
        <h1>í…ŒìŠ¤íŠ¸ ì¢…ë£Œ!</h1>
        <div class="score-display">ì ìˆ˜: <span id="score">0</span>ì </div>
        <div id="wrong-answer-section" style="display:none;">
            <h3>í‹€ë¦° ë‹¨ì–´ ë³µìŠµ</h3>
            <div class="wrong-list" id="wrong-list"></div>
            <button class="btn" onclick="startQuiz('review')">í‹€ë¦° ë¬¸ì œë§Œ ë‹¤ì‹œ í’€ê¸°</button>
        </div>
        <button class="btn btn-outline" onclick="location.reload()">ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
    </div>
</div>

<script>
    // ë°ì´í„°: 9ì£¼ì°¨~14ì£¼ì°¨ ë‹¨ì–´ ë¦¬ìŠ¤íŠ¸
    const vocabData = [
        // 9ì£¼ì°¨
        { w: "be composed of", m: "~ë¡œ êµ¬ì„±ëœ" }, { w: "span", m: "ê¸°ê°„" }, 
        { w: "consist of", m: "~ë¡œ êµ¬ì„±ë˜ë‹¤" }, { w: "metropolitan", m: "ëŒ€ë„ì‹œì˜" },
        { w: "geometric", m: "ê¸°í•˜í•™ì˜" }, { w: "inexpensive", m: "ì €ë ´í•œ" },
        { w: "bottleneck", m: "ë³‘ëª©í˜„ìƒ" }, { w: "bandwidth", m: "ëŒ€ì—­í­" },
        { w: "be convicted", m: "ìœ ì£„ íŒê²°ì„ ë°›ë‹¤" },
        // 10ì£¼ì°¨
        { w: "security", m: "ë³´ì•ˆ" }, { w: "intruder", m: "ì¹¨ì…ì" },
        { w: "destructive", m: "íŒŒê´´ì ì¸" }, { w: "effective", m: "íš¨ê³¼ì ì¸" },
        { w: "regulate", m: "ê·œì œí•˜ë‹¤" }, { w: "remarkably", m: "í˜„ì €íˆ" },
        { w: "anarchy", m: "ë¬´ì •ë¶€ì˜" }, { w: "suite", m: "ì¼í–‰" },
        { w: "abbreviation", m: "ì•½ì–´" }, { w: "formatted", m: "í¬ë§·ëœ" },
        // 11ì£¼ì°¨
        { w: "broadcasting", m: "ë°©ì†¡" }, { w: "confine", m: "ì œí•œí•˜ë‹¤" },
        { w: "enabling", m: "ê°€ëŠ¥ì¼€í•˜ëŠ”" }, { w: "flexible", m: "ìœ ì—°í•œ" },
        { w: "publicize", m: "ê´‘ê³ í•˜ë‹¤" }, { w: "objective", m: "ê°ê´€ì ì¸" },
        { w: "corruption", m: "ë¶€íŒ¨" }, { w: "preservation", m: "ë³´í˜¸" },
        { w: "replicate", m: "ë³µì œí•˜ë‹¤" }, { w: "eavesdrop on", m: "ëª°ë˜ ì—¿ë“£ë‹¤" },
        // 12ì£¼ì°¨
        { w: "regularly", m: "ê·œì¹™ì ìœ¼ë¡œ" }, { w: "well-thought-out", m: "ì˜ ìƒê°í•´ë‚¸" },
        { w: "recipient", m: "ìˆ˜ì·¨ì¸" }, { w: "facility", m: "ìš©ëŸ‰" },
        { w: "spun", m: "ì£ë‹¤" }, { w: "dissimilar", m: "ë¹„ìŠ·í•˜ì§€ ì•Šì€" },
        { w: "alter", m: "ëŒ€ì²´ í•˜ë‹¤" }, { w: "suited for", m: "~ì— ì í•©í•œ" },
        { w: "refinement", m: "ì •ì œ" }, { w: "lax", m: "ëŠìŠ¨í•œ" },
        // 13ì£¼ì°¨
        { w: "reasoning", m: "ì¶”ë¡ " }, { w: "coined in", m: "~ì—ì„œ ë§Œë“¤ì–´ì§„" },
        { w: "diagnose", m: "ì§„ë‹¨í•˜ë‹¤" }, { w: "stimuli", m: "ìê·¹" },
        { w: "expert", m: "ì „ë¬¸ê°€" }, { w: "defeat", m: "íŒ¨ë°°ì‹œí‚¤ë‹¤" },
        { w: "clumsily", m: "ì„œíˆ¬ë¥´ê²Œ" }, { w: "rudimentary", m: "ê°€ì¥ ê¸°ì´ˆì ì¸" },
        { w: "dictation", m: "ë°›ì•„ì“°ê¸°" }, { w: "discipline", m: "í•™ë¬¸ ë¶„ì•¼" },
        // 14ì£¼ì°¨
        { w: "illness", m: "ë³‘" }, { w: "financial", m: "ì¬ì •ì˜" },
        { w: "challenging", m: "ì–´ë ¤ìš´" }, { w: "elusive", m: "ì´í•´í•˜ê¸° í˜ë“ " },
        { w: "progress", m: "ì§„ì „" }, { w: "attempt", m: "ì‹œë„í•˜ë‹¤" },
        { w: "predict", m: "ì˜ˆì¸¡í•˜ë‹¤" }, { w: "prominently", m: "ë‘ë“œëŸ¬ì§€ê²Œ" },
        { w: "imply", m: "ì•”ì‹œí•˜ë‹¤" }, { w: "stride", m: "ì„±í¼ì„±í¼ ê±·ë‹¤" }
    ];

    let currentQuestions = [];
    let currentIndex = 0;
    let score = 0;
    let wrongAnswers = [];
    let isAnswerChecked = false;

    document.getElementById('total-count').innerText = vocabData.length;

    // ì—”í„°í‚¤ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
    document.getElementById("answer-input").addEventListener("keypress", function(event) {
        if (event.key === "Enter") {
            if (!isAnswerChecked) {
                checkAnswer();
            } else {
                nextQuestion();
            }
        }
    });

    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    function startQuiz(mode) {
        if (mode === 'all') {
            currentQuestions = shuffleArray([...vocabData]);
            wrongAnswers = [];
        } else if (mode === 'review') {
            currentQuestions = shuffleArray([...wrongAnswers]);
            wrongAnswers = [];
        }

        currentIndex = 0;
        score = 0;

        document.getElementById('start-screen').style.display = 'none';
        document.getElementById('result-screen').style.display = 'none';
        document.getElementById('quiz-screen').style.display = 'block';
        
        loadQuestion();
    }

    function loadQuestion() {
        if (currentIndex >= currentQuestions.length) {
            showResult();
            return;
        }

        const currentData = currentQuestions[currentIndex];
        isAnswerChecked = false;
        
        // UI ì´ˆê¸°í™”
        document.getElementById('current-num').innerText = currentIndex + 1;
        document.getElementById('total-num').innerText = currentQuestions.length;
        document.getElementById('question-word').innerText = currentData.w; // ì˜ì–´ ë‹¨ì–´ í‘œì‹œ
        
        const inputField = document.getElementById('answer-input');
        inputField.value = '';
        inputField.disabled = false;
        inputField.focus();
        
        document.getElementById('feedback-msg').innerHTML = '';
        document.getElementById('hint-display').innerText = 'ğŸ’¡ íŒíŠ¸ ë³´ê¸° (í´ë¦­)';
        
        document.getElementById('submit-btn').style.display = 'inline-block';
        document.getElementById('next-btn').style.display = 'none';
    }

    function showHint() {
        if (isAnswerChecked) return;
        const currentMean = currentQuestions[currentIndex].m;
        // íŒíŠ¸: í•œê¸€ ì²« ê¸€ì ë˜ëŠ” íŠ¹ìˆ˜ë¬¸ìê°€ ìˆë‹¤ë©´ ê·¸ ë‹¤ìŒ ê¸€ì
        let hintChar = currentMean.charAt(0);
        if (hintChar === '~') hintChar = currentMean.charAt(1);
        
        document.getElementById('hint-display').innerText = `ì²« ê¸€ì íŒíŠ¸: "${hintChar}"`;
    }

    // ë¬¸ìì—´ ì •ê·œí™” (ë„ì–´ì“°ê¸°, íŠ¹ìˆ˜ë¬¸ì ì œê±° í›„ ë¹„êµ)
    function cleanString(str) {
        // ê³µë°± ì œê±°, ~, ., , ì œê±°
        return str.replace(/[\s~\.,]/g, '').toLowerCase();
    }

    function checkAnswer() {
        const inputField = document.getElementById('answer-input');
        const userVal = inputField.value.trim();
        const correctVal = currentQuestions[currentIndex].m;
        const feedback = document.getElementById('feedback-msg');

        if (userVal === '') return;

        isAnswerChecked = true;
        inputField.disabled = true;

        // ì •ë‹µ ë¹„êµ (ìœ ì—°í•œ ë¹„êµ)
        if (cleanString(userVal) === cleanString(correctVal)) {
            score++;
            feedback.innerHTML = '<span class="correct-msg">ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰</span>';
        } else {
            feedback.innerHTML = `<span class="wrong-msg">ì˜¤ë‹µ! ì •ë‹µì€: <u>${correctVal}</u></span>`;
            wrongAnswers.push(currentQuestions[currentIndex]);
        }

        document.getElementById('submit-btn').style.display = 'none';
        document.getElementById('next-btn').style.display = 'inline-block';
        document.getElementById('next-btn').focus();
    }

    function nextQuestion() {
        currentIndex++;
        loadQuestion();
    }

    function showResult() {
        document.getElementById('quiz-screen').style.display = 'none';
        document.getElementById('result-screen').style.display = 'block';
        document.getElementById('score').innerText = Math.round((score / currentQuestions.length) * 100);

        const wrongSection = document.getElementById('wrong-answer-section');
        const wrongList = document.getElementById('wrong-list');
        
        if (wrongAnswers.length > 0) {
            wrongSection.style.display = 'block';
            wrongList.innerHTML = '';
            wrongAnswers.forEach(item => {
                const div = document.createElement('div');
                div.className = 'wrong-item';
                div.innerHTML = `<div>${item.w}</div><span>${item.m}</span>`;
                wrongList.appendChild(div);
            });
        } else {
            wrongSection.style.display = 'none';
        }
    }
</script>

</body>
</html>
